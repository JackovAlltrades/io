import"./io-core.js";import{IoElement,html}from"./io.js";class IoVector extends IoElement{static get Style(){return html`<style>:host {display: flex;flex-direction: row;align-self: stretch;justify-self: stretch;}:host > io-number {width: inherit;flex: 1 1;}:host > *:not(:last-child) {margin-right: var(--io-spacing);}:host > io-boolean {width: var(--io-line-height) !important;}</style>`}static get Properties(){return{value:[0,0,0,0],conversion:1,step:.001,min:-1/0,max:1/0,linkable:!1,linked:!1,components:{type:Array,notify:!1}}}_onValueSet(t){const e=t.composedPath()[0].id,s=t.detail.value,i=t.detail.oldValue;if(this.value[e]=s,this.linked){const t=s/i;for(let o in this.components){const l=this.components[o];0===i?this.value[l]=s:l!==e&&(this.value[l]*=t)}}const o={object:this.value,property:this.linked?null:e,value:s,oldValue:i};this.dispatchEvent("object-mutated",o,!1,window)}valueChanged(){this.components=Object.keys(this.value)}changed(){const t=[];for(let e in this.components){const s=this.components[e];void 0!==this.value[s]&&t.push(["io-number",{id:s,value:this.value[s],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:!0,"on-value-set":this._onValueSet}])}t.push(this.getSlotted()),this.template(t)}getSlotted(){return this.linkable?["io-boolicon",{value:this.bind("linked"),true:"icons:link",false:"icons:unlink"}]:null}}IoVector.Register();class IoMatrix extends IoElement{static get Style(){return html`<style>:host {display: grid;align-self: stretch;justify-self: stretch;grid-gap: var(--io-spacing);}:host[columns="4"] {grid-template-columns: repeat(4, 1fr);}:host[columns="3"] {grid-template-columns: repeat(3, 1fr);}:host[columns="2"] {grid-template-columns: repeat(2, 1fr);}:host > io-number {width: inherit;}</style>`}static get Properties(){return{value:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],step:.001,components:{type:Array,notify:!1},columns:{value:4,reflect:1}}}_onValueSet(t){if(t.detail.object)return;const e=t.composedPath()[0].id,s=t.detail.value,i=t.detail.oldValue;this.value[e]=s;const o={object:this.value,property:e,value:s,oldValue:i};this.dispatchEvent("object-mutated",o,!1,window)}valueChanged(){let t;4===this.value.length&&(t=[0,1,2,3],this.columns=2),9===this.value.length&&(t=[0,1,2,3,4,5,6,7,8],this.columns=3),16===this.value.length&&(t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.columns=4),this.components=t}changed(){const t=[];for(let e in this.components){const s=this.components[e];void 0!==this.value[s]&&t.push(["io-number",{id:s,value:this.value[s],step:this.step,"on-value-set":this._onValueSet}])}this.template(t)}}IoMatrix.Register();export{IoMatrix,IoVector};