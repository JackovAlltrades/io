class Prototypes extends Array{constructor(e){super();let t=e.prototype;for(;t&&t.constructor!==HTMLElement&&t.constructor!==Object;)this.push(t),t=t.__proto__}}const illegalPropNames=["style","className","listeners"];class ProtoProperties{constructor(e){const t={};for(let s=e.length;s--;){let i=e[s].constructor.properties;for(let e in i){-1!==illegalPropNames.indexOf(e)&&console.warn("Illegal property name:",e);let s=new Property(i[e],!0);t[e]?t[e].assign(s):t[e]=s}}for(let e in t)this[e]=new Property(t[e])}clone(){let e=new ProtoProperties([]);for(let t in this)e[t]=this[t].clone();return e}}function defineProperties(e){for(let t in e.__props){const s=t+"Changed",i=t+"-changed",o="_"!==t.charAt(0),n=!(!1===e.__props[t].enumerable);Object.defineProperty(e,t,{get:function(){return this.__props[t].value},set:function(e){if(this.__props[t].value===e)return;const n=this.__props[t].value;this.__props[t].value=e,this.__props[t].reflect&&this.setAttribute(t,this.__props[t].value),o&&(this[s]&&this[s](e,n),this.__props[t].observer&&this[this.__props[t].observer](e,n),this.changed(),this.dispatchEvent(i,{property:t,value:e,oldValue:n}))},enumerable:n&&o,configurable:!0})}}class Property{constructor(e){null===e||void 0===e?e={value:e}:"function"==typeof e?e={type:e}:"object"!=typeof e&&(e={value:e,type:e.constructor}),this.value=e.value,this.type=e.type,this.observer=e.observer,this.reflect=e.reflect,this.binding=e.binding,this.config=e.config,this.enumerable=void 0===e.enumerable||e.enumerable}assign(e){void 0!==e.value&&(this.value=e.value),void 0!==e.type&&(this.type=e.type),void 0!==e.observer&&(this.observer=e.observer),void 0!==e.reflect&&(this.reflect=e.reflect),void 0!==e.binding&&(this.binding=e.binding),void 0!==e.config&&(this.config=e.config),void 0!==e.enumerable&&(this.enumerable=e.enumerable)}clone(){let e=new Property(this);return void 0===e.value&&e.type&&(e.type===Boolean?e.value=!1:e.type===String?e.value="":e.type===Number?e.value=0:e.type===Array?e.value=[]:e.type===Object?e.value={}:e.type!==HTMLElement&&e.type!==Function&&(e.value=new e.type)),e}}class ProtoListeners{constructor(e){for(let t=e.length;t--;){let s=e[t].constructor.listeners;for(let e in s)this[e]=s[e]}}connect(e){for(let t in this)e.addEventListener(t,e[this[t]])}disconnect(e){for(let t in this)e.removeEventListener(t,e[this[t]])}}class ProtoFunctions extends Array{constructor(e){super();for(let t=e.length;t--;){let s=Object.getOwnPropertyNames(e[t]);for(let i=0;i<s.length;i++)"constructor"!==s[i]&&"function"==typeof e[t][s[i]]&&"anonymous"!==e[t][s[i]].name&&(-1===this.indexOf(s[i])&&this.push(s[i]),"value"===s[i]&&console.log(e[t][s[i]]))}}bind(e){for(let t=0;t<this.length;t++)e[this[t]]=e[this[t]].bind(e)}}class Binding{constructor(e,t){this.source=e,this.sourceProp=t,this.targets=[],this.targetsMap=new WeakMap,this.updateSource=this.updateSource.bind(this),this.updateTargets=this.updateTargets.bind(this),this.setSource(this.source)}setSource(){this.source.addEventListener(this.sourceProp+"-changed",this.updateTargets);for(let e=this.targets.length;e--;){let t=this.targetsMap.get(this.targets[e]);for(let s=t.length;s--;)this.targets[e].__props[t[s]].value=this.source[this.sourceProp]}}setTarget(e,t){if(-1===this.targets.indexOf(e)&&this.targets.push(e),this.targetsMap.has(e)){let s=this.targetsMap.get(e);-1===s.indexOf(t)&&(s.push(t),e.addEventListener(t+"-changed",this.updateSource))}else this.targetsMap.set(e,[t]),e.addEventListener(t+"-changed",this.updateSource)}removeTarget(e,t){if(this.targetsMap.has(e)){let s=this.targetsMap.get(e),i=s.indexOf(t);-1!==i&&s.splice(i,1),0===s.length&&this.targets.splice(this.targets.indexOf(e),1),e.removeEventListener(t+"-changed",this.updateSource)}}updateSource(e){if(-1===this.targets.indexOf(e.target))return;let t=e.detail.value;this.source[this.sourceProp]!==t&&(this.source[this.sourceProp]=t)}updateTargets(e){if(e.target!=this.source)return;let t=e.detail.value;for(let e=this.targets.length;e--;){let s=this.targetsMap.get(this.targets[e]);for(let i=s.length;i--;){let o=this.targets[e][s[i]];if(o!==t){if("number"==typeof t&&"number"==typeof o&&isNaN(t)&&isNaN(o))continue;this.targets[e][s[i]]=t}}}}}class PropListeners{setListeners(e){for(let t in e)t.startsWith("on-")&&(this[t.slice(3,t.length)]=e[t])}connect(e){for(let t in this){let s="function"==typeof this[t]?this[t]:e[this[t]];e.addEventListener(t,s)}}disconnect(e){for(let t in this){let s="function"==typeof this[t]?this[t]:e[this[t]];e.removeEventListener(t,s)}}}const IoCoreMixin=e=>(class extends e{static get properties(){return{id:{type:String,enumerable:!1}}}constructor(e={}){super(),Object.defineProperty(this,"__bindings",{value:{}}),Object.defineProperty(this,"__listeners",{value:{}}),Object.defineProperty(this,"__observeQueue",{value:[]}),Object.defineProperty(this,"__notifyQueue",{value:[]}),Object.defineProperty(this,"__props",{value:this.__props.clone()}),Object.defineProperty(this,"$",{value:{}}),this.__protoFunctions.bind(this),Object.defineProperty(this,"__propListeners",{value:new PropListeners}),this.__propListeners.setListeners(e),this.setProperties(e),-1===this.__observeQueue.indexOf("changed")&&this.__observeQueue.push("changed")}changed(){}dispose(){this.__protoListeners.disconnect(this),this.__propListeners.disconnect(this),this.removeListeners();for(let e in this.__props)this.__props[e].binding&&this.__props[e].binding.removeTarget(this,e)}bind(e){return this.__bindings[e]=this.__bindings[e]||new Binding(this,e),this.__bindings[e]}set(e,t){let s=this[e];this[e]=t,s!==t&&this.dispatchEvent(e+"-set",{value:t,oldValue:s},!1)}setProperties(e){for(let t in e){if(void 0===this.__props[t])continue;let s,i,o=this.__props[t].binding,n=this.__props[t].value;e[t]instanceof Binding?(s=e[t],i=e[t].source[e[t].sourceProp]):i=e[t],this.__props[t].binding=s,this.__props[t].value=i,i!==n&&(this.__props[t].reflect&&this.setAttribute(t,i),this.queue(this.__props[t].observer,t,i,n),this.__props[t].observer&&this.queue(this.__props[t].observer,t,i,n),this.queue(t+"Changed",t,i,n)),s!==o&&(s.setTarget(this,t),o&&console.warn("Disconnect!",s,o))}if(e.className&&(this.className=e.className),e.style)for(let t in e.style)this.style[t]=e.style[t],this.style.setProperty(t,e.style[t])}objectMutated(e){for(let t=this.__objectProps.length;t--;)this.__props[this.__objectProps[t]].value===e.detail.object&&this.changed()}connectedCallback(){this.__protoListeners.connect(this),this.__propListeners.connect(this),this.queueDispatch();for(let e in this.__props)this.__props[e].binding&&this.__props[e].binding.setTarget(this,e);this.__objectProps.length&&window.addEventListener("io-object-mutated",this.objectMutated)}disconnectedCallback(){this.__protoListeners.disconnect(this),this.__propListeners.disconnect(this);for(let e in this.__props)this.__props[e].binding&&this.__props[e].binding.removeTarget(this,e);this.__objectProps.length&&window.removeEventListener("io-object-mutated",this.objectMutated)}addEventListener(t,s){this.__listeners[t]=this.__listeners[t]||[],-1===this.__listeners[t].indexOf(s)&&(e===HTMLElement&&HTMLElement.prototype.addEventListener.call(this,t,s),this.__listeners[t].push(s))}hasEventListener(e,t){return void 0!==this.__listeners[e]&&-1!==this.__listeners[e].indexOf(t)}removeEventListener(t,s){if(void 0!==this.__listeners[t]){let i=this.__listeners[t].indexOf(s);-1!==i&&(e===HTMLElement&&HTMLElement.prototype.removeEventListener.call(this,t,s),this.__listeners[t].splice(i,1))}}removeListeners(){for(let t in this.__listeners)for(let s=this.__listeners[t].length;s--;)e===HTMLElement&&HTMLElement.prototype.removeEventListener.call(this,t,this.__listeners[t][s]),this.__listeners[t].splice(s,1)}dispatchEvent(e,t={},s=!0,i=this){if(i instanceof HTMLElement||i===window)HTMLElement.prototype.dispatchEvent.call(i,new CustomEvent(e,{type:e,detail:t,bubbles:s,composed:!0}));else{let o=[i];if(void 0!==this.__listeners[e]){let i=this.__listeners[e].slice(0);for(let n=0,r=i.length;n<r;n++){const r={detail:t,target:this,bubbles:s,path:o=o||[this]};if(i[n].call(this,r),s){let s=this.parent;for(;s;)o.push(s),s.dispatchEvent(e,t,!0,o),s=s.parent}}}}}queue(e,t,s,i){"number"==typeof s&&"number"==typeof i&&isNaN(s)&&isNaN(i)||(e&&this[e]&&-1===this.__observeQueue.indexOf(e)&&this.__observeQueue.push(e),this.__notifyQueue.push([t+"-changed",{value:s,oldValue:i}]))}queueDispatch(){(this.__observeQueue.length||this.__notifyQueue.length)&&this.__observeQueue.push("changed");for(let e=0;e<this.__observeQueue.length;e++)this[this.__observeQueue[e]]();for(let e=0;e<this.__notifyQueue.length;e++)this.dispatchEvent(this.__notifyQueue[e][0],this.__notifyQueue[e][1]);this.__observeQueue.length=0,this.__notifyQueue.length=0}});IoCoreMixin.Register=function(){Object.defineProperty(this.prototype,"__prototypes",{value:new Prototypes(this)}),Object.defineProperty(this.prototype,"__props",{value:new ProtoProperties(this.prototype.__prototypes)}),Object.defineProperty(this.prototype,"__protoFunctions",{value:new ProtoFunctions(this.prototype.__prototypes)}),Object.defineProperty(this.prototype,"__protoListeners",{value:new ProtoListeners(this.prototype.__prototypes)}),Object.defineProperty(this.prototype,"__objectProps",{value:[]});const e=[Boolean,String,Number,HTMLElement,Function];for(let t in this.prototype.__props){let s=this.prototype.__props[t].type;-1==e.indexOf(s)&&this.prototype.__objectProps.push(t)}defineProperties(this.prototype)};class IoElement extends(IoCoreMixin(HTMLElement)){static get properties(){return{tabindex:{type:String,reflect:!0,enumerable:!1},contenteditable:{type:Boolean,reflect:!0,enumerable:!1}}}connectedCallback(){super.connectedCallback();for(let e in this.__props)this.__props[e].reflect&&this.setAttribute(e,this.__props[e].value)}template(e,t){this.traverse(buildTree()(["root",e]).children,t||this)}traverse(e,t){const s=t.children;for(;s.length>e.length;){let e=s[s.length-1],i=Array.from(e.querySelectorAll("*"));for(let e=i.length;e--;)i[e].dispose&&i[e].dispose();t.removeChild(e)}const i=document.createDocumentFragment();for(let t=s.length;t<e.length;t++)i.appendChild(constructElement(e[t]));t.appendChild(i);for(let i=0;i<s.length;i++)if(s[i].localName!==e[i].name){const o=s[i];t.insertBefore(constructElement(e[i]),o),t.removeChild(o)}else if(s[i].hasOwnProperty("__props"))s[i].setProperties(e[i].props),s[i].queueDispatch(),s[i].__propListeners.setListeners(e[i].props),s[i].__propListeners.connect(s[i]);else{for(let t in e[i].props)if("style"===t)for(let o in e[i].props.style)s[i].style.setProperty(o,e[i].props[t][o]);else s[i][t]=e[i].props[t];s[i].__propListeners.setListeners(e[i].props),s[i].__propListeners.connect(s[i])}for(let t=0;t<e.length;t++)e[t].props.id&&(this.$[e[t].props.id]=s[t]),e[t].children&&"string"==typeof e[t].children?s[t].innerText=e[t].children:e[t].children&&"object"==typeof e[t].children&&this.traverse(e[t].children,s[t])}setAttribute(e,t){!0===t?HTMLElement.prototype.setAttribute.call(this,e,""):!1===t||""===t?this.removeAttribute(e):"string"!=typeof t&&"number"!=typeof t||this.getAttribute(e)!==String(t)&&HTMLElement.prototype.setAttribute.call(this,e,t)}static get observedAttributes(){return this.prototype.__observedAttributes}attributeChangedCallback(e,t,s){const i=this.__props[e].type;i===Boolean?null!==s&&""!==s||(this[e]=""===s):i&&(this[e]=i(s))}}function html(){return arguments[0][0]}IoElement.Register=function(){IoCoreMixin.Register.call(this),Object.defineProperty(this,"localName",{value:this.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}),Object.defineProperty(this.prototype,"localName",{value:this.localName}),Object.defineProperty(this.prototype,"__observedAttributes",{value:[]});for(let e in this.prototype.__props)this.prototype.__props[e].reflect&&this.prototype.__observedAttributes.push(e);customElements.define(this.localName,this),initStyle(this.prototype.__prototypes)},IoElement.Register();const constructElement=function(e){let t=customElements.get(e.name);if(t)return new t(e.props);let s=document.createElement(e.name);for(let t in e.props)if("style"===t)for(let i in e.props[t])s.style[i]=e.props[t][i];else s[t]=e.props[t];return Object.defineProperty(s,"__propListeners",{value:new PropListeners}),s.__propListeners.setListeners(e.props),s.__propListeners.connect(s),s},clense=(e,t)=>t?"string"==typeof t[0]?[...e,t]:[...e,...t]:e,buildTree=()=>e=>e&&"object"==typeof e[1]&&!Array.isArray(e[1])?{name:e[0],props:e[1],children:Array.isArray(e[2])?e[2].reduce(clense,[]).map(buildTree()):e[2]||""}:buildTree()([e[0],{},e[1]||""]),_stagingElement=document.createElement("div");function initStyle(e){let t=e[0].constructor.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(let s=e.length;s--;){let i=e[s].constructor.style;if(i){if(s<e.length-1&&i==e[s+1].constructor.style)continue;i=i.replace(new RegExp(":host","g"),t),_stagingElement.innerHTML=i;let o=_stagingElement.querySelector("style");o.setAttribute("id","io-style-"+t+"-"+s),document.head.appendChild(o)}}}const IoLiteMixin=e=>(class extends e{addEventListener(e,t){this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)}hasEventListener(e,t){return void 0!==this._listeners&&(void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t))}removeEventListener(e,t){if(void 0!==this._listeners&&void 0!==this._listeners[e]){let s=this._listeners[e].indexOf(t);-1!==s&&this._listeners[e].splice(s,1)}}dispatchEvent(e,t={}){const s={path:[this],target:this,detail:t};if(this._listeners&&void 0!==this._listeners[e]){const t=this._listeners[e].slice(0);for(let e=0,i=t.length;e<i;e++)t[e].call(this,s)}}defineProperties(e){this.hasOwnProperty("_properties")||Object.defineProperty(this,"_properties",{value:{},enumerable:!1});for(let t in e){let s=e[t];null===s||void 0===s?s={value:s}:"object"!=typeof s?s={value:s}:"object"==typeof s&&"Object"!==s.constructor.name?s={value:s}:"object"==typeof s&&void 0===s.value&&(s={value:s}),defineProperty(this,t,s)}}}),defineProperty=function(e,t,s){const i=t+"Changed",o=t+"-changed",n="_"!==t.charAt(0),r=!(!1===s.enumerable);e._properties[t]=s.value,e.hasOwnProperty(t)||Object.defineProperty(e,t,{get:function(){return e._properties[t]},set:function(r){if(e._properties[t]===r)return;const h=e._properties[t];e._properties[t]=r,n&&(s.observer&&e[s.observer](r,h),"function"==typeof e[i]&&e[i](r,h),"function"==typeof e.changed&&e.changed.call(e),e.dispatchEvent(o,{property:t,value:r,oldValue:h,bubbles:!0}))},enumerable:r&&n,configurable:!0}),e[t]=s.value};class IoLite extends(IoLiteMixin(Object)){}const _clickmask=document.createElement("div");_clickmask.style="position: fixed; top:0; left:0; bottom:0; right:0; z-index:2147483647;";let _mousedownPath=null;class Vector2{constructor(e={}){this.x=e.x||0,this.y=e.y||0}set(e){return this.x=e.x,this.y=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}distanceTo(e){let t=this.x-e.x,s=this.y-e.y;return Math.sqrt(t*t+s*s)}}class Pointer{constructor(e={}){this.position=new Vector2(e.position),this.previous=new Vector2(e.previous),this.movement=new Vector2(e.movement),this.distance=new Vector2(e.distance),this.start=new Vector2(e.start)}getClosest(e){let t=e[0];for(let s=1;s<e.length;s++)this.position.distanceTo(e[s].position)<this.position.distanceTo(t.position)&&(t=e[s]);return t}changed(e){this.previous.set(this.position),this.movement.set(e.position).sub(this.position),this.distance.set(e.position).sub(this.start),this.position.set(e.position)}}const IoInteractiveMixin=e=>(class extends e{static get properties(){return{pointers:Array,pointermode:"relative",cursor:"all-scroll"}}static get listeners(){return{mousedown:"_onMousedown",touchstart:"_onTouchstart",mousemove:"_onMousehover"}}constructor(e){super(e),this._clickmask=_clickmask}getPointers(e,t){let s=e.touches?e.touches:[e],i=[],o=this.getBoundingClientRect();for(let n=0;n<s.length;n++)if(s[n].target===e.target||void 0===e.touches){let e=new Vector2({x:s[n].clientX,y:s[n].clientY});"relative"===this.pointermode?(e.x-=o.left,e.y-=o.top):"viewport"===this.pointermode&&(e.x=(e.x-o.left)/o.width*2-1,e.y=(e.y-o.top)/o.height*2-1),void 0===this.pointers[n]&&(this.pointers[n]=new Pointer({start:e}));let r=new Pointer({position:e}),h=r.getClosest(this.pointers);t&&h.start.set(e),h.changed(r),i.push(h)}for(let e=this.pointers.length;e--;)-1===i.indexOf(this.pointers[e])&&this.pointers.splice(e,1)}_onMousedown(e){_mousedownPath=e.composedPath(),this.getPointers(e,!0),this._fire("io-pointer-start",e,this.pointers),window.addEventListener("mousemove",this._onMousemove),window.addEventListener("mouseup",this._onMouseup),window.addEventListener("blur",this._onMouseup),_clickmask.parentNode!==document.body&&(document.body.appendChild(_clickmask),_clickmask.style.setProperty("cursor",this.cursor))}_onMousemove(e){this.getPointers(e),this._fire("io-pointer-move",e,this.pointers,_mousedownPath)}_onMouseup(e){this.getPointers(e),this._fire("io-pointer-end",e,this.pointers,_mousedownPath),window.removeEventListener("mousemove",this._onMousemove),window.removeEventListener("mouseup",this._onMouseup),window.removeEventListener("blur",this._onMouseup),_clickmask.parentNode===document.body&&(document.body.removeChild(_clickmask),_clickmask.style.setProperty("cursor",null))}_onMousehover(e){this.getPointers(e),this._fire("io-pointer-hover",e,this.pointers)}_onTouchstart(e){this.getPointers(e,!0),this._fire("io-pointer-hover",e,this.pointers),this._fire("io-pointer-start",e,this.pointers),this.addEventListener("touchmove",this._onTouchmove),this.addEventListener("touchend",this._onTouchend)}_onTouchmove(e){this.getPointers(e),this._fire("io-pointer-move",e,this.pointers)}_onTouchend(e){this.removeEventListener("touchmove",this._onTouchmove),this.removeEventListener("touchend",this._onTouchend),this._fire("io-pointer-end",e,this.pointers)}_fire(e,t,s,i){i=i||t.composedPath(),this.dispatchEvent(e,{event:t,pointer:s,path:i},!1)}});class IoInteractive extends(IoInteractiveMixin(IoElement)){}IoInteractive.Register();class IoNode extends(IoCoreMixin(Object)){connect(){this.connectedCallback()}disconnect(){this.disconnectedCallback()}dispose(){delete this.parent,this.children.lenght=0;for(let e in this.__listeners)this.__listeners[e].lenght=0;for(let e in this.__props)delete this.__props[e]}}IoNode.Register=function(){IoCoreMixin.Register.call(this)},IoNode.Register();class IoButton extends IoElement{static get style(){return html`<style>:host {cursor: pointer;white-space: nowrap;-webkit-tap-highlight-color: transparent;}:host:hover {background: rgba(0,0,0,0.2);}:host[pressed] {background: rgba(255,255,255,0.5);}</style>`}static get properties(){return{value:void 0,label:"Button",pressed:{type:Boolean,reflect:!0},action:Function,tabindex:0}}static get listeners(){return{keydown:"_onDown",mousedown:"_onDown",touchstart:"_onDown"}}_onDown(e){e.stopPropagation(),13!==e.which&&32!==e.which&&"keydown"===e.type||(e.preventDefault(),this.pressed=!0,document.addEventListener("mouseup",this._onUp),document.addEventListener("touchend",this._onUp),this.addEventListener("keyup",this._onAction),this.addEventListener("mouseup",this._onAction),this.addEventListener("touchend",this._onAction),this.addEventListener("mouseleave",this._onLeave))}_onUp(e){e.stopPropagation(),this.pressed=!1,document.removeEventListener("mouseup",this._onUp),document.removeEventListener("touchend",this._onUp),this.removeEventListener("keyup",this._onAction),this.removeEventListener("mouseup",this._onAction),this.removeEventListener("touchend",this._onAction),this.removeEventListener("mouseleave",this._onLeave)}_onAction(e){e.stopPropagation(),13!==e.which&&32!==e.which&&"keyup"===e.type||(e.preventDefault(),this.pressed&&this.action&&this.action(this.value),this.pressed=!1,this.dispatchEvent("io-button-clicked",{value:this.value,action:this.action})),this._onUp(e)}_onLeave(){this.pressed=!1}changed(){this.innerText=this.label}}IoButton.Register();class IoBoolean extends IoButton{static get properties(){return{value:{type:Boolean,reflect:!0},true:"true",false:"false"}}constructor(e){super(e),this.action=this.toggle}toggle(){this.set("value",!this.value)}changed(){this.innerText=this.value?this.true:this.false}}IoBoolean.Register();const selection=window.getSelection(),range=document.createRange();class IoNumber extends IoElement{static get style(){return html`<style>:host {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}:host:focus {overflow: hidden;text-overflow: clip;}</style>`}static get properties(){return{value:Number,conversion:1,step:.001,min:-1/0,max:1/0,strict:!0,tabindex:0,contenteditable:!0}}static get listeners(){return{focus:"_onFocus"}}constructor(e){super(e),this.setAttribute("spellcheck","false")}_onFocus(){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown),this._select()}_onBlur(){this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this.setFromText(this.innerText),this.scrollTop=0,this.scrollLeft=0}_onKeydown(e){13==e.which&&(e.preventDefault(),this.setFromText(this.innerText))}_select(){range.selectNodeContents(this),selection.removeAllRanges(),selection.addRange(range)}setFromText(e){let t=Math.round(Number(e)/this.step)*this.step/this.conversion;this.strict&&(t=Math.min(this.max,Math.max(this.min,t))),isNaN(t)||this.set("value",t)}changed(){let e=this.value;"number"!=typeof e||isNaN(e)?this.innerText="NaN":(e=(e*=this.conversion).toFixed(-Math.round(Math.log(this.step)/Math.LN10)),this.innerText=String(e))}}IoNumber.Register();class IoObjectGroup extends IoElement{static get style(){return html`<style>:host {display: flex;flex-direction: column;flex: 0 0;line-height: 1em;}:host > div.io-object-group {font-weight: bold;}:host > div.io-object-prop {display: flex !important;flex-direction: row;}:host > div > span {padding: 0 0.2em 0 0.5em;flex: 0 0 auto;}:host > div > io-number {color: rgb(28, 0, 207);}:host > div > io-string {color: rgb(196, 26, 22);}:host > div > io-boolean {color: rgb(170, 13, 145);}:host > div > io-option {color: rgb(32,135,0);}</style>`}static get properties(){return{value:Object,config:Object,props:Array,expanded:Boolean,label:String,_config:Object}}connectedCallback(){super.connectedCallback(),window.addEventListener("io-object-mutated",this._onIoObjectMutated)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("io-object-mutated",this._onIoObjectMutated)}_onIoObjectMutated(e){let t=e.detail.key;if(e.detail.object===this.value)if(t&&this.$[t])this.$[t].__props.value.value=this.value[t],this.$[t].changed();else if(!t||"*"===t)for(let e in this.$)this.$[e].__props.value.value=this.value[e],this.$[e].changed()}_onValueSet(e){const t=e.composedPath();if(t[0]===this)return;if(e.detail.object)return;e.stopPropagation();let s=t[0].id;if(null!==s){this.value[s]=e.detail.value;let t=Object.assign({object:this.value,key:s},e.detail);this.dispatchEvent("io-object-mutated",t,!1,window),this.dispatchEvent("value-set",t,!1)}}changed(){const e=this.config,t=this.label||this.value.constructor.name,s=[["io-boolean",{true:"▾"+t,false:"▸"+t,value:this.bind("expanded")}]];if(this.expanded)for(let t in e)if((!this.props.length||-1!==this.props.indexOf(t))&&e[t]){const i=e[t][0],o=e[t][1],n={id:t,value:this.value[t],"on-value-set":this._onValueSet};s.push(["div",{className:"io-object-prop"},[["span",e.label||t+":"],[i,Object.assign(n,o)]]])}this.template(s)}}IoObjectGroup.Register();const __configsMap=new WeakMap;class IoObject extends IoElement{static get properties(){return{value:Object,label:String,expanded:Boolean,props:Array,config:Object,_config:Object}}valueChanged(){__configsMap.has(this.value)?this._config=__configsMap.get(this.value):(this._config=this.__proto__.__configs.getConfig(this.value,this.config),__configsMap.set(this.value,this._config))}configChanged(){this._config=this.__proto__.__configs.getConfig(this.value,this.config)}changed(){this.template([["io-object-group",{value:this.value,label:this.label||this.value.constructor.name,expanded:this.bind("expanded"),props:this.props.length?this.props:Object.keys(this._config),config:this._config}]])}static get config(){return{Object:{"type:string":["io-string",{}],"type:number":["io-number",{step:.01}],"type:boolean":["io-boolean",{}],"type:object":["io-object",{}],"value:null":["io-string",{}],"value:undefined":["io-string",{}]},Array:{"type:number":["io-number",{step:.1}]}}}}class Config{constructor(e){for(let t=0;t<e.length;t++){const s=e[t].constructor.config||{};for(let e in s)this[e]=this[e]||{},this.extend(this[e],s[e])}}extend(e,t){for(let s in t)e[s]=e[s]||[],e[s]=[e[s][0]||t[s][0],Object.assign(e[s][1]||{},t[s][1]||{})]}getConfig(e,t={}){const s=Object.keys(e),i=[];let o=e.__proto__;for(;o;)s.push(...Object.keys(o)),i.push(o.constructor.name),o=o.__proto__;const n={};for(let e=i.length;e--;)this.extend(n,this[i[e]]);this.extend(n,t);const r={};for(let t=0;t<s.length;t++){const i=s[t],o=e[i],h=typeof o,l="type:"+h,c="constructor:"+(o&&o.constructor?o.constructor.name:"null"),p=i,a="value:"+String(o);"function"!=h&&(r[i]={},n[l]&&(r[i]=n[l]),n[c]&&(r[i]=n[c]),n[p]&&(r[i]=n[p]),n[a]&&(r[i]=n[a]))}return r}}IoObject.Register=function(){IoElement.Register.call(this),Object.defineProperty(this.prototype,"__configs",{value:new Config(this.prototype.__prototypes)})},IoObject.Register();const selection$1=window.getSelection(),range$1=document.createRange();class IoString extends IoElement{static get style(){return html`<style>:host {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}:host:focus {overflow: hidden;text-overflow: clip;}</style>`}static get properties(){return{value:String,tabindex:0,contenteditable:!0}}static get listeners(){return{focus:"_onFocus"}}_onFocus(){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown),this._select()}_onBlur(){this.set("value",this.innerText),this.scrollTop=0,this.scrollLeft=0,this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown)}_onKeydown(e){13==e.which&&(e.preventDefault(),this.set("value",this.innerText))}_select(){range$1.selectNodeContents(this),selection$1.removeAllRanges(),selection$1.addRange(range$1)}valueChanged(){this.innerText=String(this.value).replace(new RegExp(" ","g")," ")}}IoString.Register();export{IoCoreMixin,IoElement,html,IoLite,IoLiteMixin,IoInteractiveMixin,IoInteractive,IoNode,IoButton,IoBoolean,IoNumber,IoObject,IoObjectGroup,IoString};