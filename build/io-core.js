import{IoNode,IoElement,Binding}from"./io.js";class EmulatedLocalStorage{get permited(){try{return self.localStorage.getItem("io-storage-user-permitted")}catch(t){console.warn("IoStorage: Cannot access localStorage. Check browser privacy settings!")}}set permited(t){try{if(self.localStorage.setItem("io-storage-user-permitted",t),"true"===self.localStorage.getItem("io-storage-user-permitted")){for(let t in this.store)self.localStorage.setItem(t,this.store[t]),delete this.store[t];console.log("IoStorage: Saved localStorage state.")}}catch(t){console.warn("IoStorage: Cannot access localStorage. Check browser privacy settings!")}}constructor(){Object.defineProperty(this,"store",{value:{},writable:!0}),Object.defineProperty(this,"warned",{value:!1,writable:!0})}setItem(t,e){"true"===this.permited?self.localStorage.setItem(t,e):(this.store[t]="object"==typeof e?JSON.stringify(e):String(e),this.warned||("false"===this.permited?console.warn("IoStorage: localStorage permission denied by user."):console.warn("IoStorage: localStorage pending permission by user."),this.warned=!0),"io-storage-user-permitted"===t&&(this.permited=this.store[t]))}getItem(t){return"true"===this.permited?self.localStorage.getItem(t):this.store[t]}removeItem(t){if("true"===this.permited)return self.localStorage.removeItem(t);delete this.store[t]}clear(){if("true"===this.permited)return self.localStorage.clear();this.store={}}}const localStorage=new EmulatedLocalStorage,nodes={};let hashes={};const parseHashes=function(){return self.location.hash.substr(1).split("&").reduce(function(t,e){const o=e.split("=");return t[o[0]]=o[1],t},{})},getHashes=function(){hashes=self.location.hash.substr(1).split("&").reduce(function(t,e){const o=e.split("=");return t[o[0]]=o[1],t},{});for(let t in hashes)if(nodes[t]&&""!==nodes[t]){const e=hashes[t].replace(/%20/g," ");isNaN(e)?nodes[t].value="true"===e||"false"===e?JSON.parse(e):e:nodes[t].value=JSON.parse(e)}for(let t in nodes)"hash"!==nodes[t].storage||hashes[t]||(nodes[t].value=nodes[t].default)},setHashes=function(t){let e="";for(let o in nodes)"hash"!==nodes[o].storage&&!t||void 0===nodes[o].value||""===nodes[o].value||nodes[o].value===nodes[o].default||("string"==typeof nodes[o].value?e+=o+"="+nodes[o].value+"&":e+=o+"="+JSON.stringify(nodes[o].value)+"&");for(let t in hashes)t&&!nodes[t]&&(e+=t+"="+hashes[t]+"&");e=e.slice(0,-1),self.location.hash=e,self.location.hash||history.replaceState({},document.title,self.location.pathname+self.location.search)};self.addEventListener("hashchange",getHashes,!1),getHashes();class IoStorage extends IoNode{static get Properties(){return{key:String,value:void 0,default:void 0,storage:void 0}}constructor(t){super(Object.assign({default:t.value},t)),t.key&&(nodes[t.key]=nodes[t.key]||this),this.binding=this.bind("value"),this.getStorageValue(),this.connect(window)}getStorageValue(){switch(this.storage){case"hash":if(void 0!==hashes[this.key]){const t=hashes[this.key].replace(/%20/g," ");try{this.value=JSON.parse(t)}catch(e){this.value=t}}else this.value=this.default;break;case"local":{const t="/"!==self.location.pathname?self.location.pathname+this.key:this.key,e=localStorage.getItem(t);this.value=null!=e?JSON.parse(e):this.default;break}default:this.value=this.default}}valueChanged(){switch(this.storage){case"hash":setHashes();break;case"local":{const t="/"!==self.location.pathname?self.location.pathname+this.key:this.key;null===this.value||void 0===this.value?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(this.value));break}}}}IoStorage.Register();const IoStorageFactory=function(t){return t&&"string"==typeof t&&(t={key:t}),t&&t.key&&nodes[t.key]?(t.storage&&(nodes[t.key].storage=t.storage),void 0!==t.value&&(nodes[t.key].default=t.value),nodes[t.key].binding):new IoStorage(t).binding};Object.defineProperty(IoStorageFactory,"permitted",{get:()=>localStorage.permited,set:t=>{localStorage.permited=t}});const isDarkMode=!!window.matchMedia("(prefers-color-scheme: dark)").matches,themeSizes={cssSpacing:3,cssBorderRadius:3,cssBorderWidth:1,cssStrokeWidth:1,cssLineHeight:20,cssItemHeight:28,cssFontSize:13},themeDB={light:Object.assign({cssBackgroundColor:[.95,.95,.95,1],cssBackgroundColorLight:[1,1,1,1],cssBackgroundColorDark:[.84,.84,.84,1],cssBackgroundColorField:[.92,.92,.92,1],cssColor:[.16,.16,.16,1],cssColorError:[.91,.5,.5,1],cssColorLink:[.2,.75,.2,1],cssColorFocus:[.3,.6,1,1],cssColorField:[0,0,0,1],cssColorNumber:[.12,.64,1,1],cssColorString:[.95,.25,.1,1],cssColorBoolean:[.82,.35,.75,1],cssColorBorder:[.7,.7,.7,1],cssColorBorderLight:[1,1,1,1],cssColorBorderDark:[.6,.6,.6,1],cssColorGradientStart:[.9,.9,.9,1],cssColorGradientEnd:[.75,.75,.75,1],cssColorShadow:[0,0,0,.2]},themeSizes),dark:Object.assign({cssBackgroundColor:[.164,.164,.164,1],cssBackgroundColorLight:[.22,.22,.22,1],cssBackgroundColorDark:[.25,.25,.25,1],cssBackgroundColorField:[.137,.137,.137,1],cssColor:[.823,.823,.823,1],cssColorError:[1,.376,.062,1],cssColorLink:[.75,.9,.59,1],cssColorFocus:[.3,.82,1.4,1],cssColorField:[.75,.75,.75,1],cssColorNumber:[.125,.64,1,1],cssColorString:[.94,.25,.086,1],cssColorBoolean:[.82,.35,.75,1],cssColorBorder:[.3,.3,.3,1],cssColorBorderLight:[.4,.4,.4,1],cssColorBorderDark:[0,0,0,1],cssColorGradientStart:[1,1,1,.1],cssColorGradientEnd:[0,0,0,.2],cssColorShadow:[0,0,0,.2]},themeSizes)},theme=IoStorageFactory({value:isDarkMode?"dark":"light",storage:"local",key:"theme"}),vars=themeDB[theme.value]||themeDB.light;class IoTheme extends IoElement{static get Style(){return"\n\t\t--io-item: {\n\t\t\talign-self: flex-start;\n\t\t\tdisplay: inline-block;\n\t\t\tcursor: pointer;\n\t\t\tuser-select: none;\n\t\t\t-webkit-tap-highlight-color: transparent;\n\t\t\t-webkit-user-select: none;\n\t\t\t-webkit-touch-callout: none;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tflex-wrap: nowrap;\n\t\t\twhite-space: nowrap;\n\t\t\tbox-sizing: border-box;\n\t\t\tline-height: var(--io-line-height);\n\t\t\theight: var(--io-item-height);\n\t\t\tfont-size: var(--io-font-size);\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: transparent;\n\t\t\tcolor: var(--io-color);\n\t\t\tbackground-color: transparent;\n\t\t\tbackground-image: none;\n\t\t\tpadding: var(--io-spacing);\n\t\t\ttransition: background-color 0.25s;\n\t\t}\n\t\t--io-panel: {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t\tborder-radius: calc(var(--io-border-radius) + var(--io-spacing));\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-outset);\n\t\t\tcolor: var(--io-color-field);\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tpadding: var(--io-spacing);\n\t\t}\n\t\t--io-content: {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t\tflex: 1 1 auto;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: auto;\n\t\t\t-webkit-overflow-scrolling: touch;\n\t\t\t-webkit-tap-highlight-color: transparent;\n\t\t\tcolor: var(--io-color);\n\t\t\tbackground-color: var(--io-background-color);\n\t\t}\n\t\t--io-row: {\n\t\t\tdisplay: flex;\n\t\t\tflex: 1 1;\n\t\t\tflex-direction: row;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t--io-column: {\n\t\t\tdisplay: flex;\n\t\t\tflex: 1 1;\n\t\t\tflex-direction: column;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t--io-table2: {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t\tgrid-gap: var(--io-spacing);\n\t\t}\n\t\t--io-table3: {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(3, 1fr);\n\t\t\tgrid-gap: var(--io-spacing);\n\t\t}\n\t\t--io-table4: {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(4, 1fr);\n\t\t\tgrid-gap: var(--io-spacing);\n\t\t}\n\t\t--io-table5: {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template-columns: repeat(5, 1fr);\n\t\t\tgrid-gap: var(--io-spacing);\n\t\t}\n\t\t"}static get Properties(){return{theme:theme,cssSpacing:vars.cssSpacing,cssBorderRadius:vars.cssBorderRadius,cssBorderWidth:vars.cssBorderWidth,cssStrokeWidth:vars.cssStrokeWidth,cssLineHeight:vars.cssLineHeight,cssItemHeight:vars.cssItemHeight,cssFontSize:vars.cssFontSize,cssBackgroundColor:{value:vars.cssBackgroundColor,observe:!0},cssBackgroundColorLight:{value:vars.cssBackgroundColorLight,observe:!0},cssBackgroundColorDark:{value:vars.cssBackgroundColorDark,observe:!0},cssBackgroundColorField:{value:vars.cssBackgroundColorField,observe:!0},cssColor:{value:vars.cssColor,observe:!0},cssColorError:{value:vars.cssColorError,observe:!0},cssColorLink:{value:vars.cssColorLink,observe:!0},cssColorFocus:{value:vars.cssColorFocus,observe:!0},cssColorField:{value:vars.cssColorField,observe:!0},cssColorNumber:{value:vars.cssColorNumber,observe:!0},cssColorString:{value:vars.cssColorString,observe:!0},cssColorBoolean:{value:vars.cssColorBoolean,observe:!0},cssColorBorder:{value:vars.cssColorBorder,observe:!0},cssColorBorderLight:{value:vars.cssColorBorderLight,observe:!0},cssColorBorderDark:{value:vars.cssColorBorderDark,observe:!0},cssColorGradientStart:{value:vars.cssColorGradientStart,observe:!0},cssColorGradientEnd:{value:vars.cssColorGradientEnd,observe:!0},cssColorShadow:{value:vars.cssColorShadow,observe:!0},lazy:!0}}constructor(t){super(t),this.variablesElement=document.createElement("style"),this.variablesElement.setAttribute("id","io-theme-variables"),document.head.appendChild(this.variablesElement)}_toCss(t){const e=Math.floor(255*t[0]),o=Math.floor(255*t[1]),n=Math.floor(255*t[2]);return void 0!==t[3]?`rgba(${e}, ${o}, ${n}, ${t[3]})`:`rgb(${e}, ${o}, ${n})`}themeChanged(){const t=themeDB[this.theme]||themeDB.light;this.setProperties({cssSpacing:t.cssSpacing,cssBorderRadius:t.cssBorderRadius,cssBorderWidth:t.cssBorderWidth,cssStrokeWidth:t.cssStrokeWidth,cssLineHeight:t.cssLineHeight,cssItemHeight:t.cssItemHeight,cssFontSize:t.cssFontSize,cssBackgroundColor:t.cssBackgroundColor,cssBackgroundColorLight:t.cssBackgroundColorLight,cssBackgroundColorDark:t.cssBackgroundColorDark,cssBackgroundColorField:t.cssBackgroundColorField,cssColor:t.cssColor,cssColorError:t.cssColorError,cssColorLink:t.cssColorLink,cssColorFocus:t.cssColorFocus,cssColorField:t.cssColorField,cssColorNumber:t.cssColorNumber,cssColorString:t.cssColorString,cssColorBoolean:t.cssColorBoolean,cssColorBorder:t.cssColorBorder,cssColorBorderLight:t.cssColorBorderLight,cssColorBorderDark:t.cssColorBorderDark,cssColorGradientStart:t.cssColorGradientStart,cssColorGradientEnd:t.cssColorGradientEnd,cssColorShadow:t.cssColorShadow})}changed(){this.__properties.cssItemHeight.value=this.cssLineHeight+2*(this.cssSpacing+this.cssBorderWidth),this.variablesElement.innerHTML=`\n\t\t\tbody {\n\t\t\t\t--io-spacing: ${this.cssSpacing}px;\n\t\t\t\t--io-border-radius: ${this.cssBorderRadius}px;\n\t\t\t\t--io-border-width: ${this.cssBorderWidth}px;\n\t\t\t\t--io-stroke-width: ${this.cssStrokeWidth}px;\n\t\t\t\t--io-line-height: ${this.cssLineHeight}px;\n\t\t\t\t--io-item-height: ${this.cssItemHeight}px;\n\t\t\t\t--io-font-size: ${this.cssFontSize}px;\n\n\t\t\t\t--io-background-color: ${this._toCss(this.cssBackgroundColor)};\n\t\t\t\t--io-background-color-light: ${this._toCss(this.cssBackgroundColorLight)};\n\t\t\t\t--io-background-color-dark: ${this._toCss(this.cssBackgroundColorDark)};\n\t\t\t\t--io-background-color-field: ${this._toCss(this.cssBackgroundColorField)};\n\n\t\t\t\t--io-color: ${this._toCss(this.cssColor)};\n\t\t\t\t--io-color-error: ${this._toCss(this.cssColorError)};\n\t\t\t\t--io-color-link: ${this._toCss(this.cssColorLink)};\n\t\t\t\t--io-color-focus: ${this._toCss(this.cssColorFocus)};\n\t\t\t\t--io-color-field: ${this._toCss(this.cssColorField)};\n\t\t\t\t--io-color-number: ${this._toCss(this.cssColorNumber)};\n\t\t\t\t--io-color-string: ${this._toCss(this.cssColorString)};\n\t\t\t\t--io-color-boolean: ${this._toCss(this.cssColorBoolean)};\n\t\t\t\t--io-color-border: ${this._toCss(this.cssColorBorder)};\n\t\t\t\t--io-color-border-light: ${this._toCss(this.cssColorBorderLight)};\n\t\t\t\t--io-color-border-dark: ${this._toCss(this.cssColorBorderDark)};\n\t\t\t\t--io-color-gradient-start: ${this._toCss(this.cssColorGradientStart)};\n\t\t\t\t--io-color-gradient-end: ${this._toCss(this.cssColorGradientEnd)};\n\t\t\t\t--io-color-shadow: ${this._toCss(this.cssColorShadow)};\n\n\n\t\t\t\t--io-border: var(--io-border-width) solid var(--io-color-border);\n\t\t\t\t--io-border-error: var(--io-border-width) solid var(--io-color-error);\n\t\t\t\t--io-color-border-inset: var(--io-color-border-dark) var(--io-color-border-light) var(--io-color-border-light) var(--io-color-border-dark);\n\t\t\t\t--io-color-border-outset: var(--io-color-border-light) var(--io-color-border-dark) var(--io-color-border-dark) var(--io-color-border-light);\n\n\t\t\t\t--io-gradient-button: linear-gradient(180deg, var(--io-color-gradient-start), var(--io-color-gradient-end) 100%);\n\t\t\t\t--io-gradient-error: repeating-linear-gradient(135deg, transparent, var(--io-color-error) 1px, var(--io-color-error) 4px, transparent 6px);\n\n\t\t\t\t--io-shadow: 2px 2px 6px var(--io-color-shadow),\n\t\t\t\t\t\t\t\t\t\t 1px 1px 1px var(--io-color-shadow);\n\t\t\t\t--io-shadow-inset: 1px 1px 2px inset var(--io-color-shadow);\n\t\t\t\t--io-shadow-outset: -1px -1px 2px inset var(--io-color-shadow);\n\t\t\t}\n\t\t`,this.dispatchEvent("object-mutated",{object:this},!1,window)}}IoTheme.Register();const IoThemeSingleton=new IoTheme;IoThemeSingleton.connect();class IoItem extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\t@apply --io-item;\n\t\t}\n\t\t:host[pressed] {\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tbox-shadow: var(--io-shadow-inset);\n\t\t}\n\t\t:host[hidden] {\n\t\t\tdisplay: none;\n\t\t}\n\t\t:host[selected] {\n\t\t\tcolor: var(--io-color-link);\n\t\t\tbackground-color: var(--io-background-color-light);\n\t\t}\n\t\t:host[aria-invalid] {\n\t\t\tborder: var(--io-border-error);\n\t\t\tbackground-image: var(--io-gradient-error);\n\t\t}\n\t\t:host:focus {\n\t\t\tz-index: 200;\n\t\t\tposition: relative;\n\t\t\ttext-overflow: inherit;\n\t\t\tborder-color: var(--io-color-focus);\n\t\t\toutline-color: var(--io-color-focus);\n\t\t}\n\t\t"}static get Properties(){return{value:void 0,pressed:{type:Boolean,reflect:!0},hidden:{type:Boolean,reflect:!0},selected:{type:Boolean,reflect:!0},tabindex:0}}static get Listeners(){return{focus:"_onFocus",pointerdown:"_onPointerdown",click:"_onClick"}}constructor(t){super(t),Object.defineProperty(this,"_textNode",{value:document.createTextNode(""),writable:!0}),this.appendChild(this._textNode)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this.removeEventListener("keyup",this._onKeydown),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup)}_onFocus(){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown),this.addEventListener("keyup",this._onKeyup)}_onBlur(){this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this.removeEventListener("keyup",this._onKeyup)}_onPointerdown(t){t.preventDefault(),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerleave",this._onPointerleave),this.addEventListener("pointerup",this._onPointerup),this.pressed=!0}_onPointermove(){}_onPointerleave(){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup),this.pressed=!1}_onPointerup(){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerleave",this._onPointerleave),this.removeEventListener("pointerup",this._onPointerup),this.pressed=!1,this.focus()}_onClick(){this.dispatchEvent("item-clicked",{value:this.value,label:this.label},!0)}_onKeydown(t){"Enter"===t.key||" "===t.key?(this.pressed=!0,t.preventDefault(),this._onClick(t)):"ArrowLeft"===t.key?(t.preventDefault(),this.focusTo("left")):"ArrowUp"===t.key?(t.preventDefault(),this.focusTo("up")):"ArrowRight"===t.key?(t.preventDefault(),this.focusTo("right")):"ArrowDown"===t.key&&(t.preventDefault(),this.focusTo("down"))}_onKeyup(){this.pressed=!1}changed(){if(this.label)this.textNode=this.label,this.title=this.label;else{let t;t=this.value&&"object"==typeof this.value?`${this.value.constructor.name}`+(this.value instanceof Array?`(${this.value.length})`:""):String(this.value),this.textNode=t,this.title=t}this.setAria()}setAria(){this.label?this.setAttribute("aria-label",this.label):this.setAttribute("aria-label",!1)}getCaretPosition(){let t=0;const e=window.getSelection();if(e.rangeCount){const o=e.getRangeAt(0),n=o.toString().length,i=o.cloneRange();i.selectNodeContents(this),i.setEnd(o.endContainer,o.endOffset),t=i.toString().length-n}return t}setCaretPosition(t){if(!t)return;const e=window.getSelection(),o=document.createRange();o.setStart(this.firstChild,t),o.collapse(!0),e.removeAllRanges(),e.addRange(o)}}IoItem.Register();class IoContent extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\t@apply --io-content;\n\t\t}\n\t\t:host:not([expanded]) {\n\t\t\tdisplay: none;\n\t\t}\n\t\t"}static get Properties(){return{elements:{type:Array,observe:!0},expanded:{type:Boolean,reflect:1},cache:Boolean}}changed(){this.expanded?this.template([this.elements]):this.cache||this.template([null])}}IoContent.Register();const canvas=document.createElement("canvas"),gl=canvas.getContext("webgl",{antialias:!1,premultipliedAlpha:!0});gl.imageSmoothingEnabled=!1,gl.getExtension("OES_standard_derivatives"),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.disable(gl.DEPTH_TEST);const positionBuff=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,positionBuff),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,1,0,-1,-1,0,1,-1,0,1,1,0]),gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null);const uvBuff=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,uvBuff),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),gl.STATIC_DRAW),gl.bindBuffer(gl.ARRAY_BUFFER,null);const indexBuff=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuff),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([3,2,1,3,1,0]),gl.STATIC_DRAW),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,null),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuff);const shadersCache=new WeakMap;let currentProgram;class IoGl extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tposition: relative;\n\t\t\toverflow: hidden !important;\n\t\t\t-webkit-tap-highlight-color: transparent;\n\t\t\tuser-select: none;\n\t\t\tbox-sizing: border-box;\n\t\t}\n\t\t:host > .io-gl-canvas {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tborder-radius: calc(var(--io-border-radius) - var(--io-border-width));\n\t\t\tpointer-events: none;\n\t\t\t/* image-rendering: pixelated; */\n\t\t}\n\t\t"}static get Properties(){return{size:[0,0],color:{value:[1,1,1,1],observe:!0},pxRatio:1,css:{type:Object,observe:!0}}}static get Vert(){return"\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position, 1.0);\n\t\t\t}\n\n"}static get GlUtils(){return"\n\t\t#ifndef saturate\n\t\t\t#define saturate(v) clamp(v, 0., 1.)\n\t\t#endif\n\n\t\tvec2 translate(vec2 samplePosition, vec2 xy){\n\t\t\treturn samplePosition - vec2(xy.x, xy.y);\n\t\t}\n\t\tvec2 translate(vec2 samplePosition, float x, float y){\n\t\t\treturn samplePosition - vec2(x, y);\n\t\t}\n\t\tfloat circle(vec2 samplePosition, float radius){\n\t\t\treturn saturate((length(samplePosition) - radius) * uPxRatio);\n\t\t}\n\t\tfloat rectangle(vec2 samplePosition, vec2 halfSize){\n\t\t\tvec2 edgeDistance = abs(samplePosition) - halfSize;\n\t\t\tfloat outside = length(max(edgeDistance, 0.));\n\t\t\tfloat inside = min(max(edgeDistance.x, edgeDistance.y), 0.);\n\t\t\treturn saturate((outside + inside) * uPxRatio); // TODO: check\n\t\t}\n\t\tfloat grid(vec2 samplePosition, float gridWidth, float gridHeight, float lineWidth) {\n\t\t\tvec2 sp = samplePosition / vec2(gridWidth, gridHeight);\n\t\t\tfloat linex = abs(fract(sp.x - 0.5) - 0.5) * 2.0 / abs(max(dFdx(sp.x), dFdy(sp.x))) - lineWidth;\n\t\t\tfloat liney = abs(fract(sp.y - 0.5) - 0.5) * 2.0 / abs(max(dFdy(sp.y), dFdx(sp.y))) - lineWidth;\n\t\t\treturn saturate(min(linex, liney));\n\t\t}\n\t\tfloat checker(vec2 samplePosition, float size) {\n\t\t\tvec2 checkerPos = floor(samplePosition / size);\n\t\t\tfloat checkerMask = mod(checkerPos.x + mod(checkerPos.y, 2.0), 2.0);\n\t\t\treturn checkerMask;\n\t\t}\n\n"}static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 position = uSize * vUv;\n\t\t\t\tfloat gridWidth = 8. * uPxRatio;\n\t\t\t\tfloat lineWidth = 1. * uPxRatio;\n\t\t\t\tfloat gridShape = grid(position, gridWidth, gridWidth, lineWidth);\n\t\t\t\tgl_FragColor = mix(vec4(vUv, 0.0, 1.0), uColor, gridShape);\n\t\t\t}\n\n"}initPropertyUniform(t,e){if(e.notify)switch(e.type){case Boolean:return"uniform int "+t+";\n";case Number:return"uniform float "+t+";\n";case Array:return this._vecLengths[t]=e.value.length,"uniform vec"+e.value.length+" "+t+";\n"}return""}initShader(){let t="\n\t\t#extension GL_OES_standard_derivatives : enable\n\t\tprecision highp float;\n";for(let e in this.css.__properties){const o=this.css.__protoProperties[e];t+=this.initPropertyUniform(e,o)}t+="\n";for(let e in this.__properties){const o="u"+e.charAt(0).toUpperCase()+e.slice(1),n=this.__protoProperties[e];t+=this.initPropertyUniform(o,n)}for(let e=this.__protochain.length;e--;){const o=this.__protochain[e].constructor,n=Object.getOwnPropertyDescriptor(o,"GlUtils");n&&n.get&&(t+=o.GlUtils)}const e=gl.createShader(gl.VERTEX_SHADER);if(gl.shaderSource(e,this.constructor.Vert),gl.compileShader(e),!gl.getShaderParameter(e,gl.COMPILE_STATUS)){let t=gl.getShaderInfoLog(e);console.error("IoGl [Vertex Shader] "+this.localName+" error:"),console.warn(t)}const o=gl.createShader(gl.FRAGMENT_SHADER);if(gl.shaderSource(o,t+this.constructor.Frag),gl.compileShader(o),!gl.getShaderParameter(o,gl.COMPILE_STATUS)){let t=gl.getShaderInfoLog(o);console.error("IoGl [Frament Shader] "+this.localName+" error:"),console.warn(t)}const n=gl.createProgram();return gl.attachShader(n,e),gl.attachShader(n,o),n}constructor(t){super(t),this.css=IoThemeSingleton,this._vecLengths={};for(let t in this.css.__properties){const e=this.css.__protoProperties[t];e.notify&&e.type===Array&&(this._vecLengths[t]=e.value.length)}for(let t in this.__properties){const e="u"+t.charAt(0).toUpperCase()+t.slice(1),o=this.__protoProperties[t];o.notify&&o.type===Array&&(this._vecLengths[e]=o.value.length)}shadersCache.has(this.constructor)?this._shader=shadersCache.get(this.constructor):(this._shader=this.initShader(),shadersCache.set(this.constructor,this._shader)),gl.linkProgram(this._shader);const e=gl.getAttribLocation(this._shader,"position");gl.bindBuffer(gl.ARRAY_BUFFER,positionBuff),gl.vertexAttribPointer(e,3,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(e);const o=gl.getAttribLocation(this._shader,"uv");gl.bindBuffer(gl.ARRAY_BUFFER,uvBuff),gl.vertexAttribPointer(o,2,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(o),this.render=this.render.bind(this),this.template([["canvas",{id:"canvas",class:"io-gl-canvas"}]]),this.$.canvas.ctx=this.$.canvas.getContext("2d"),this.updateCssUniforms()}onResized(){const t=window.devicePixelRatio,e=this.getBoundingClientRect(),o=window.getComputedStyle(this),n=parseInt(o.borderRightWidth)+parseInt(o.borderLeftWidth),i=parseInt(o.borderTopWidth)+parseInt(o.borderBottomWidth),s=Math.max(0,Math.floor(e.width-n)),r=Math.max(0,Math.floor(e.height-i));(s!==this.size[0]||r!==this.size[1]||t!==this.pxRatio)&&(this.$.canvas.style.width=Math.floor(s)+"px",this.$.canvas.style.height=Math.floor(r)+"px",this.$.canvas.width=Math.floor(s*t),this.$.canvas.height=Math.floor(r*t),this.setProperties({size:[s,r],pxRatio:t}))}cssMutated(){this.updateCssUniforms(),this.requestAnimationFrameOnce(this.render)}changed(){window.ResizeObserver?this.requestAnimationFrameOnce(this.render):setTimeout(()=>{this.onResized(),this.requestAnimationFrameOnce(this.render)})}render(){const t=this.size[0]*this.pxRatio,e=this.size[1]*this.pxRatio;if(t&&e){this.setShaderProgram();for(let t in this.__properties){const e="u"+t.charAt(0).toUpperCase()+t.slice(1);this.updatePropertyUniform(e,this.__properties[t])}canvas.width=t,canvas.height=e,gl.viewport(0,0,t,e),gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0),this.$.canvas.ctx.drawImage(canvas,0,0)}}setShaderProgram(){currentProgram!==this._shader&&(currentProgram=this._shader,gl.useProgram(this._shader))}updatePropertyUniform(t,e){this.setShaderProgram(),e.notify&&this.setUniform(t,e.type,e.value)}updateCssUniforms(){for(let t in this.css.__properties)this.updatePropertyUniform(t,this.css.__properties[t])}setUniform(t,e,o){const n=gl.getUniformLocation(this._shader,t);let i;switch(e){case Boolean:gl.uniform1i(n,o?1:0);break;case Number:gl.uniform1f(n,void 0!==o?o:1);break;case Array:switch(i=[0,1,2,3],o instanceof Array||"object"!=typeof o||(void 0!==o.x?i=["x","y","z","w"]:void 0!==o.r?i=["r","g","b","a"]:void 0!==o.h?i=["h","s","v","a"]:void 0!==o.c&&(i=["c","m","y","k"])),this._vecLengths[t]){case 2:if(void 0===o){gl.uniform2f(n,0,0);break}gl.uniform2f(n,void 0!==o[i[0]]?o[i[0]]:1,void 0!==o[i[1]]?o[i[1]]:1);break;case 3:if(void 0===o){gl.uniform3f(n,0,0,0);break}gl.uniform3f(n,void 0!==o[i[0]]?o[i[0]]:1,void 0!==o[i[1]]?o[i[1]]:1,void 0!==o[i[2]]?o[i[2]]:1);break;case 4:if(void 0===o){gl.uniform4f(n,0,0,0,0);break}gl.uniform4f(n,void 0!==o[i[0]]?o[i[0]]:1,void 0!==o[i[1]]?o[i[1]]:1,void 0!==o[i[2]]?o[i[2]]:1,void 0!==o[i[3]]?o[i[3]]:1)}}}}IoGl.Register();class IoButton extends IoItem{static get Style(){return"\n\t\t:host {\n\t\t\ttext-align: center;\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-outset);\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tbackground-image: var(--io-gradient-button);\n\t\t\tpadding-left: calc(2 * var(--io-spacing));\n\t\t\tpadding-right: calc(2 * var(--io-spacing));\n\t\t}\n\t\t:host[pressed] {\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t}\n\t\t"}static get Properties(){return{action:Function,value:void 0,label:"Button",role:"button"}}_onClick(){"function"==typeof this.action&&this.action(this.value)}}IoButton.Register();class IoBoolean extends IoItem{static get Properties(){return{label:"Boolean",value:{type:Boolean,reflect:1},true:"true",false:"false",role:"switch"}}_onClick(){this.toggle()}toggle(){this.set("value",!this.value)}valueChanged(){this.setAttribute("value",Boolean(this.value))}changed(){this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true"),this.setAttribute("aria-label",this.label),this.title=this.label,this.textNode=this.value?this.true:this.false}}IoBoolean.Register();const IoIconsetDB={};class IoIconset extends IoNode{registerIcons(t,e){const o=document.createElement("div");o.innerHTML=e,o.querySelectorAll("[id]").forEach(e=>{IoIconsetDB[t]=IoIconsetDB[t]||{},IoIconsetDB[t][e.id]=e.outerHTML})}getIcon(t){const e=IoIconsetDB[t.split(":")[0]];if(e){const o=t.split(":")[1];if(e[o]){return`<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet">${e[o].replace(' id="',' class="icon-id-')}</svg>`}}return'<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"></svg>'}}IoIconset.Register();const IoIconsetSingleton=new IoIconset,icons='\n<svg>\t<g id="unlink">\t\t<path d="M3.2,12c0-1.9,1.5-3.4,3.4-3.4h4.3V6.6H6.6c-3,0-5.4,2.4-5.4,5.4s2.4,5.4,5.4,5.4h4.3v-2.1H6.6C4.7,15.4,3.2,13.9,3.2,12z\t\t\t M17.4,6.6h-4.4v2.1h4.4c1.9,0,3.4,1.5,3.4,3.4s-1.5,3.4-3.4,3.4h-4.4v2.1h4.4c3,0,5.4-2.4,5.4-5.4S20.4,6.6,17.4,6.6z"/>\t</g>\t<g id="link">\t\t<path d="M3.2,12c0-1.9,1.5-3.4,3.4-3.4h4.3V6.6H6.6c-3,0-5.4,2.4-5.4,5.4s2.4,5.4,5.4,5.4h4.3v-2.1H6.6C4.7,15.4,3.2,13.9,3.2,12z\t\t\t M7.7,13.1h8.7v-2.2H7.7V13.1z M17.4,6.6h-4.4v2.1h4.4c1.9,0,3.4,1.5,3.4,3.4s-1.5,3.4-3.4,3.4h-4.4v2.1h4.4c3,0,5.4-2.4,5.4-5.4\t\t\tS20.4,6.6,17.4,6.6z"/>\t</g>\t<g id="gear">\t\t<path d="M22.7,14.9l-2.4-1.9c0-0.4,0.1-0.7,0.1-1.1s0-0.7-0.1-1.1l2.4-1.9c0.2-0.2,0.3-0.5,0.1-0.7l-2.2-3.9\t\t\tc-0.1-0.2-0.4-0.3-0.7-0.2l-2.8,1.1c-0.6-0.4-1.2-0.8-1.9-1.1l-0.4-3c0-0.3-0.3-0.5-0.5-0.5H9.8C9.5,0.8,9.3,1,9.2,1.3l-0.4,3\t\t\tC8.1,4.5,7.5,4.9,6.9,5.3L4.1,4.2c-0.2-0.1-0.5,0-0.7,0.2L1.2,8.3C1.1,8.6,1.1,8.9,1.3,9.1l2.4,1.9c0,0.4-0.1,0.7-0.1,1.1\t\t\ts0,0.7,0.1,1.1l-2.4,1.9c-0.2,0.2-0.3,0.5-0.1,0.7l2.2,3.9c0.1,0.2,0.4,0.3,0.7,0.2l2.8-1.1c0.6,0.5,1.2,0.8,1.9,1.1l0.4,3\t\t\tc0,0.3,0.3,0.5,0.6,0.5h4.5c0.3,0,0.5-0.2,0.6-0.5l0.4-3c0.7-0.3,1.3-0.6,1.9-1.1l2.8,1.1c0.2,0.1,0.5,0,0.7-0.2l2.2-3.9\t\t\tC23,15.4,22.9,15.1,22.7,14.9z M12,16.1c-2.3,0-4.2-1.9-4.2-4.2S9.7,7.8,12,7.8s4.2,1.9,4.2,4.2S14.3,16.1,12,16.1z"/>\t</g>\t<g id="io-gui-logo-io">\t\t<ellipse fill="#83A61E" cx="4.8" cy="12" rx="3.7" ry="3.7"/>\t\t<path fill="#646464" d="M16.7,18.2c-3.4,0-6.2-2.8-6.2-6.2s2.8-6.2,6.2-6.2s6.2,2.8,6.2,6.2S20.1,18.2,16.7,18.2z M16.7,8.5\t\t\tc-2,0-3.6,1.6-3.6,3.5s1.6,3.5,3.6,3.5s3.6-1.6,3.6-3.5S18.7,8.5,16.7,8.5z"/>\t</g>\t<g id="io-gui-logo">\t\t<path fill="#646464" d="M20.4,12.7c0.4-0.4,0.4-1,0-1.4l-0.7-0.7l-2.8-2.8c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l4.2,4.2\t\t\tc0.8,0.8,0.8,2,0,2.8l-4.2,4.2c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4"/>\t\t<path fill="#646464" d="M3.7,12.7c-0.4-0.4-0.4-1,0-1.4l0.7-0.7l2.8-2.8c0.4-0.4,0.4-1,0-1.4C6.9,6,6.3,6,5.9,6.4l-4.2,4.2\t\t\tc-0.8,0.8-0.8,2,0,2.8l4.2,4.2c0.4,0.4,1,0.4,1.4,0c0.4-0.4,0.4-1,0-1.4"/>\t\t<ellipse fill="#83A61E" cx="8.2" cy="12" rx="1.9" ry="1.9"/>\t\t<path fill="#646464" d="M14.2,15.1c-1.7,0-3.1-1.4-3.1-3.1s1.4-3.1,3.1-3.1s3.1,1.4,3.1,3.1S15.9,15.1,14.2,15.1z M14.2,10.2\t\t\tc-1,0-1.8,0.8-1.8,1.8s0.8,1.8,1.8,1.8S16,13,16,12S15.2,10.2,14.2,10.2z"/>\t</g>\t<g id="check">\t\t<path d="M20.4,1H3.5C2.2,1,1.1,2.1,1.1,3.4v16.9c0,1.3,1.1,2.4,2.4,2.4h16.9c1.3,0,2.4-1.1,2.4-2.4V3.4C22.8,2.1,21.7,1,20.4,1z\t\t\t M9.6,17.9l-6-6l1.7-1.7l4.3,4.3l9.1-9.1L20.4,7L9.6,17.9z"/>\t</g>\t<g id="uncheck">\t\t<path d="M20.4,3.4v16.9H3.5V3.4H20.4 M20.4,1H3.5C2.2,1,1.1,2.1,1.1,3.4v16.9c0,1.3,1.1,2.4,2.4,2.4h16.9c1.3,0,2.4-1.1,2.4-2.4\t\t\tV3.4C22.8,2.1,21.7,1,20.4,1z"/>\t</g></svg>';IoIconsetSingleton.registerIcons("icons",icons);class IoBoolicon extends IoBoolean{static get Style(){return"\n\t\t:host {\n\t\t\twidth: var(--io-item-height);\n\t\t\theight: var(--io-item-height);\n\t\t\tfill: var(--io-color, currentcolor);\n\t\t}\n\t\t:host[stroke] {\n\t\t\tstroke: var(--io-background-color, currentcolor);\n\t\t\tstroke-width: var(--io-stroke-width);\n\t\t}\n\t\t:host > svg {\n\t\t\tpointer-events: none;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t\t:host > svg > g {\n\t\t\ttransform-origin: 0px 0px;\n\t\t}\n\t\t"}static get Properties(){return{true:"icons:check",false:"icons:uncheck",stroke:{value:!0,reflect:1}}}changed(){this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true"),this.setAttribute("aria-label",this.label),this.title=this.label,this.innerHTML=IoIconsetSingleton.getIcon(this.value?this.true:this.false)}}IoBoolicon.Register();class IoSwitch extends IoBoolean{static get Style(){return"\n\t\t:host {\n\t\t\tposition: relative;\n\t\t\twidth: calc(2 * var(--io-item-height));\n\t\t}\n\t\t:host:before {\n\t\t\tdisplay: inline-block;\n\t\t\tbox-sizing: border-box;\n\t\t\tposition: absolute;\n\t\t\tcontent: '';\n\t\t\ttop: var(--io-spacing);\n\t\t\tleft: 0;\n\t\t\twidth: calc(100% - calc(2 * var(--io-border-width)));\n\t\t\theight: var(--io-line-height);\n\t\t\tborder-radius: var(--io-line-height);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tbox-shadow: var(--io-shadow-inset);\n\t\t\ttransition: background-color 0.4s;\n\t\t}\n\t\t:host:after {\n\t\t\tdisplay: inline-block;\n\t\t\tbox-sizing: border-box;\n\t\t\tposition: absolute;\n\t\t\tcontent: '';\n\t\t\ttop: calc(var(--io-border-width) + var(--io-spacing));\n\t\t\tleft: var(--io-border-width);\n\t\t\theight: calc(var(--io-line-height) - calc(2 * var(--io-border-width)));\n\t\t\twidth: calc(var(--io-line-height) - calc(2 * var(--io-border-width)));\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-outset);\n\t\t\tborder-radius: var(--io-line-height);\n\t\t\ttransition-timing-function: ease-in-out;\n\t\t\ttransition: left 0.25s;\n\t\t}\n\t\t:host[value]:after {\n\t\t\tbackground-color: rgba(80, 210, 355, 0.75);\n\t\t\tleft: calc(calc(100% - var(--io-line-height)) - var(--io-border-width));\n\t\t}\n\t\t:host:not([value]) {\n\t\t\topacity: 0.5;\n\t\t}\n\t\t:host[aria-invalid] {\n\t\t\tborder: var(--io-border-error);\n\t\t\tbackground-image: var(--io-gradient-error);\n\t\t}\n\t\t:host:hover:before,\n\t\t:host[display=\"switch\"][value]:not([aria-invalid]):before {\n\t\t\tbackground-color: var(--io-background-color);\n\t\t}\n\t\t:host:focus:before,\n\t\t:host:focus:after {\n\t\t\tborder-color: var(--io-color-focus);\n\t\t}\n\t\t:host:focus {\n\t\t\toutline-color: var(--io-color-focus);\n\t\t}\n\t\t"}changed(){this.setAttribute("aria-checked",String(!!this.value)),this.setAttribute("aria-invalid","boolean"!=typeof this.value&&"true"),this.setAttribute("aria-label",this.label),this.title=this.label}}IoSwitch.Register();class IoString extends IoItem{static get Style(){return"\n\t\t:host {\n\t\t\tcursor: text;\n\t\t\tuser-select: text;\n\t\t\t-webkit-user-select: text;\n\t\t\t-webkit-touch-callout: default;\n\t\t\tmin-width: var(--io-item-height);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tcolor: var(--io-color-field);\n\t\t\tbackground-color: var(--io-background-color-field);\n\t\t\tbox-shadow: var(--io-shadow-inset);\n\t\t}\n\t\t:host:before,\n\t\t:host:after {\n\t\t\tcontent: ' ';\n\t\t\twhite-space: pre;\n\t\t\tvisibility: hidden;\n\t\t}\n\t\t"}static get Properties(){return{live:Boolean,value:String,contenteditable:!0,role:"textbox"}}_setFromTextNode(){const t=this.textNode;"string"==typeof this.value&&t!==String(this.value)&&this.set("value",t)}_tryParseFromTextNode(){const t=this.textNode;try{const e=JSON.parse(t.replace(/[\t\n\r ]+/g," "));this.set("value",e)}catch(e){console.warn("IoString: Cannot parse value",t),console.error(e),this._setFromTextNode()}}_onBlur(t){super._onBlur(t),this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this._setFromTextNode(),this.scrollTop=0,this.scrollLeft=0}_onPointerdown(){this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup)}_onPointermove(){}_onPointerup(){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length))}_onKeyup(t){if(super._onKeyup(t),this.live){const t=this.getCaretPosition();this._setFromTextNode(),this.setCaretPosition(t)}}_onKeydown(t){const e=window.getSelection().getRangeAt(0),o=e.startOffset,n=e.endOffset,i=this.childNodes[0]?this.childNodes[0].length:0,s=e.startContainer===e.endContainer&&(e.startContainer===this.childNodes[0]||e.startContainer===this);"Enter"==t.key?(t.preventDefault(),t.shiftKey?this._tryParseFromTextNode():this._setFromTextNode()):"ArrowLeft"==t.key?(t.ctrlKey||s&&o===n&&0===o)&&(t.preventDefault(),this.focusTo("left")):"ArrowUp"==t.key?(t.ctrlKey||s&&o===n&&0===o)&&(t.preventDefault(),this.focusTo("up")):"ArrowRight"==t.key?(t.ctrlKey||s&&o===n&&o===i)&&(t.preventDefault(),this.focusTo("right")):"ArrowDown"==t.key&&(t.ctrlKey||s&&o===n&&o===i)&&(t.preventDefault(),this.focusTo("down"))}changed(){this.title=this.label,this.textNode=String(this.value).replace(new RegExp(" ","g")," "),this.setAttribute("aria-invalid","string"!=typeof this.value&&"true")}}IoString.Register();let lastFocus=null;window.addEventListener("focusin",()=>{lastFocus=document.activeElement},{capture:!1}),window.addEventListener("blur",()=>{setTimeout(()=>{document.activeElement===document.body&&(lastFocus=null)})},{capture:!0});class IoLayer extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: block;\n\t\t\tvisibility: hidden;\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tbottom: 0;\n\t\t\tright: 0;\n\t\t\tz-index: 100000;\n\t\t\tuser-select: none;\n\t\t\toverflow: hidden;\n\t\t\tpointer-events: none;\n\t\t\ttouch-action: none;\n\t\t\topacity: 0;\n\t\t\ttransition: opacity 0.25s;\n\t\t\tbackground: transparent;\n\t\t}\n\t\t:host[expanded] {\n\t\t\tpointer-events: all;\n\t\t\tvisibility: visible;\n\t\t\topacity: 1;\n\t\t\t/* background: rgba(0,0,0,0.2); */\n\t\t}\n\t\t:host > * {\n\t\t\tposition: absolute;\n\t\t\ttouch-action: none;\n\t\t}\n\t\t"}static get Properties(){return{expanded:{value:!1,reflect:1}}}static get Listeners(){return{pointerdown:"_onPointerdown",contextmenu:"_onContextmenu",focusin:"_onFocusIn",scroll:"_onScroll",wheel:"_onScroll",mousedown:"stopPropagation",mouseup:"stopPropagation",mousemove:"stopPropagation",touchstart:"stopPropagation",touchmove:"stopPropagation",touchend:"stopPropagation",keydown:"stopPropagation",keyup:"stopPropagation"}}constructor(t){super(t),Object.defineProperty(this,"x",{value:null,writable:!0}),Object.defineProperty(this,"y",{value:null,writable:!0})}stopPropagation(t){t.stopPropagation()}_onPointerdown(t){t.composedPath()[0]===this&&(this.setPointerCapture(t.pointerId),this.expanded=!1)}_onContextmenu(t){t.preventDefault()}_onFocusIn(t){t.stopPropagation()}_onScroll(t){t.composedPath()[0]===this&&(this.expanded=!1)}nudgeDown(t,e,o,n,i){return e=Math.max(0,Math.min(e,window.innerWidth-n.width)),!!(o+n.height<window.innerHeight||i)&&(t.style.left=e+"px",t.style.top=o+"px",!0)}nudgeUp(t,e,o,n,i){return e=Math.max(0,Math.min(e,window.innerWidth-n.width)),!!(o-n.height>0||i)&&(t.style.left=e+"px",t.style.top=o-n.height+"px",!0)}nudgeRight(t,e,o,n,i){return!!(e+n.width<window.innerWidth||i)&&(t.style.left=e+"px",t.style.top=Math.min(o,window.innerHeight-n.height)+"px",!0)}nudgeLeft(t,e,o,n,i){return!!(e-n.width>0||i)&&(t.style.left=e-n.width+"px",t.style.top=Math.min(o,window.innerHeight-n.height)+"px",!0)}nudgePointer(t,e,o,n){return t.style.left=Math.max(0,Math.min(e,window.innerWidth-n.width))+"px",t.style.top=Math.max(0,Math.min(o,window.innerHeight-n.height))+"px",!0}setElementPosition(t,e,o){const n=t.getBoundingClientRect(),i=o.left,s=o.top,r=o.right,a=o.bottom,l=window.innerHeight-a,h=window.innerWidth-r;switch(e){case"pointer":this.nudgePointer(t,this.x,this.y,n);break;case"top":this.nudgeUp(t,i,s,n)||this.nudgeDown(t,i,a,n)||this.nudgeUp(t,i,s,n,s>l)||this.nudgeDown(t,i,a,n,s<=l);break;case"left":this.nudgeLeft(t,i,s,n)||this.nudgeRight(t,r,s,n)||this.nudgeLeft(t,i,s,n,i>h)||this.nudgeRight(t,r,s,n,i<=h);break;case"bottom":this.nudgeDown(t,i,a,n)||this.nudgeUp(t,i,s,n)||this.nudgeDown(t,i,a,n,l>s)||this.nudgeUp(t,i,s,n,l<=s);break;case"right":default:this.nudgeRight(t,r,s,n)||this.nudgeLeft(t,i,s,n)||this.nudgeRight(t,r,s,n,h>i)||this.nudgeLeft(t,i,s,n,h<=i)}}appendChild(t){super.appendChild(t),t.addEventListener("expanded-changed",this.onChildExpanded),this.onChildExpanded()}removeChild(t){super.removeChild(t),t.removeEventListener("expanded-changed",this.onChildExpanded),this.onChildExpanded()}onChildExpanded(){this.requestAnimationFrameOnce(this.onChildExpandedDelayed)}onChildExpandedDelayed(){for(let t=this.children.length;t--;)if(this.children[t].expanded)return void(this.expanded=!0);this.expanded=!1}expandedChanged(){if(!this.expanded){this.x=null,this.y=null;for(let t=this.children.length;t--;)this.children[t].expanded=!1;lastFocus&&lastFocus.focus()}}}IoLayer.Register();const IoLayerSingleton=new IoLayer;document.body.appendChild(IoLayerSingleton);let lastFocus$1=null;window.addEventListener("focusin",()=>{lastFocus$1=document.activeElement},{capture:!1}),window.addEventListener("blur",()=>{setTimeout(()=>{document.activeElement===document.body&&(lastFocus$1=null)})},{capture:!0});class IoLadderStep extends IoItem{static get Style(){return"\n\t\t:host {\n\t\t\tpointer-events: all;\n\t\t\tdisplay: inline-block;\n\t\t\tcursor: ew-resize;\n\t\t\ttext-align: center;\n\t\t\tbackground-color: var(--io-background-color-light);\n\t\t\talign-self: stretch;\n\t\t\ttouch-action: none;\n\t\t\twidth: 5em;\n\t\t}\n\t\t"}static get Properties(){return{role:"spinbutton",type:{value:"number",reflect:1}}}_onKeydown(t){let e=0;"Escape"===t.key||" "===t.key?this.dispatchEvent("ladder-step-collapse",{},!0):"ArrowLeft"===t.key||"Backspace"===t.key?(t.preventDefault(),e=-1*this.value):"ArrowUp"===t.key?(t.preventDefault(),this.focusTo("up")):"ArrowRight"===t.key||"Enter"===t.key?(t.preventDefault(),e=1*this.value):"ArrowDown"===t.key&&(t.preventDefault(),this.focusTo("down")),0!==e&&(this.dispatchEvent("ladder-step-change",{step:Number(e.toFixed(5)),round:t.shiftKey},!0),this.setAttribute("aria-valuenow",this.parentElement.value))}_onPointerdown(t){this.setPointerCapture(t.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),this._startX=t.clientX}_onPointermove(t){const e=t.clientX-this._startX;if(Math.abs(e)>5){const o=Math.pow(e/5,2)*e<0?-1:1,n=e>0?Math.floor(o):Math.ceil(o);let i=this.value*n;this._startX=t.clientX,this.dispatchEvent("ladder-step-change",{step:Number(i.toFixed(5)),round:t.shiftKey},!0)}}_onPointerup(t){this.releasePointerCapture(t.pointerId),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup)}setAria(){super.setAria(),this.setAttribute("aria-valuemax",this.parentElement.max),this.setAttribute("aria-valuemin",this.parentElement.min),this.setAttribute("aria-valuenow",this.parentElement.value)}}IoLadderStep.Register();class IoLadder extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tposition: relative;\n\t\t\tpointer-events: none;\n\t\t\tuser-select: none;\n\t\t\t-webkit-tap-highlight-color: transparent;\n\t\t\t-webkit-user-select: none;\n\t\t\t-webkit-touch-callout: none;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t}\n\t\t:host:not([expanded]) {\n\t\t\tvisibility: hidden;\n\t\t}\n\t\t:host:not([expanded]) > io-ladder-step {\n\t\t\topacity: 0.5;\n\t\t}\n\t\t:host > io-ladder-step:nth-child(-n+5) {\n\t\t\tbox-shadow: 0 -1px 4px rgba(0,0,0,0.2);\n\t\t}\n\t\t:host > io-ladder-step:nth-child(n+6) {\n\t\t\tbox-shadow: 0 1px 4px rgba(0,0,0,0.2);\n\t\t}\n\t\t:host > .io-up1,\n\t\t:host > .io-down1{\n\t\t\tz-index: 4;\n\t\t\ttransition: opacity 0.1s, transform 0.1s;\n\t\t}\n\t\t:host > .io-up2,\n\t\t:host > .io-down2 {\n\t\t\tz-index: 3;\n\t\t\topacity: 0.8;\n\t\t\ttransition: opacity 0.2s, transform 0.2s;\n\t\t}\n\t\t:host:not([expanded]) > .io-up4 {\n\t\t\ttransform: translateY(calc(3 * var(--io-item-height)));\n\t\t}\n\t\t:host:not([expanded]) > .io-up3 {\n\t\t\ttransform: translateY(calc(2 * var(--io-item-height)));\n\t\t}\n\t\t:host:not([expanded]) > .io-up2 {\n\t\t\ttransform: translateY(calc(1 * var(--io-item-height)));\n\t\t}\n\t\t:host:not([expanded]) > .io-down2 {\n\t\t\ttransform: translateY(calc(-1 * var(--io-item-height)));\n\t\t}\n\t\t:host:not([expanded]) > .io-down3 {\n\t\t\ttransform: translateY(calc(-2 * var(--io-item-height)));\n\t\t}\n\t\t:host:not([expanded]) > .io-down4 {\n\t\t\ttransform: translateY(calc(-3 * var(--io-item-height)));\n\t\t}\n\t\t:host > .io-up3,\n\t\t:host > .io-down3 {\n\t\t\tz-index: 2;\n\t\t\topacity: 0.6;\n\t\t\ttransition: opacity 0.4s, transform 0.4s;\n\t\t}\n\t\t:host > .io-up4,\n\t\t:host > .io-down4 {\n\t\t\tz-index: 1;\n\t\t\topacity: 0.4;\n\t\t\ttransition: opacity 0.8s, transform 0.8s;\n\t\t}\n\t\t:host > io-ladder-step:hover,\n\t\t:host > io-ladder-step:focus {\n\t\t\tbackground-color: var(--io-background-color-light);\n\t\t\tborder-color: var(--io-color-focus);\n\t\t\ttransition: opacity 0.2s;\n\t\t\topacity: 1;\n\t\t}\n\t\t:host > .io-ladder-empty {\n\t\t\theight: var(--io-item-height);\n\t\t}\n\t\t:host > .io-ladder-center {\n\t\t\theight: calc(1.5 * var(--io-item-height));\n\t\t}\n\t\t"}static get Properties(){return{src:HTMLElement,conversion:1,expanded:{type:Boolean,reflect:1},min:-1/0,max:1/0,step:1e-4,role:"list"}}static get Listeners(){return{"ladder-step-change":"_onLadderStepChange","ladder-step-collapse":"_onLadderStepCollapse",focusin:"_onFocusIn"}}get value(){return this.src?this.src.value:0}_onFocusIn(t){t.stopPropagation()}_onFocusTo(t){t.stopPropagation();const e=t.composedPath()[0],o=this.src,n=t.detail.dir;if(o&&(e===this.querySelector(".io-up1")&&"down"===n||e===this.querySelector(".io-down1")&&"up"===n))return o.focus(),void(o.selectionStart=o.selectionEnd=o.textNode.length);super._onFocusTo(t)}_onLadderStepChange(t){const e=this.src;if(this.src){const o=t.detail.step,n=t.detail.round?Math.round(this.value/o)*o:this.value;let i=Math.min(this.max,Math.max(this.min,n+o));i=Number(i.toFixed(5)),e.set("value",i)}}_onLadderStepCollapse(){this.set("expanded",!1)}srcChanged(){const t=this.src;t&&this.setProperties({min:t.min,max:t.max,step:t.step,conversion:t.conversion})}expandedChanged(){const t=this.src;if(this.expanded)if(t){const e=t.getBoundingClientRect(),o=IoLayerSingleton.getBoundingClientRect();this.style.top=e.bottom-o.top+"px",this.style.left=e.left-o.left+"px",this.style.position="absolute",this.style.marginTop="calc(-5.25 * var(--io-item-height))"}else this.removeAttribute("style");else t&&"touch"!==t._pointerType?t.focus():lastFocus$1&&lastFocus$1.focus();this.dispatchEvent("expanded",{value:this.expanded},!0)}changed(){const t=this.max-this.min,e=["span",{class:"io-ladder-empty"}];let o=this.step/1e4;for(;o<.1;)o*=10;const n=1e4*o,i=1e3*o,s=100*o,r=10*o,a=1*o,l=.1*o,h=.01*o,c=.001*o,d=Number((n*this.conversion).toFixed(6)),u=Number((i*this.conversion).toFixed(6)),v=Number((s*this.conversion).toFixed(6)),p=Number((r*this.conversion).toFixed(6)),g=Number((a*this.conversion).toFixed(6)),m=Number((l*this.conversion).toFixed(6)),b=Number((h*this.conversion).toFixed(6)),f=Number((c*this.conversion).toFixed(6));this.template([t>=n?["io-ladder-step",{class:"io-up4",value:n,label:d}]:e,t>=i?["io-ladder-step",{class:"io-up3",value:i,label:u}]:e,t>=s?["io-ladder-step",{class:"io-up2",value:s,label:v}]:e,t>=r?["io-ladder-step",{class:"io-up1",value:r,label:p}]:e,["span",{class:"io-ladder-center"}],this.step<=a?["io-ladder-step",{class:"io-down1",value:a,label:g}]:e,this.step<=l?["io-ladder-step",{class:"io-down2",value:l,label:m}]:e,this.step<=h?["io-ladder-step",{class:"io-down3",value:h,label:b}]:e,this.step<=c?["io-ladder-step",{class:"io-down4",value:c,label:f}]:e]);const y=this.querySelectorAll("io-ladder-step");for(let t=y.length;t--;)y[t].setAria()}}IoLadder.Register();const IoLadderSingleton=new IoLadder;IoLayerSingleton.appendChild(IoLadderSingleton);class IoNumber extends IoItem{static get Style(){return"\n\t\t:host {\n\t\t\tcursor: text;\n\t\t\tuser-select: text;\n\t\t\t-webkit-user-select: text;\n\t\t\t-webkit-touch-callout: default;\n\t\t\tmin-width: var(--io-item-height);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tcolor: var(--io-color-field);\n\t\t\tbackground-color: var(--io-background-color-field);\n\t\t\tbox-shadow: var(--io-shadow-inset);\n\t\t}\n\t\t:host:before,\n\t\t:host:after {\n\t\t\tcontent: ' ';\n\t\t\twhite-space: pre;\n\t\t\tvisibility: hidden;\n\t\t}\n\t\t:host:before {\n\t\t\tcontent: '-';\n\t\t}\n\t\t:host:not([positive]):before {\n\t\t\tcontent: ' ';\n\t\t}\n\t\t"}static get Properties(){return{value:Number,conversion:1,step:.001,min:-1/0,max:1/0,ladder:!1,contenteditable:!0,role:"textbox",type:{value:"number",reflect:1},pattern:{value:'pattern="[0-9]*"',reflect:1},inputmode:{value:"numeric",reflect:1},spellcheck:{value:"false",reflect:1}}}constructor(t){super(t),Object.defineProperty(this,"_pointer",{value:"touch",writable:!0})}_onPointerdown(t){"touch"===this._pointer&&t.preventDefault(),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),document.activeElement===this&&0===t.button||(this._pointer=t.pointerType)}_onPointerup(t){this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.ladder||1===t.button?("touch"===this._pointer?(t.preventDefault(),document.activeElement.blur()):document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length)),this._expandLadder()):document.activeElement!==this&&(this.focus(),this.setCaretPosition(this.textNode.length))}_onFocus(t){super._onFocus(t),"touch"===this._pointer&&(IoLadderSingleton.expanded=!1)}_onBlur(t){super._onBlur(t),this._setFromTextNode(),this.scrollTop=0,this.scrollLeft=0,setTimeout(()=>{document.activeElement.parentElement!==IoLadderSingleton&&(IoLadderSingleton.expanded=!1)})}_expandLadder(){IoLadderSingleton.src=this,IoLadderSingleton.expanded=!0}_onKeydown(t){const e=window.getSelection().getRangeAt(0),o=e.startOffset,n=e.endOffset,i=this.childNodes[0]?this.childNodes[0].length:0,s=e.startContainer===e.endContainer&&(e.startContainer===this.childNodes[0]||e.startContainer===this);if(27===t.which||13===t.which||32===t.which)t.preventDefault(),this._setFromTextNode();else if(36===t.which)this.textNode=this.min,this._setFromTextNode();else if(35===t.which)this.textNode=this.max,this._setFromTextNode();else if(33===t.which){const t=Number(this.textNode);"number"==typeof t&&!isNaN(t)&&Math.abs(t)<1/0?this.textNode=Number(this.textNode)+this.step:this.textNode=this.step,this._setFromTextNode()}else if(34===t.which){const t=Number(this.textNode);"number"==typeof t&&!isNaN(t)&&Math.abs(t)<1/0?this.textNode=Number(this.textNode)-this.step:this.textNode=-this.step,this._setFromTextNode()}else if(37===t.which)(t.ctrlKey||s&&o===n&&0===o)&&(t.preventDefault(),this.focusTo("left"));else if(38===t.which)if(IoLadderSingleton.expanded){const t=IoLadderSingleton.querySelector(".io-up1");t&&t.focus()}else(t.ctrlKey||s&&o===n&&0===o)&&(t.preventDefault(),this.focusTo("up"));else if(39===t.which)(t.ctrlKey||s&&o===n&&o===i)&&(t.preventDefault(),this.focusTo("right"));else if(40===t.which)if(IoLadderSingleton.expanded){const t=IoLadderSingleton.querySelector(".io-down1");t&&t.focus()}else(t.ctrlKey||s&&o===n&&o===i)&&(t.preventDefault(),this.focusTo("down"))}_onKeyup(t){17===t.which?this._expandLadder():27!==t.which&&13!==t.which&&32!==t.which||(IoLayerSingleton.expanded=!1)}_setFromTextNode(){let t=this.textNode,e=Number(t)/this.conversion;e=Math.min(this.max,Math.max(this.min,e)),e=Math.round(e/this.step)*this.step;let o=Math.max(0,Math.min(100,-Math.round(Math.log(this.step)/Math.LN10)));e=Number(e.toFixed(o)),isNaN(e)?this.textNode="NaN":this.set("value",e)}changed(){this.title=this.label;let t,e=this.value;if("number"!=typeof e||isNaN(e))t="NaN";else{e*=this.conversion;let o=-Math.round(Math.log(this.step*this.conversion)/Math.LN10);o=Math.max(0,Math.min(100,o)),e=e.toFixed(o),t=Number(String(e))}this.textNode=t,this.setAttribute("positive",this.value>=0),this.setAttribute("aria-invalid",!("number"==typeof this.value&&!isNaN(this.value))&&"true")}}IoNumber.Register();class IoSlider extends IoGl{static get Style(){return"\n\t\t:host {\n\t\t\tcursor: ns-resize;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder: var(--io-border);\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tmin-width: var(--io-item-height);\n\t\t\tmin-height: var(--io-item-height);\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t:host[horizontal] {\n\t\t\tcursor: ew-resize;\n\t\t}\n\t\t:host[aria-invalid] {\n\t\t\tborder: var(--io-border-error);\n\t\t\tbackground-image: var(--io-gradient-error);\n\t\t}\n\t\t:host[aria-invalid] > .io-gl-canvas {\n\t\t\topacity: 0.5;\n\t\t}\n\t\t:host:focus {\n\t\t\tborder-color: var(--io-color-focus);\n\t\t\toutline-color: var(--io-color-focus);\n\t\t}\n\t\t"}static get Properties(){return{value:0,step:.01,min:0,max:1,horizontal:{value:!0,reflect:1},noscroll:!1,role:"slider",tabindex:0,lazy:!0}}static get Listeners(){return{focus:"_onFocus",contextmenu:"_onContextmenu",pointerdown:"_onPointerdown",touchstart:"_onTouchstart"}}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup),this.removeEventListener("touchstart",this._onTouchstart),this.removeEventListener("touchmove",this._onTouchmove),this.removeEventListener("touchend",this._onTouchend)}_onFocus(){this.addEventListener("blur",this._onBlur),this.addEventListener("keydown",this._onKeydown)}_onBlur(){this.removeEventListener("blur",this._onBlur),this.removeEventListener("keydown",this._onKeydown)}_onContextmenu(t){t.preventDefault()}_onTouchstart(t){this.addEventListener("touchmove",this._onTouchmove),this.addEventListener("touchend",this._onTouchend),this._x=t.changedTouches[0].clientX,this._y=t.changedTouches[0].clientY,this._active=this.noscroll?1:-1}_onTouchmove(t){const e=Math.abs(this._x-t.changedTouches[0].clientX),o=Math.abs(this._y-t.changedTouches[0].clientY);-1===this._active&&(this.horizontal?e>3&&(this._active=e>o&&o<10?1:0):o>3&&(this._active=o>e&&e<10?1:0)),1===this._active&&t.preventDefault()}_onTouchend(){this.removeEventListener("touchmove",this._onTouchmove),this.removeEventListener("touchend",this._onTouchend)}_onPointerdown(t){this.setPointerCapture(t.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup)}_onPointermove(t){1===this._active&&(document.activeElement!==this&&this.focus(),this.throttle(this._onPointermoveThrottled,t))}_onPointerup(){this.releasePointerCapture(event.pointerId),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup)}_onPointermoveThrottled(t){const e=this.getBoundingClientRect(),o=Math.max(0,Math.min(1,(t.clientX-e.x)/e.width)),n=Math.max(0,Math.min(1,1-(t.clientY-e.y)/e.height));let i=this.min*(1-o)+this.max*o;i=Math.min(this.max,Math.max(this.min,i)),i=Math.round(i/this.step)*this.step;let s=this.min*(1-n)+this.max*n;s=Math.min(this.max,Math.max(this.min,s)),s=Math.round(s/this.step)*this.step,this._setValue(this.horizontal?i:s,this.horizontal?s:i)}_setValue(t){this.set("value",Number(t.toFixed(5)))}_onKeydown(t){"ArrowLeft"===t.key?(t.preventDefault(),t.shiftKey?this._setDecrease():this.focusTo("left")):"ArrowUp"===t.key?(t.preventDefault(),t.shiftKey?this._setIncrease():this.focusTo("up")):"ArrowRight"===t.key?(t.preventDefault(),t.shiftKey?this._setIncrease():this.focusTo("right")):"ArrowDown"===t.key?(t.preventDefault(),t.shiftKey?this._setDecrease():this.focusTo("down")):"PageUp"===t.key||"+"===t.key?(t.preventDefault(),this._setIncrease()):"PageDown"===t.key||"-"===t.key?(t.preventDefault(),this._setDecrease()):"Home"===t.key?(t.preventDefault(),this._setMin()):"PageDown"===t.key&&(t.preventDefault(),this._setMax())}_setIncrease(){let t=this.value+this.step;t=Math.min(this.max,Math.max(this.min,t)),this.set("value",Number(t.toFixed(4)))}_setDecrease(){let t=this.value-this.step;t=Math.min(this.max,Math.max(this.min,t)),this.set("value",Number(t.toFixed(4)))}_setMin(){let t=this.min;t=Math.min(this.max,Math.max(this.min,t)),this.set("value",Number(t.toFixed(4)))}_setMax(){let t=this.max;t=Math.min(this.max,Math.max(this.min,t)),this.set("value",Number(t.toFixed(4)))}changed(){super.changed(),this.setAria()}setAria(){this.setAttribute("aria-invalid",!!isNaN(this.value)&&"true"),this.setAttribute("aria-valuenow",isNaN(this.value)?0:this.value),this.setAttribute("aria-valuemin",this.min),this.setAttribute("aria-valuemax",this.max)}static get GlUtils(){return"\n\t\tvec4 paintSlider(vec2 position, vec3 color) {\n\t\t\tvec4 slotColor = mix(cssColor, cssBackgroundColorField, 0.125);\n\t\t\tvec4 sliderColor = vec4(0.0);\n\t\t\tfloat slotWidth = cssStrokeWidth;\n\t\t\tfloat stroke = cssStrokeWidth;\n\t\t\tfloat radius = cssItemHeight * 0.125;\n\n\t\t\tfloat strokeShape = min(\n\t\t\t\tcircle(position, radius + stroke + stroke),\n\t\t\t\trectangle(vec2(0., position.y), vec2(-position.x, radius + stroke + stroke))\n\t\t\t);\n\t\t\tsliderColor = mix(vec4(slotColor.rgb, 1.0), sliderColor, strokeShape);\n\n\t\t\tfloat fillShape = min(\n\t\t\t\tcircle(position, radius + stroke),\n\t\t\t\trectangle(vec2(0., position.y), vec2(-position.x, radius + stroke))\n\t\t\t);\n\t\t\tsliderColor = mix(vec4(cssBackgroundColor.rgb, 1.0), sliderColor, fillShape);\n\n\t\t\tfloat colorShape = min(\n\t\t\t\tcircle(position, radius),\n\t\t\t\trectangle(vec2(0., position.y), vec2(-position.x, radius))\n\t\t\t);\n\t\t\tsliderColor = mix(vec4(color, 1.0), sliderColor, colorShape);\n\n\t\t\treturn sliderColor;\n\t\t}\n\t\t\n\n"}static get Frag(){return"\n\t\t#extension GL_OES_standard_derivatives : enable\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main(void) {\n\t\t\tvec3 finalColor = cssBackgroundColorField.rgb;\n\n\t\t\tvec2 size = uHorizontal == 1 ? uSize : uSize.yx;\n\t\t\tvec2 uv = uHorizontal == 1 ? vUv : vUv.yx;\n\t\t\tvec2 position = size * uv;\n\n\t\t\tfloat stepInPx = size.x / ((uMax - uMin) / uStep);\n\t\t\tvec4 stepColorBg = mix(cssColor, cssBackgroundColorField, 0.75);\n\n\t\t\tfloat lineWidth = cssStrokeWidth;\n\t\t\tif (stepInPx > lineWidth * 2.0) {\n\t\t\t\tfloat gridWidth = size.x / ((uMax - uMin) / uStep);\n\t\t\t\tfloat gridOffset = mod(uMin, uStep) / (uMax - uMin) * size.x;\n\t\t\t\tfloat gridShape = grid(translate(position, - gridOffset, size.y / 2.), gridWidth, size.y + lineWidth * 2.0, lineWidth);\n\t\t\t\tfinalColor.rgb = mix(stepColorBg.rgb, finalColor.rgb, gridShape);\n\t\t\t}\n\n\t\t\tfloat valueInRange = (uValue - uMin) / (uMax - uMin);\n\t\t\tvec4 slotGradient = mix(cssColorFocus, cssColorLink, uv.x);\n\t\t\tvec2 markerPos = translate(position, vec2(size.x * valueInRange, size.y * 0.5));\n\t\t\tvec4 slider = paintSlider(markerPos, slotGradient.rgb);\n\t\t\tfinalColor = mix(finalColor.rgb, slider.rgb, slider.a);\n\n\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t}"}}IoSlider.Register();class IoNumberSlider extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t:host > io-number {\n\t\t\tflex: 0 0 calc(2 * var(--io-item-height));\n\t\t\tmargin-right: var(--io-spacing);\n\t\t}\n\t\t:host > io-slider {\n\t\t\tflex: 1 1 calc(2 * var(--io-item-height));\n\t\t\tmin-width: calc(2 * var(--io-item-height));\n\t\t}\n\t\t"}static get Properties(){return{value:0,step:.01,conversion:1,min:0,max:1}}_onNumberSet(t){this.value=t.detail.value,this.dispatchEvent("value-set",t.detail,!1)}_onSliderSet(t){t.detail.value=t.detail.value/this.conversion,this.value=t.detail.value,this.dispatchEvent("value-set",t.detail,!1)}changed(){this.template([["io-number",{id:"number",value:this.value,step:this.step,conversion:this.conversion,min:this.min,max:this.max,label:this.label,"on-value-set":this._onNumberSet}],["io-slider",{id:"slider",value:this.value*this.conversion,step:this.step*this.conversion,min:this.min*this.conversion,max:this.max*this.conversion,label:this.label,"on-value-set":this._onSliderSet}]])}}IoNumberSlider.Register();class IoIcon extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\t@apply --io-item;\n\t\t}\n\t\t:host {\n\t\t\twidth: var(--io-item-height);\n\t\t\theight: var(--io-item-height);\n\t\t\tfill: var(--io-background-color, currentcolor);\n\t\t}\n\t\t:host[stroke] {\n\t\t\tstroke: var(--io-color, currentcolor);\n\t\t\tstroke-width: var(--io-stroke-width);\n\t\t}\n\t\t:host > svg {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t\t:host > svg > g {\n\t\t\tpointer-events: none;\n\t\t\ttransform-origin: 0px 0px;\n\t\t}\n\t\t"}static get Properties(){return{icon:{value:"",reflect:-1},label:{value:"",reflect:1},stroke:{type:Boolean,reflect:1}}}iconChanged(){this.innerHTML=IoIconsetSingleton.getIcon(this.icon)}}IoIcon.Register();const rects=new WeakMap;class IoMenuOptions extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\t@apply --io-panel;\n\t\t\tbox-sizing: border-box;\n\t\t\talign-self: flex-start;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: stretch;\n\t\t\twhite-space: nowrap;\n\t\t\tuser-select: none;\n\t\t\tbackground-image: none;\n\t\t\tpadding: 0;\n\t\t\topacity: 1;\n\t\t\ttransition: opacity 0.25s;\n\t\t\toverflow-y: scroll !important;\n\t\t\tpadding: var(--io-spacing);\n\t\t}\n\t\t:host > io-menu-item {\n\t\t\talign-self: stretch;\n\t\t\tflex: 0 0 auto;\n\t\t}\n\t\t:host[inlayer] {\n\t\t\tbox-shadow: var(--io-shadow);\n\t\t}\n\t\t:host[inlayer]:not([expanded]) {\n\t\t\tvisibility: hidden;\n\t\t\topacity: 0;\n\t\t}\n\t\t:host[horizontal] {\n\t\t\tflex-direction: row;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t\tflex-wrap: nowrap;\n\t\t\tpadding: 0 var(--io-spacing);\n\t\t}\n\t\t:host[horizontal] > io-menu-item {\n\t\t\tborder-left-width: 0;\n\t\t\tborder-right-width: 0;\n\t\t\tpadding: var(--io-spacing) calc(0.5 * var(--io-line-height));\n\t\t}\n\t\t:host:not([horizontal]) > io-menu-item > * {\n\t\t\tmin-width: 0.5em;\n\t\t\tpadding: 0 var(--io-spacing);\n\t\t}\n\t\t:host[horizontal] > io-menu-item > .io-menu-hint,\n\t\t:host[horizontal] > io-menu-item > .io-menu-more {\n\t\t\tdisplay: none;\n\t\t}\n\t\t:host[horizontal] > io-menu-item.io-hamburger {\n\t\t\tmargin-left: auto;\n\t\t}\n\t\t:host[horizontal] > io-menu-item.io-hamburger[hidden] {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 0;\n\t\t\tpadding: 0;\n\t\t\tborder: 0;\n\t\t\toverflow: hidden;\n\t\t\tvisibility: hidden;\n\t\t}\n\t\t:host > io-string {\n\t\t\talign-self: stretch;\n\t\t\tflex: 0 0 auto;\n\t\t\tmin-width: 8em;\n\t\t}\n\t\t:host > io-string:empty:before {\n\t\t\tcontent: ' 🔍 Search';\n\t\t\twhite-space: pre;\n\t\t\tvisibility: visible;\n\t\t\topacity: 0.33;\n\t\t}\n\t\t"}static get Properties(){return{value:{value:null,notify:!0},options:{type:Array,observe:!0},expanded:{value:!1,reflect:1},horizontal:{type:Boolean,reflect:1},position:"right",selectable:Boolean,searchable:Boolean,search:String,overflow:{type:Boolean,reflect:1},inlayer:{type:Boolean,reflect:1},slotted:Array,$parent:HTMLElement,_rects:Array,role:"listbox"}}static get Listeners(){return{"item-clicked":"_onMenuItemClicked",touchstart:"_stopPropagation"}}connectedCallback(){super.connectedCallback(),this.inlayer=this.parentElement===IoLayerSingleton}_onMenuItemClicked(t){t.composedPath()[0]!==this&&(t.stopImmediatePropagation(),"io-menu-item"==t.composedPath()[0].localName&&(this.set("value",t.detail.value),this.dispatchEvent("item-clicked",t.detail,!0),this.expanded=!1,this.search=""))}_stopPropagation(t){t.stopPropagation()}onResized(){this.requestAnimationFrameOnce(this._setOverflow)}_setOverflow(){const t=this.querySelectorAll("io-menu-item:not(.io-hamburger)");if(this.horizontal){const e=this.querySelector(".io-hamburger");if(!t.length)return;let o=this.getBoundingClientRect().right,n=!1,i=1/0;e.hidden=!0;const s=[];for(let r=t.length;r--;){const a=t[r].getBoundingClientRect(),l=rects.get(t[r])||{right:0,width:0};0!==a.right&&0!==a.width&&(l.right=a.right,l.width=a.width,rects.set(t[r],l)),e.hidden&&n&&(e.hidden=!1,o-=e.getBoundingClientRect().width),t[r].selected?(o-=l.width,t[r].hidden=!1):(i=Math.min(i,l.right))<o?t[r].hidden=!1:(t[r].hidden=!0,s.push(t[r].option),n=!0)}e.option={options:s},this.overflow=n}else for(let e=t.length;e--;)t[e].hidden=!1}expandedChanged(){this.expanded?(this.inlayer=this.parentElement===IoLayerSingleton,this.inlayer&&this.$parent&&(this._expandedChangedLazy(),this.throttle(this._expandedChangedLazy,null,!0))):(this.style.top=null,this.style.height=null,this.style.touchAction=null,this.scrollTop=0,this.search="")}searchChanged(){this.inlayer&&this.$parent&&this.requestAnimationFrameOnce(this._clipHeight)}_expandedChangedLazy(){const t=this.$parent.getBoundingClientRect();IoLayerSingleton.setElementPosition(this,this.position,t),this._clipHeight(),this.searchable=!!this.style.height}_clipHeight(){if(this.scrollTop=0,!this.firstChild)return;const t=this.firstChild.getBoundingClientRect().top,e=this.lastChild.getBoundingClientRect().bottom,o=e-t;t<0?(this.style.top="0px",this.style.height=o+t+"px",this.style.touchAction="pan-y"):e>window.innerHeight?(this.style.height=window.innerHeight-t+"px",this.style.touchAction="pan-y"):(this.style.height=null,this.style.touchAction=null)}get _options(){if(this.search){const t=this.search.toLowerCase(),e=this.filterObjects(this.options,e=>{if(e.value||e.action){if(-1!==String(e.value).toLowerCase().search(t))return!0;if(e.label&&-1!==e.label.toLowerCase().search(t))return!0;if(e.hint&&-1!==e.hint.toLowerCase().search(t))return!0}});return e.length?e:[{label:"No matches"}]}return this.options}changed(){const t=this.horizontal?"bottom":"right",e=[];this.searchable&&e.push(["io-string",{value:this.bind("search"),live:!0}]),this._options&&e.push(...[this._options.map(e=>["io-menu-item",{$parent:this,option:e,value:this.value,lazy:!this.expanded,direction:t,selectable:this.selectable}])]),this.horizontal&&(e.splice(0,0,...this.slotted),e.push(["io-menu-item",{label:"☰",title:"select tab",value:this.value,selectable:this.selectable,class:"io-hamburger"}])),this.template(e),this.requestAnimationFrameOnce(this._setOverflow)}}function getElementDescendants(t){const e=[];let o;-1!=="io-menu-item, io-option-menu".search(t.localName)?(e.push(t),o=t.$options.querySelectorAll("io-menu-item, io-option-menu")):o="io-context-menu"===t.localName?t.$options.querySelectorAll("io-menu-item, io-option-menu"):t.querySelectorAll("io-menu-item, io-option-menu");for(let t=o.length;t--;)e.push(o[t]),o[t].expanded&&e.push(...getElementDescendants(o[t]));return e}function getElementAncestors(t){let e=t;const o=[t];for(;e&&e.$parent;)(e=e.$parent)&&o.push(e);return o}function getRootElement(t){let e=t;for(;e&&e.$parent;)e=e.$parent;return e}function isPointerAboveElement(t,e){const o=e.getBoundingClientRect(),n=t.clientX,i=t.clientY;return o.top<i&&o.bottom>i&&o.left<n&&o.right>n}let hoveredItem,hoveredParent;IoMenuOptions.Register();class IoMenuItem extends IoItem{static get Style(){return'\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex: 0 0 auto;\n\t\t\tflex-direction: row;\n\t\t\tpadding: var(--io-spacing);\n\t\t\tborder-radius: 0;\n\t\t\tbackground: none;\n\t\t\tborder: var(--io-border-width) solid transparent;\n\t\t\tbackground-color: transparent;\n\t\t\tborder-color: transparent;\n\t\t}\n\t\t:host > * {\n\t\t\toverflow: visible;\n\t\t\tpointer-events: none;\n\t\t}\n\t\t:host > :not(:empty) {\n\t\t\tpadding: 0 var(--io-spacing);\n\t\t}\n\t\t:host > .io-menu-icon {}\n\t\t:host > .io-menu-label {\n\t\t\tflex: 1 1 auto;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t\t:host > .io-menu-hint {\n\t\t\topacity: 0.25;\n\t\t}\n\t\t:host[hasmore]:after {\n\t\t\tcontent: \'▸\';\n\t\t}\n\t\t:host[selected][direction="top"],\n\t\t:host[selected][direction="bottom"] {\n\t\t\tborder-bottom-color: var(--io-color-link);\n\t\t}\n\t\t:host[selected][direction="right"],\n\t\t:host[selected][direction="left"] {\n\t\t\tborder-left-color: var(--io-color-link);\n\t\t}\n\t\t'}static get Properties(){return{option:{type:Object},expanded:{value:!1,reflect:1},direction:{value:"bottom",reflect:1},$parent:HTMLElement,$options:HTMLElement,selectable:!1,lazy:!0}}static get Listeners(){return{click:"preventDefault"}}preventDefault(t){t.stopPropagation(),t.preventDefault()}get _options(){return this._option.options}get _action(){return this._option.action}get _value(){return this._option.value}get _icon(){return this._option.icon||""}get _label(){return this.label||this._option.label||String(this._option.value)||""}get _hint(){return this._option.hint||""}get _selected(){return!!this.selectable&&(!(!this._option.selected&&this._option.value!==this.value)||!!this.filterObject(this._options||{},t=>t===this.value||t.value===this.value))}get inlayer(){return this.$parent&&this.$parent.inlayer}connectedCallback(){super.connectedCallback(),this.$options&&IoLayerSingleton.appendChild(this.$options),this.inlayer||IoLayerSingleton.addEventListener("pointermove",this._onLayerPointermove)}disconnectedCallback(){super.disconnectedCallback(),this.$options&&this.$options.inlayer&&IoLayerSingleton.removeChild(this.$options),IoLayerSingleton.removeEventListener("pointermove",this._onLayerPointermove)}_onClick(){void 0!==this._value||this._action?(void 0!==this._value&&this.set("value",this._value,!0),this._action&&this._action.apply(null,[this._value]),this.dispatchEvent("item-clicked",{value:this._value,action:this._action},!0),getRootElement(this).expanded=!1):this._options&&(this.expanded=!0)}_onPointerdown(t){t.stopPropagation(),this.setPointerCapture(t.pointerId),this.addEventListener("pointermove",this._onPointermove),this.addEventListener("pointerup",this._onPointerup),(this.expanded||"mouse"===t.pointerType||this.inlayer)&&(this.focus(),this._options&&(this.expanded=!0)),hoveredItem=this,hoveredParent=this.parentElement,this._x=t.clientX,this._y=t.clientY}_getHoveredItem(t){const e=getElementDescendants(getRootElement(this));for(let o=e.length;o--;){const n=e[o],i=n.parentElement;if(isPointerAboveElement(t,n)&&isPointerAboveElement(t,i))return n}}_onPointermove(t){if(t.stopPropagation(),!this.expanded&&"touch"===t.pointerType&&!this.inlayer)return;const e=!!this.$parent&&!!this.$parent.style.height;if("touch"===t.pointerType&&e)return;const o=t.clientX-this._x,n=t.clientY-this._y;if(this._x=t.clientX,this._y=t.clientY,IoLayerSingleton.x=t.clientX,IoLayerSingleton.y=t.clientY,clearTimeout(this.__timeoutOpen),hoveredItem=this._getHoveredItem(t)){const t=Math.abs(n)-Math.abs(o),e=hoveredItem.parentElement.horizontal;hoveredParent!==hoveredItem.parentElement?(hoveredParent=hoveredItem.parentElement,this._expandHovered()):(e?t<-.5:t>.5)?this._expandHovered():this.__timeoutOpen=setTimeout(()=>{this._expandHovered()},100)}}_expandHovered(){if(hoveredItem&&(hoveredItem.focus(),hoveredItem._options)){hoveredItem.expanded=!0;const t=getElementDescendants(hoveredItem.$options);for(let e=t.length;e--;)t[e].expanded=!1}}_onLayerPointermove(t){this.expanded&&this._onPointermove(t)}_onPointerup(t){t.stopPropagation(),this.removeEventListener("pointermove",this._onPointermove),this.removeEventListener("pointerup",this._onPointerup);let e=this._getHoveredItem(t);e?e._onClick(t):this.requestAnimationFrameOnce(this._collapse)}_onKeydown(t){if("Enter"===t.key||" "===t.key)return t.preventDefault(),this.expanded?void(this.expanded=!1):void this._onClick(t);if("Escape"===t.key)return t.preventDefault(),void(getRootElement(this).expanded=!1);let e="";"left"===this.direction||"right"===this.direction?("ArrowUp"===t.key&&(e="prev"),"ArrowRight"===t.key&&(e="in"),"ArrowDown"===t.key&&(e="next"),"ArrowLeft"===t.key&&(e="out")):("ArrowUp"===t.key&&(e="out"),"ArrowRight"===t.key&&(e="next"),"ArrowDown"===t.key&&(e="in"),"ArrowLeft"===t.key&&(e="prev")),this.inlayer&&"Tab"===t.key&&(e="next");const o=this.$parent?[...this.$parent.children]:[],n=o.indexOf(this);if(e&&(this.inlayer||this.expanded))switch(t.preventDefault(),e){case"prev":{const t=o[(n+o.length-1)%o.length];this.expanded=!1,t&&(t._options&&(t.expanded=!0),t.focus());break}case"next":{const t=o[(n+1)%o.length];this.expanded=!1,t&&(t._options&&(t.expanded=!0),t.focus());break}case"in":this.$options&&this.$options.children.length&&this.$options.children[0].focus();break;case"out":this.expanded=!1,this.$parent&&this.$parent.$parent&&this.$parent.$parent.focus()}else this.expanded=!1,super._onKeydown(t)}_onOptionItemClicked(t){t.composedPath()[0]!==this&&(t.stopImmediatePropagation(),this.set("value",t.detail.value),this.dispatchEvent("item-clicked",t.detail,!0))}optionChanged(){this.option&&"object"==typeof this.option?this._option=this.option:this._option={value:this.option},this._options&&(this.$options||(this.$options=new IoMenuOptions({$parent:this,expanded:this.bind("expanded"),"on-item-clicked":this._onOptionItemClicked})))}_collapse(){this.expanded=!1}expandedChanged(){if(this.expanded){this.$options&&this.$options.parentElement!==IoLayerSingleton&&IoLayerSingleton.appendChild(this.$options);const t=getElementDescendants(getRootElement(this)),e=getElementAncestors(this);for(let o=t.length;o--;)-1===e.indexOf(t[o])&&(t[o].expanded=!1);if(this.$options){const t=getElementDescendants(this.$options);for(let e=t.length;e--;)t[e].expanded=!1}}else{const t=getElementDescendants(this);for(let e=t.length;e--;)t[e].expanded=!1}}changed(){this.__properties.selected.value=this._selected,this.setAttribute("selected",this._selected),this.setAttribute("hasmore",!!this._options&&"right"===this.direction),this.template([["span",{class:"io-menu-icon"},this._icon],["span",{class:"io-menu-label"},this._label],["span",{class:"io-menu-hint"},this._hint]]),this.$options&&this.$options.setProperties({value:this.value,options:this._options,selectable:this.selectable,position:this.direction})}}IoMenuItem.Register();class IoOptionMenu extends IoMenuItem{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: inline-block;\n\t\t\ttext-align: center;\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-outset);\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tbackground-image: var(--io-gradient-button);\n\t\t\tpadding-left: calc(2 * var(--io-spacing));\n\t\t\tpadding-right: calc(2 * var(--io-spacing));\n\t\t}\n\t\t:host {\n\t\t\ttext-align: left;\n\t\t}\n\t\t"}static get Properties(){return{value:{reflect:-1},selectable:!0,hamburger:!1,options:{type:Array,reflect:-1,observe:!0},role:"button",lazy:!1}}get _options(){return this.options}changed(){let t;if(this.options){const e=this.options.find(t=>t.value===this.value);e&&(t=e.label?e.label:"object"==typeof e.value?`${e.value.constructor.name}`+(e.value instanceof Array?`(${e.value.length})`:""):String(e.value))}t=this.hamburger?"☰\t"+(this.label||t||String(this.value)):this.label||(t||String(this.value))+" ▾",this.textNode=t,this.title=t,this.setAttribute("aria-haspopup","listbox"),this.setAttribute("aria-expanded",String(this.expanded)),this.$options.setProperties({value:this.value,options:this.options,selectable:this.selectable,position:this.direction})}}IoOptionMenu.Register();class IoContextMenu extends IoElement{static get Properties(){return{value:null,options:{type:Array,observe:!0},expanded:Boolean,position:"pointer",button:0,selectable:!1,$options:IoMenuOptions}}get compose(){return{$options:{$parent:this,value:this.bind("value"),expanded:this.bind("expanded"),selectable:this.bind("selectable"),options:this.options,position:this.position,"on-io-menu-item-clicked":this._onOptionItemClicked}}}connectedCallback(){super.connectedCallback(),IoLayerSingleton.appendChild(this.$options),IoLayerSingleton.addEventListener("pointermove",this._onLayerPointermove),this._parent=this.parentElement,this._parent.style.userSelect="none",this._parent.style.webkitUserSelect="none",this._parent.style.webkitTouchCallout="default",this._parent.addEventListener("contextmenu",this._onContextmenu),this._parent.addEventListener("pointerdown",this._onPointerdown),this._parent.addEventListener("click",this._onClick)}disconnectedCallback(){super.disconnectedCallback(),IoLayerSingleton.removeChild(this.$options),IoLayerSingleton.removeEventListener("pointermove",this._onLayerPointermove),this._parent.style.userSelect=null,this._parent.style.webkitUserSelect=null,this._parent.style.webkitTouchCallout=null,this._parent.removeEventListener("contextmenu",this._onContextmenu),this._parent.removeEventListener("pointerdown",this._onPointerdown),this._parent.removeEventListener("click",this._onClick)}getBoundingClientRect(){return this._parent.getBoundingClientRect()}_onOptionItemClicked(t){t.composedPath()[0]!==this&&(t.stopPropagation(),this.set("value",t.detail.value),this.dispatchEvent("item-clicked",t.detail,!0),this.expanded=!1)}_onContextmenu(t){t.preventDefault(),2===this.button&&this.expand(t)}_onPointerdown(t){IoLayerSingleton.x=t.clientX,IoLayerSingleton.y=t.clientY,this._parent.setPointerCapture(t.pointerId),this._parent.addEventListener("pointermove",this._onPointermove),this._parent.addEventListener("pointerup",this._onPointerup),"mouse"===t.pointerType&&t.button===this.button&&2!==t.button&&this.expand(t),clearTimeout(this._contextTimeout),this._contextTimeout=setTimeout(()=>{t.preventDefault(),this.expand(t)},1e3)}_onPointermove(t){if(clearTimeout(this._contextTimeout),this.expanded){const e=this.$options.querySelector("io-menu-item");e&&e._onPointermove(t)}}_onPointerup(){if(clearTimeout(this._contextTimeout),this.expanded){const t=this.$options.querySelector("io-menu-item");t&&t._onPointerup(event)}this._parent.releasePointerCapture(event.pointerId),this._parent.removeEventListener("pointermove",this._onPointermove),this._parent.removeEventListener("pointerup",this._onPointerup)}_onLayerPointermove(t){this.expanded&&this._onPointermove(t)}_onClick(t){t.button===this.button&&2!==t.button&&this.expand(t)}expand(){!this.expanded&&this.options.length&&(this.expanded=!0)}}IoContextMenu.Register();class IoVector extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t:host > io-number {\n\t\t\twidth: inherit;\n\t\t\tflex: 1 1;\n\t\t}\n\t\t:host > *:not(:last-child) {\n\t\t\tmargin-right: var(--io-spacing);\n\t\t}\n\t\t:host > io-boolean {\n\t\t\twidth: var(--io-line-height) !important;\n\t\t}\n\t\t"}static get Properties(){return{value:{value:[0,0,0,0],observe:!0},conversion:1,step:.001,min:-1/0,max:1/0,linkable:!1,linked:!1,components:{type:Array,notify:!1}}}_onValueSet(t){const e=t.composedPath()[0].id,o=t.detail.value,n=t.detail.oldValue;if(this.value[e]=o,this.linked){const t=o/n;for(let i in this.components){const s=this.components[i];0===n?this.value[s]=o:s!==e&&(this.value[s]*=t)}}const i={object:this.value,property:this.linked?null:e,value:o,oldValue:n};this.dispatchEvent("object-mutated",i,!1,window)}valueChanged(){this.components=Object.keys(this.value).filter(t=>"number"==typeof this.value[t])}changed(){const t=[];for(let e in this.components){const o=this.components[e];void 0!==this.value[o]&&t.push(["io-number",{id:o,value:this.value[o],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:!0,"on-value-set":this._onValueSet}])}t.push(this.getSlotted()),this.template(t)}getSlotted(){return this.linkable?["io-boolicon",{value:this.bind("linked"),true:"icons:link",false:"icons:unlink"}]:null}}IoVector.Register();class IoMatrix extends IoElement{static get Style(){return'\n\t\t:host {\n\t\t\tdisplay: grid;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t\tgrid-gap: var(--io-spacing);\n\t\t}\n\t\t:host[columns="4"] {\n\t\t\tgrid-template-columns: repeat(4, 1fr);\n\t\t}\n\t\t:host[columns="3"] {\n\t\t\tgrid-template-columns: repeat(3, 1fr);\n\t\t}\n\t\t:host[columns="2"] {\n\t\t\tgrid-template-columns: repeat(2, 1fr);\n\t\t}\n\t\t:host > io-number {\n\t\t\twidth: inherit;\n\t\t}\n\t\t'}static get Properties(){return{value:{value:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],observe:!0},step:.001,components:{type:Array,notify:!1},columns:{value:4,reflect:1}}}_onValueSet(t){if(t.detail.object)return;const e=t.composedPath()[0].id,o=t.detail.value,n=t.detail.oldValue;this.value[e]=o;const i={object:this.value,property:e,value:o,oldValue:n};this.dispatchEvent("object-mutated",i,!1,window)}valueChanged(){let t;4===this.value.length&&(t=[0,1,2,3],this.columns=2),9===this.value.length&&(t=[0,1,2,3,4,5,6,7,8],this.columns=3),16===this.value.length&&(t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],this.columns=4),this.components=t}changed(){const t=[];for(let e in this.components){const o=this.components[e];void 0!==this.value[o]&&t.push(["io-number",{id:o,value:this.value[o],step:this.step,"on-value-set":this._onValueSet}])}this.template(t)}}IoMatrix.Register();class Config{constructor(t){for(let e=0;e<t.length;e++)this.registerConfig(t[e].constructor.Config||{})}registerConfig(t){for(let e in t)this[e]=this[e]||[],this[e]=[t[e][0]||this[e][0],Object.assign(this[e][1]||{},t[e][1]||{})]}getConfig(t,e){const o=Object.getOwnPropertyNames(t),n=[];let i=t.__proto__;for(;i;)n.push(i.constructor.name),o.push(...Object.keys(i)),i=i.__proto__;const s={};for(let t in this){const e=t.split("|");1===e.length&&e.splice(0,0,"Object"),-1!==n.indexOf(e[0])&&(s[e[1]]=this[t])}for(let t in e){const o=t.split("|");1===o.length&&o.splice(0,0,"Object"),-1!==n.indexOf(o[0])&&(s[o[1]]=e[t])}const r={};for(let e=0;e<o.length;e++){const n=o[e],i=t[n]instanceof Binding?t[n].value:t[n],a=null===i?"null":typeof i,l=null!=i&&i.constructor?i.constructor.name:"null";if("function"==a)continue;const h="type:"+a,c="constructor:"+l,d=n.replace("type:","").replace("constructor:","");r[n]=null,s[h]&&(r[n]=s[h]),s[c]&&(r[n]=s[c]),s[d]&&(r[n]=s[d])}return r}}class Groups{constructor(t){for(let e=0;e<t.length;e++)this.registerGroups(t[e].constructor.Groups||{})}registerGroups(t){for(let e in t)this[e]=this[e]||[],this[e]=[...this[e],...t[e]]}getGroups(t,e){const o=Object.getOwnPropertyNames(t),n=[];let i=t.__proto__;for(;i;)n.push(i.constructor.name),o.push(...Object.keys(i)),i=i.__proto__;const s={};for(let t in this){const e=t.split("|");1===e.length&&e.splice(0,0,"Object"),-1!==n.indexOf(e[0])&&(s[e[1]]=s[e[1]]||[],s[e[1]].push(...this[t]))}for(let t in e){const o=t.split("|");1===o.length&&o.splice(0,0,"Object"),-1!==n.indexOf(o[0])&&(s[o[1]]=s[o[1]]||[],s[o[1]].push(...e[t]))}const r={},a=[];for(let t in s){r[t]=r[t]||[];for(let e in s[t]){const n=s[t][e],i=new RegExp(n);for(let e=0;e<o.length;e++){const s=o[e];"string"==typeof n?s==n&&-1==a.indexOf(s)&&(r[t].push(s),a.push(s)):"object"==typeof n&&i.exec(s)&&-1==a.indexOf(s)&&(r[t].push(s),a.push(s))}}}0===a.length&&(r.properties=o);for(let t in r)0===r[t].length&&delete r[t];return delete r.hidden,r}}class IoBreadcrumbs extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex: 0 0 auto;\n\t\t\tflex-direction: row;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tpadding: var(--io-spacing);\n\t\t\tcolor: var(--io-color-field);\n\t\t\tbackground-color: var(--io-background-color-field);\n\t\t\tpadding: var(--io-spacing);\n\t\t}\n\t\t:host > io-item {\n\t\t\tpadding: var(--io-spacing);\n\t\t}\n\t\t:host > io-item:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\t:host > io-item:first-of-type {\n\t\t\toverflow: visible;\n\t\t\ttext-overflow: clip;\n\t\t\tmargin-left: var(--io-spacing);\n\t\t}\n\t\t:host > io-item:last-of-type {\n\t\t\toverflow: visible;\n\t\t\ttext-overflow: clip;\n\t\t\tmargin-right: var(--io-spacing);\n\t\t}\n\t\t:host > io-item:not(:first-of-type):before {\n\t\t\tcontent: '>';\n\t\t\tmargin: 0 var(--io-spacing);\n\t\t\tpadding: 0 var(--io-spacing) 0 0;\n\t\t\topacity: 0.25;\n\t\t}\n\t\t"}static get Properties(){return{value:Object,selected:null,options:{type:Array,observe:!0}}}_onClick(t){this.set("selected",this.options[t.detail.value])}valueChanged(){this.options.length=0,this.options.push(this.value)}selectedChanged(){const t=this.options.indexOf(this.selected);-1!==t?this.options.length=t+1:this.options.push(this.selected)}changed(){const t=[];for(let e=0;e<this.options.length;e++)t.push(["io-item",{value:e,label:getLabel(this.options[e]),"on-item-clicked":this._onClick}]);this.template(t)}}function getLabel(t){return t instanceof Array?String(`${t.constructor.name} (${t.length})`):"object"==typeof t?String(`${t.constructor.name}`):String(t)}IoBreadcrumbs.Register();class IoInspector extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\t@apply --io-column;\n\t\t}\n\t\t:host > io-breadcrumbs {\n\t\t\tmargin-bottom: var(--io-spacing);\n\t\t}\n\t\t:host > io-object > io-boolean {\n\t\t\ttext-transform: capitalize;\n\t\t}\n\t\t:host > io-object > io-properties {\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tbackground-color: var(--io-background-color) !important;\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tbox-shadow: var(--io-shadow-inset);\n\t\t\tpadding: var(--io-spacing);\n\t\t}\n\t\t:host io-properties > io-item {\n\t\t\tcolor: var(--io-color-link);\n\t\t}\n\t\t:host io-properties > io-item:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\t"}static get Properties(){return{value:{type:Object,observe:!0},selected:{type:Object,observe:!0},groups:Object,config:Object,autoExpand:["properties","values"]}}static get Listeners(){return{"item-clicked":"_onSetInspectorValue"}}constructor(t){super(t),Object.defineProperty(this,"uuid",{value:null,writable:!0})}_onSetInspectorValue(t){t.stopPropagation();const e=t.detail.value;e&&"object"==typeof e&&this.set("selected",e)}valueChanged(){this.selected=this.value}changed(){this._changedThrottled()}_changedThrottled(){this.throttle(this._changed,null,!0)}_changed(){this.uuid=genUUID(this.selected);const t=[["io-breadcrumbs",{value:this.value,selected:this.bind("selected"),trim:!0}]],e=this.__proto__.__groups.getGroups(this.selected,this.groups),o=this.__proto__.__config.getConfig(this.selected,this.config);for(let n in e){const i=-1!==this.autoExpand.indexOf(n);t.push(["io-object",{label:n,expanded:IoStorageFactory({value:i,storage:"local",key:this.uuid+"-"+n}),value:this.selected,properties:e[n],config:o}])}this.template(t)}static get Config(){return{"type:object":["io-item"],"type:null":["io-item"]}}static get Groups(){return{"Object|hidden":[/^_/],"Object|other":[/^/],"HTMLElement|hidden":[/^on/,/^[A-Z0-9_]*$/,"childElementCount"],"HTMLElement|info":["localName","tagName","nodeName",/class/i,/attribute/i],"HTMLElement|content":[/content/i,/inner/i,/outer/i],"HTMLElement|display":[/width/i,/height/i,/top/i,/left/i,/scroll/i,/style/i],"HTMLElement|hierarchy":[/parent/i,/child/i,/element/i,/root/i,/slot/i,/sibling/i,/document/i]}}}function genUUID(t){let e="io-object-collapse-state-"+t.constructor.name;e+="-"+t.guid||t.uuid||t.id||"";const o=JSON.stringify(Object.keys(t));let n=0;for(let t=0;t<o.length;t++)n=(n<<5)-n+o.charCodeAt(t),n|=0;return e+="-"+(n=(-n).toString(16))}IoInspector.Register=function(){IoElement.Register.call(this),Object.defineProperty(this.prototype,"__config",{value:new Config(this.prototype.__protochain)}),Object.defineProperty(this.prototype,"__groups",{value:new Groups(this.prototype.__protochain)})},IoInspector.RegisterConfig=function(t){this.prototype.__config.registerConfig(t)},IoInspector.RegisterGroups=function(t){this.prototype.__groups.registerGroups(t)},IoInspector.Register(),IoInspector.RegisterGroups({"Array|values":[/^[0-9]+$/]});class IoProperties extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: grid;\n\t\t\tgrid-gap: var(--io-spacing);\n\t\t\tjustify-self: stretch;\n\t\t\tjustify-items: start;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t\t:host[horizontal] {\n\t\t\tgrid-auto-flow: column;\n\t\t\tgrid-template-rows: auto;\n\t\t}\n\t\t:host[horizontal][labeled] {\n\t\t\tgrid-template-rows: auto auto;\n\t\t}\n\t\t:host:not([horizontal]) {\n\t\t\tgrid-template-columns: auto;\n\t\t}\n\t\t:host:not([horizontal])[labeled] {\n\t\t\tgrid-template-columns: auto minmax(50%, 1fr);\n\t\t}\n\t\t:host:not([horizontal])[labeled] > :nth-child(2n-1) {\n\t\t\tmax-width: 100%;\n\t\t}\n\t\t:host > io-object {}\n\t\t:host > io-object {\n\t\t\tpadding: 0;\n\t\t\tborder: var(--io-border);\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder-color: transparent;\n\t\t\tbackground-color: transparent;\n\t\t\tbackground-image: none;\n\t\t}\n\t\t:host > io-object,\n\t\t:host > io-properties,\n\t\t:host > io-number,\n\t\t:host > io-string {\n\t\t\twidth: auto;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t:host io-properties {\n\t\t\tborder: 0 !important;\n\t\t\tborder-radius: 0 !important;\n\t\t\tbox-shadow: none !important;\n\t\t}\n\t\t"}static get Properties(){return{labeled:{value:!0,reflect:1},horizontal:{value:!1,reflect:1},value:{type:Object,observe:!0},properties:Array,config:Object}}static get Config(){return{"type:string":["io-string",{}],"type:number":["io-number",{step:1e-7}],"type:boolean":["io-boolean",{}],"type:object":["io-object",{}],"type:null":["io-string",{}],"type:undefined":["io-string",{}]}}_onValueSet(t){if(t.detail.object)return;const e=t.composedPath()[0];if(e===this)return;t.stopImmediatePropagation();const o=e.id;if(null!==o&&"value"===t.detail.property){const e=t.detail.value,n=t.detail.oldValue;this.value[o]=e;const i={object:this.value,property:o,value:e,oldValue:n};this.dispatchEvent("object-mutated",i,!1,window)}}valueMutated(){clearTimeout(this._cfgTimeout),this._cfgTimeout=setTimeout(()=>{this._updateChildren()},1e3/30)}_updateChildren(){const t=this.querySelectorAll(":scope > *, io-properties > *"),e=this.filterObjects(this.value,t=>"object"==typeof t,1);for(let o=0;o<t.length;o++){const n=t[o];"object"==typeof n.value&&-1!==e.indexOf(n.value)&&n.changed&&n.changed()}}changed(){this._changedThrottled()}_changedThrottled(){this.throttle(this._changed,null,!0)}_changed(){const t=this.__proto__.__config.getConfig(this.value,this.config),e=[];for(let o in t)if(!this.properties.length||-1!==this.properties.indexOf(o)){const n=t[o][0],i=t[o][1],s=t[o].label||o,r={title:s,id:o,value:this.value[o],"on-value-set":this._onValueSet};r.config=this.config,e.push(this.labeled?["span",{class:"io-item"},s+":"]:null,[n,Object.assign(r,i)])}this.template(e)}}IoProperties.Register=function(){IoElement.Register.call(this),Object.defineProperty(this.prototype,"__config",{value:new Config(this.prototype.__protochain)})},IoProperties.RegisterConfig=function(t){this.prototype.__config.registerConfig(t)},IoProperties.Register();class IoObject extends IoElement{static get Style(){return'\n\t\t:host {\n\t\t\t@apply --io-panel;\n\t\t}\n\t\t:host > io-boolean {\n\t\t\talign-self: stretch;\n\t\t}\n\t\t:host > io-boolean:before {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 1.125em;\n\t\t\tcontent: "▸"\n\t\t}\n\t\t:host > io-boolean[value]:before {\n\t\t\tcontent: "▾";\n\t\t}\n\t\t:host > io-boolean[value] {\n\t\t\tmargin-bottom: var(--io-spacing);\n\t\t}\n\t\t'}static get Properties(){return{value:Object,properties:Array,config:Object,labeled:!0,label:{reflect:1},expanded:{type:Boolean,reflect:1},role:"region"}}changed(){const t=this.label||this.value.constructor.name,e=[["io-boolean",{true:t,false:t,value:this.bind("expanded")}]];this.expanded&&e.push(["io-properties",{value:this.value,properties:this.properties,config:this.config,labeled:this.labeled}]),this.template(e),this.setAttribute("aria-expanded",String(this.expanded))}}IoObject.Register();
/**@License
 * Copyright (c) 2011-2016 Heather Arthur <fayearthur@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
const convert={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(const t of Object.keys(convert)){if(!("channels"in convert[t]))throw new Error("missing channels property: "+t);if(!("labels"in convert[t]))throw new Error("missing channel labels property: "+t);if(convert[t].labels.length!==convert[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:o}=convert[t];delete convert[t].channels,delete convert[t].labels,Object.defineProperty(convert[t],"channels",{value:e}),Object.defineProperty(convert[t],"labels",{value:o})}convert.rgb.hsl=function(t){const e=t[0]/255,o=t[1]/255,n=t[2]/255,i=Math.min(e,o,n),s=Math.max(e,o,n),r=s-i;let a,l;s===i?a=0:e===s?a=(o-n)/r:o===s?a=2+(n-e)/r:n===s&&(a=4+(e-o)/r),(a=Math.min(60*a,360))<0&&(a+=360);const h=(i+s)/2;return[a,100*(l=s===i?0:h<=.5?r/(s+i):r/(2-s-i)),100*h]},convert.rgb.hsv=function(t){let e,o,n,i,s;const r=t[0]/255,a=t[1]/255,l=t[2]/255,h=Math.max(r,a,l),c=h-Math.min(r,a,l),d=function(t){return(h-t)/6/c+.5};return 0===c?(i=0,s=0):(s=c/h,e=d(r),o=d(a),n=d(l),r===h?i=n-o:a===h?i=1/3+e-n:l===h&&(i=2/3+o-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*h]},convert.rgb.hwb=function(t){const e=t[0],o=t[1];let n=t[2];return[convert.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(o,n))),100*(n=1-1/255*Math.max(e,Math.max(o,n)))]},convert.rgb.cmyk=function(t){const e=t[0]/255,o=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-o,1-n);return[100*((1-e-i)/(1-i)||0),100*((1-o-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},convert.rgb.xyz=function(t){let e=t[0]/255,o=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?((e+.055)/1.055)**2.4:e/12.92)+.3576*(o=o>.04045?((o+.055)/1.055)**2.4:o/12.92)+.1805*(n=n>.04045?((n+.055)/1.055)**2.4:n/12.92)),100*(.2126*e+.7152*o+.0722*n),100*(.0193*e+.1192*o+.9505*n)]},convert.rgb.lab=function(t){const e=convert.rgb.xyz(t);let o=e[0],n=e[1],i=e[2];return[116*(n=(n/=100)>.008856?n**(1/3):7.787*n+16/116)-16,500*((o=(o/=95.047)>.008856?o**(1/3):7.787*o+16/116)-n),200*(n-(i=(i/=108.883)>.008856?i**(1/3):7.787*i+16/116))]},convert.hsl.rgb=function(t){const e=t[0]/360,o=t[1]/100,n=t[2]/100;let i,s,r;if(0===o)return[r=255*n,r,r];const a=2*n-(i=n<.5?n*(1+o):n+o-n*o),l=[0,0,0];for(let t=0;t<3;t++)(s=e+1/3*-(t-1))<0&&s++,s>1&&s--,r=6*s<1?a+6*(i-a)*s:2*s<1?i:3*s<2?a+(i-a)*(2/3-s)*6:a,l[t]=255*r;return l},convert.hsl.hsv=function(t){const e=t[0];let o=t[1]/100,n=t[2]/100,i=o;const s=Math.max(n,.01);return o*=(n*=2)<=1?n:2-n,i*=s<=1?s:2-s,[e,100*(0===n?2*i/(s+i):2*o/(n+o)),100*((n+o)/2)]},convert.hsv.rgb=function(t){const e=t[0]/60,o=t[1]/100;let n=t[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),r=255*n*(1-o),a=255*n*(1-o*s),l=255*n*(1-o*(1-s));switch(n*=255,i){case 0:return[n,l,r];case 1:return[a,n,r];case 2:return[r,n,l];case 3:return[r,a,n];case 4:return[l,r,n];case 5:return[n,r,a]}},convert.hsv.hsl=function(t){const e=t[0],o=t[1]/100,n=t[2]/100,i=Math.max(n,.01);let s,r;r=(2-o)*n;const a=(2-o)*i;return s=o*i,[e,100*(s=(s/=a<=1?a:2-a)||0),100*(r/=2)]},convert.hwb.rgb=function(t){const e=t[0]/360;let o=t[1]/100,n=t[2]/100;const i=o+n;let s;i>1&&(o/=i,n/=i);const r=Math.floor(6*e),a=1-n;s=6*e-r,0!=(1&r)&&(s=1-s);const l=o+s*(a-o);let h,c,d;switch(r){default:case 6:case 0:h=a,c=l,d=o;break;case 1:h=l,c=a,d=o;break;case 2:h=o,c=a,d=l;break;case 3:h=o,c=l,d=a;break;case 4:h=l,c=o,d=a;break;case 5:h=a,c=o,d=l}return[255*h,255*c,255*d]},convert.cmyk.rgb=function(t){const e=t[0]/100,o=t[1]/100,n=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,o*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},convert.xyz.rgb=function(t){const e=t[0]/100,o=t[1]/100,n=t[2]/100;let i,s,r;return i=(i=3.2406*e+-1.5372*o+-.4986*n)>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=(s=-.9689*e+1.8758*o+.0415*n)>.0031308?1.055*s**(1/2.4)-.055:12.92*s,r=(r=.0557*e+-.204*o+1.057*n)>.0031308?1.055*r**(1/2.4)-.055:12.92*r,[255*(i=Math.min(Math.max(0,i),1)),255*(s=Math.min(Math.max(0,s),1)),255*(r=Math.min(Math.max(0,r),1))]},convert.xyz.lab=function(t){let e=t[0],o=t[1],n=t[2];return[116*(o=(o/=100)>.008856?o**(1/3):7.787*o+16/116)-16,500*((e=(e/=95.047)>.008856?e**(1/3):7.787*e+16/116)-o),200*(o-(n=(n/=108.883)>.008856?n**(1/3):7.787*n+16/116))]},convert.lab.xyz=function(t){let e,o,n;const i=(o=(t[0]+16)/116)**3,s=(e=t[1]/500+o)**3,r=(n=o-t[2]/200)**3;return o=i>.008856?i:(o-16/116)/7.787,e=s>.008856?s:(e-16/116)/7.787,n=r>.008856?r:(n-16/116)/7.787,[e*=95.047,o*=100,n*=108.883]},convert.lab.lch=function(t){const e=t[0],o=t[1],n=t[2];let i;return(i=360*Math.atan2(n,o)/2/Math.PI)<0&&(i+=360),[e,Math.sqrt(o*o+n*n),i]},convert.lch.lab=function(t){const e=t[0],o=t[1],n=t[2]/360*2*Math.PI;return[e,o*Math.cos(n),o*Math.sin(n)]},convert.rgb.ansi16=function(t,e=null){const[o,n,i]=t;let s=null===e?convert.rgb.hsv(t)[2]:e;if(0===(s=Math.round(s/50)))return 30;let r=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(o/255));return 2===s&&(r+=60),r},convert.hsv.ansi16=function(t){return convert.rgb.ansi16(convert.hsv.rgb(t),t[2])},convert.rgb.ansi256=function(t){const e=t[0],o=t[1],n=t[2];return e===o&&o===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(o/255*5)+Math.round(n/255*5)},convert.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];const o=.5*(1+~~(t>50));return[(1&e)*o*255,(e>>1&1)*o*255,(e>>2&1)*o*255]},convert.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;return t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},convert.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},convert.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let o=e[0];3===e[0].length&&(o=o.split("").map(t=>t+t).join(""));const n=parseInt(o,16);return[n>>16&255,n>>8&255,255&n]},convert.rgb.hcg=function(t){const e=t[0]/255,o=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,o),n),s=Math.min(Math.min(e,o),n),r=i-s;let a,l;return l=r<=0?0:i===e?(o-n)/r%6:i===o?2+(n-e)/r:4+(e-o)/r+4,l/=6,[360*(l%=1),100*r,100*(a=r<1?s/(1-r):0)]},convert.hsl.hcg=function(t){const e=t[1]/100,o=t[2]/100,n=o<.5?2*e*o:2*e*(1-o);let i=0;return n<1&&(i=(o-.5*n)/(1-n)),[t[0],100*n,100*i]},convert.hsv.hcg=function(t){const e=t[1]/100,o=t[2]/100,n=e*o;let i=0;return n<1&&(i=(o-n)/(1-n)),[t[0],100*n,100*i]},convert.hcg.rgb=function(t){const e=t[0]/360,o=t[1]/100,n=t[2]/100;if(0===o)return[255*n,255*n,255*n];const i=[0,0,0],s=e%1*6,r=s%1,a=1-r;let l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=r,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=r;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=r,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-o)*n,[255*(o*i[0]+l),255*(o*i[1]+l),255*(o*i[2]+l)]},convert.hcg.hsv=function(t){const e=t[1]/100,o=e+t[2]/100*(1-e);let n=0;return o>0&&(n=e/o),[t[0],100*n,100*o]},convert.hcg.hsl=function(t){const e=t[1]/100,o=t[2]/100*(1-e)+.5*e;let n=0;return o>0&&o<.5?n=e/(2*o):o>=.5&&o<1&&(n=e/(2*(1-o))),[t[0],100*n,100*o]},convert.hcg.hwb=function(t){const e=t[1]/100,o=e+t[2]/100*(1-e);return[t[0],100*(o-e),100*(1-o)]},convert.hwb.hcg=function(t){const e=t[1]/100,o=1-t[2]/100,n=o-e;let i=0;return n<1&&(i=(o-n)/(1-n)),[t[0],100*n,100*i]},convert.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},convert.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},convert.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},convert.gray.hsl=function(t){return[0,0,t[0]]},convert.gray.hsv=convert.gray.hsl,convert.gray.hwb=function(t){return[0,100,t[0]]},convert.gray.cmyk=function(t){return[0,0,0,t[0]]},convert.gray.lab=function(t){return[t[0],0,0]},convert.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),o=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(o.length)+o},convert.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const IoColorMixin=t=>{const e=class extends t{static get Properties(){return{value:{value:[1,1,1,1],observe:!0},rgb:[1,1,1],hsv:[1,1,1],hsl:[1,1,1],cmyk:[1,1,1,1],alpha:1,mode:0}}static get GlUtils(){return"\n\t\t\tvec3 hue2rgb(float hue) {\n\t\t\t\thue=fract(hue);\n\t\t\t\tfloat R = abs(hue * 6. - 3.) - 1.;\n\t\t\t\tfloat G = 2. - abs(hue * 6. - 2.);\n\t\t\t\tfloat B = 2. - abs(hue * 6. - 4.);\n\t\t\t\treturn saturate(vec3(R,G,B));\n\t\t\t}\n\t\t\tvec3 hsv2rgb(vec3 hsv) {\n\t\t\t\tvec3 rgb = hue2rgb(hsv.r);\n\t\t\t\treturn ((rgb - 1.) * hsv.g + 1.) * hsv.b;\n\t\t\t}\n\t\t\tvec3 hsl2rgb(vec3 hsl) {\n\t\t\t\tvec3 rgb = hue2rgb(hsl.x);\n\t\t\t\tfloat C = (1. - abs(2. * hsl.z - 1.)) * hsl.y;\n\t\t\t\treturn (rgb - 0.5) * C + hsl.z;\n\t\t\t}\n\t\t\tvec3 cmyk2rgb(vec4 cmyk) {\n\t\t\t\tfloat r = 1. - min(1., cmyk.x * (1. - cmyk.w) + cmyk.w);\n\t\t\t\tfloat g = 1. - min(1., cmyk.y * (1. - cmyk.w) + cmyk.w);\n\t\t\t\tfloat b = 1. - min(1., cmyk.z * (1. - cmyk.w) + cmyk.w);\n\t\t\t\treturn vec3(r, g, b);\n\t\t\t}\n\t\t\t\n\n"}valueMutated(){this.valueChanged()}modeChanged(){this.valueChanged()}setValueFromRgb(){const t=Object.keys(this.value);switch(this.mode){case 0:this.value[t[0]]=this.rgb[0],this.value[t[1]]=this.rgb[1],this.value[t[2]]=this.rgb[2];break;case 1:{const e=convert.rgb.hsv([255*this.rgb[0],255*this.rgb[1],255*this.rgb[2]]);this.value[t[0]]=e[0]/360,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100;break}case 2:{const e=convert.rgb.hsl([255*this.rgb[0],255*this.rgb[1],255*this.rgb[2]]);this.value[t[0]]=e[0]/360,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100;break}case 3:{const e=convert.rgb.cmyk([255*this.rgb[0],255*this.rgb[1],255*this.rgb[2]]);this.value[t[0]]=e[0]/100,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100,this.value[t[3]]=e[3]/100;break}}this._notifyValueChange()}setValueFromHsv(){const t=Object.keys(this.value);switch(this.mode){case 0:{const e=convert.hsv.rgb([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]);this.value[t[0]]=e[0]/255,this.value[t[1]]=e[1]/255,this.value[t[2]]=e[2]/255;break}case 1:this.value[t[0]]=this.hsv[0],this.value[t[1]]=this.hsv[1],this.value[t[2]]=this.hsv[2];break;case 2:{const e=convert.rgb.hsl(convert.hsv.rgb([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]));this.value[t[0]]=e[0]/360,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100;break}case 3:{const e=convert.rgb.cmyk(convert.hsv.rgb([360*this.hsv[0],100*this.hsv[1],100*this.hsv[2]]));this.value[t[0]]=e[0]/100,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100,this.value[t[3]]=e[3]/100;break}}this._notifyValueChange()}setValueFromHsl(){const t=Object.keys(this.value);switch(this.mode){case 0:{const e=convert.hsl.rgb([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]);this.value[t[0]]=e[0]/255,this.value[t[1]]=e[1]/255,this.value[t[2]]=e[2]/255;break}case 1:{const e=convert.rgb.hsv(convert.hsl.rgb([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]));this.value[t[0]]=e[0]/360,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100;break}case 2:this.value[t[0]]=this.hsl[0],this.value[t[1]]=this.hsl[1],this.value[t[2]]=this.hsl[2];break;case 3:{const e=convert.rgb.cmyk(convert.hsl.rgb([360*this.hsl[0],100*this.hsl[1],100*this.hsl[2]]));this.value[t[0]]=e[0]/100,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100,this.value[t[3]]=e[3]/100;break}}this._notifyValueChange()}setValueFromCmyk(){const t=Object.keys(this.value);switch(this.mode){case 0:{const e=convert.cmyk.rgb([100*this.cmyk[0],100*this.cmyk[1],100*this.cmyk[2],100*this.cmyk[3]]);this.value[t[0]]=e[0]/255,this.value[t[1]]=e[1]/255,this.value[t[2]]=e[2]/255;break}case 1:{const e=convert.rgb.hsv(convert.cmyk.rgb([100*this.cmyk[0],100*this.cmyk[1],100*this.cmyk[2],100*this.cmyk[3]]));this.value[t[0]]=e[0]/360,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100;break}case 2:{const e=convert.rgb.hsl(convert.cmyk.rgb([100*this.cmyk[0],100*this.cmyk[1],100*this.cmyk[2],100*this.cmyk[3]]));this.value[t[0]]=e[0]/360,this.value[t[1]]=e[1]/100,this.value[t[2]]=e[2]/100;break}case 3:this.value[t[0]]=this.cmyk[0],this.value[t[1]]=this.cmyk[1],this.value[t[2]]=this.cmyk[2],this.value[t[3]]=this.cmyk[3]}this._notifyValueChange()}valueChanged(){let t=Object.keys(this.value),e=this.mode;-1!==t.indexOf("r")?e=0:-1!==t.indexOf("h")&&-1!==t.indexOf("v")?e=1:-1!==t.indexOf("h")&&-1!==t.indexOf("l")?e=2:-1!==t.indexOf("c")&&(e=3);const o=[];for(let e=0;e<t.length;e++)o.push(this.value[t[e]]);let n,i,s,r,a=void 0;switch(e){case 3:r=[100*o[0],100*o[1],100*o[2],100*o[3]],n=convert.cmyk.rgb(r),i=convert.rgb.hsv(convert.cmyk.rgb(r)),s=convert.rgb.hsl(convert.cmyk.rgb(r)),void 0!==o[4]&&(a=100*o[4]);break;case 2:s=[360*o[0],100*o[1],100*o[2]],n=convert.hsl.rgb(s),i=convert.hsl.hsv(s),r=convert.rgb.cmyk(convert.hsl.rgb(s)),void 0!==o[3]&&(a=100*o[3]);break;case 1:i=[360*o[0],100*o[1],100*o[2]],n=convert.hsv.rgb(i),s=convert.hsv.hsl(i),r=convert.rgb.cmyk(convert.hsv.rgb(i)),void 0!==o[3]&&(a=100*o[3]);break;case 0:default:n=[255*o[0],255*o[1],255*o[2]],i=convert.rgb.hsv(n),s=convert.rgb.hsl(n),r=convert.rgb.cmyk(n),void 0!==o[3]&&(a=100*o[3])}0===i[1]&&(i[0]=360*this.hsv[0]),0===i[2]&&(i[1]=100*this.hsv[1]),0===s[1]&&(s[0]=360*this.hsl[0]),0!==s[2]&&100!==s[2]||(s[0]=360*this.hsl[0],s[1]=100*this.hsl[1]),100===r[3]&&(r[0]=100*this.cmyk[0],r[1]=100*this.cmyk[1],r[2]=100*this.cmyk[2]),this.setProperties({rgb:[n[0]/255,n[1]/255,n[2]/255],hsv:[i[0]/360,i[1]/100,i[2]/100],hsl:[s[0]/360,s[1]/100,s[2]/100],cmyk:[r[0]/100,r[1]/100,r[2]/100,r[3]/100],alpha:void 0!==a?a/100:void 0,mode:e})}};return e.Register=IoElement.Register,e};class IoColorSlider extends(IoColorMixin(IoSlider)){static get Properties(){return{value:[1,1,1,1],step:.001,min:0,max:1}}static get GlUtils(){return"\n\t\tvec4 paintColorSlider(vec2 position, vec3 color) {\n\t\t\t// return paintSlider(position, color);\n\t\t\tvec4 slotColor = vec4(.2, .2, .2, 1.);\n\t\t\tvec4 fillColor = vec4(.8, .8, .8, 1.);\n\t\t\tvec4 sliderColor = vec4(0.);\n\t\t\tfloat slotWidth = cssStrokeWidth * 1.5;\n\t\t\tfloat radius = cssItemHeight / 4.;\n\t\t\tfloat stroke = cssStrokeWidth;\n\t\t\tfloat strokeShape = min(circle(position, radius + stroke), rectangle(position - vec2(0., 2500.), vec2(slotWidth + stroke, 5000.)));\n\t\t\tsliderColor = mix(vec4(slotColor.rgb, 1.), sliderColor, strokeShape);\n\t\t\tfloat fillShape = min(circle(position, radius), rectangle(position - vec2(0., 2500.), vec2(slotWidth, 5000.)));\n\t\t\tsliderColor = mix(fillColor, sliderColor, fillShape);\n\t\t\tfloat colorShape = min(circle(position, radius - stroke), rectangle(position - vec2(0., 2500.), vec2(slotWidth - stroke, 5000.)));\n\t\t\tsliderColor = mix(vec4(color, 1.), sliderColor, colorShape);\n\t\t\treturn sliderColor;\n\t\t}\n\t\tvec4 paintColorSlider2D(vec2 position, vec3 color) {\n\t\t\tvec4 sliderColor = vec4(0.);\n\t\t\tfloat radius = cssItemHeight / 4.;\n\t\t\tfloat stroke = cssStrokeWidth;\n\t\t\tvec4 slotColor = vec4(.2, .2, .2, 1.);\n\t\t\tvec4 fillColor = vec4(.8, .8, .8, 1.);\n\t\t\tvec2 width = (uHorizontal == 1) ? vec2(stroke * 2., uSize.y) : vec2(uSize.x, stroke * 2.);\n\t\t\tfloat strokeShape = circle(position, radius + stroke);\n\t\t\tsliderColor = mix(slotColor, sliderColor, strokeShape);\n\t\t\tfloat fillShape = circle(position, radius);\n\t\t\tsliderColor = mix(fillColor, sliderColor, fillShape);\n\t\t\tfloat colorShape = circle(position, radius - stroke);\n\t\t\tsliderColor = mix(vec4(color, 1.), sliderColor, colorShape);\n\t\t\treturn sliderColor;\n\t\t}\n\t\t\n\n"}valueMutated(){this.valueChanged()}setAria(){}_onKeydown(t){super._onKeydown(t),this._notifyValueChange()}_setIncrease(){}_setDecrease(){}_setMin(){this._setValue(0,0)}_setMax(){this._setValue(1,1)}_onPointermoveThrottled(t){super._onPointermoveThrottled(t),this._notifyValueChange()}_notifyValueChange(){this.dispatchEvent("object-mutated",{object:this.value},!1,window),this.dispatchEvent("value-set",{property:"value",value:this.value},!1)}_setValue(){}}IoColorSlider.Register();class IoColorSliderRed extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = vec3(uv.x, uRgb[1], uRgb[2]);\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uRgb[0], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.rgb[0]=Math.min(1,this.rgb[0]+.01),this.setValueFromRgb()}_setDecrease(){this.rgb[0]=Math.max(0,this.rgb[0]-.01),this.setValueFromRgb()}_setValue(t){this.rgb[0]=t,this.setValueFromRgb()}}IoColorSliderRed.Register();class IoColorSliderGreen extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = vec3(uRgb[0], uv.x, uRgb[2]);\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uRgb[1], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.rgb[1]=Math.min(1,this.rgb[1]+.01),this.setValueFromRgb()}_setDecrease(){this.rgb[1]=Math.max(0,this.rgb[1]-.01),this.setValueFromRgb()}_setValue(t){this.rgb[1]=t,this.setValueFromRgb()}}IoColorSliderGreen.Register();class IoColorSliderBlue extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = vec3(uRgb[0], uRgb[1], uv.x);\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uRgb[2], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.rgb[2]=Math.min(1,this.rgb[2]+.01),this.setValueFromRgb()}_setDecrease(){this.rgb[2]=Math.max(0,this.rgb[2]-.01),this.setValueFromRgb()}_setValue(t){this.rgb[2]=t,this.setValueFromRgb()}}IoColorSliderBlue.Register();class IoColorSliderHue extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Hue spectrum\n\t\t\t\tvec3 finalColor = hsv2rgb(vec3(uv.x, uHsv[1], uHsv[2]));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uHsv[0], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.hsv[0]=Math.min(1,this.hsv[0]+.01),this.setValueFromHsv()}_setDecrease(){this.hsv[0]=Math.max(0,this.hsv[0]-.01),this.setValueFromHsv()}_setValue(t){this.hsv[0]=t,this.setValueFromHsv()}}IoColorSliderHue.Register();class IoColorSliderSaturation extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Saturation gradient\n\t\t\t\tvec3 finalColor = hsv2rgb(vec3(uHsv[0], uv.x, uHsv[2]));\n\t\t\t\tfloat saturation = uHsv[1];\n\t\t\t\tif (uMode == 2.0) {\n\t\t\t\t\tsaturation = uHsl[1];\n\t\t\t\t\tfinalColor = hsl2rgb(vec3(uHsl[0], uv.x, uHsl[2]));\n\t\t\t\t}\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * saturation, size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.hsv[1]=Math.min(1,this.hsv[1]+.01),this.setValueFromHsv()}_setDecrease(){this.hsv[1]=Math.max(0,this.hsv[1]-.01),this.setValueFromHsv()}_setValue(t){this.hsv[1]=t,this.setValueFromHsv()}}IoColorSliderSaturation.Register();class IoColorSliderValue extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = hsv2rgb(vec3(uHsv[0], uHsv[1], uv.x));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uHsv[2], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.hsv[2]=Math.min(1,this.hsv[2]+.01),this.setValueFromHsv()}_setDecrease(){this.hsv[2]=Math.max(0,this.hsv[2]-.01),this.setValueFromHsv()}_setValue(t){this.hsv[2]=t,this.setValueFromHsv()}}IoColorSliderValue.Register();class IoColorSliderLevel extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = hsl2rgb(vec3(uHsl[0], uHsl[1], uv.x));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uHsl[2], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.hsv[2]=Math.min(1,this.hsv[2]+.01),this.setValueFromHsl()}_setDecrease(){this.hsv[2]=Math.max(0,this.hsv[2]-.01),this.setValueFromHsl()}_setValue(t){this.hsl[2]=t,this.setValueFromHsl()}}IoColorSliderLevel.Register();class IoColorSliderHs extends IoColorSlider{static get Style(){return"\n\t\t:host {\n\t\t\tcursor: move !important;\n\t\t}\n\t\t"}static get Properties(){return{noscroll:!0}}static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// HS gradient\n\t\t\t\tvec3 finalColor = hsv2rgb(vec3(uv, uHsv[2]));\n\t\t\t\tif (uMode == 2.0) {\n\t\t\t\t\tfinalColor = hsl2rgb(vec3(uv, uHsl[2]));\n\t\t\t\t}\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uHsv[0], size.y * uHsv[1]));\n\t\t\t\tvec4 slider = paintColorSlider2D(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_onKeydown(t){t.shiftKey&&"ArrowLeft"===t.key?(t.preventDefault(),this.horizontal?this.hsv[0]=Math.max(0,this.hsv[0]-.01):this.hsv[1]=Math.max(0,this.hsv[1]-.01),this.setValueFromHsv()):t.shiftKey&&"ArrowUp"===t.key?(t.preventDefault(),this.horizontal?this.hsv[1]=Math.min(1,this.hsv[1]+.01):this.hsv[0]=Math.min(1,this.hsv[0]+.01),this.setValueFromHsv()):t.shiftKey&&"ArrowRight"===t.key?(t.preventDefault(),this.horizontal?this.hsv[0]=Math.min(1,this.hsv[0]+.01):this.hsv[1]=Math.min(1,this.hsv[1]+.01),this.setValueFromHsv()):t.shiftKey&&"ArrowDown"===t.key?(t.preventDefault(),this.horizontal?this.hsv[1]=Math.max(0,this.hsv[1]-.01):this.hsv[0]=Math.max(0,this.hsv[0]-.01),this.setValueFromHsv()):super._onKeydown(t)}_setValue(t,e){this.hsv[0]=t,this.hsv[1]=e,this.setValueFromHsv()}}IoColorSliderHs.Register();class IoColorSliderSv extends IoColorSlider{static get Style(){return"\n\t\t:host {\n\t\t\tcursor: move !important;\n\t\t}\n\t\t"}static get Properties(){return{noscroll:!0}}static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// SV gradient\n\t\t\t\tvec3 finalColor = hsv2rgb(vec3(uHsv[0], uv));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uHsv[1], size.y * uHsv[2]));\n\t\t\t\tvec4 slider = paintColorSlider2D(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_onKeydown(t){t.shiftKey&&"ArrowLeft"===t.key?(t.preventDefault(),this.horizontal?this.hsv[1]=Math.max(0,this.hsv[1]-.01):this.hsv[2]=Math.max(0,this.hsv[2]-.01),this.setValueFromHsv()):t.shiftKey&&"ArrowUp"===t.key?(t.preventDefault(),this.horizontal?this.hsv[2]=Math.min(1,this.hsv[2]+.01):this.hsv[1]=Math.min(1,this.hsv[1]+.01),this.setValueFromHsv()):t.shiftKey&&"ArrowRight"===t.key?(t.preventDefault(),this.horizontal?this.hsv[1]=Math.min(1,this.hsv[1]+.01):this.hsv[2]=Math.min(1,this.hsv[2]+.01),this.setValueFromHsv()):t.shiftKey&&"ArrowDown"===t.key?(t.preventDefault(),this.horizontal?this.hsv[2]=Math.max(0,this.hsv[2]-.01):this.hsv[1]=Math.max(0,this.hsv[1]-.01),this.setValueFromHsv()):super._onKeydown(t)}_setValue(t,e){this.hsv[1]=t,this.hsv[2]=e,this.setValueFromHsv()}}IoColorSliderSv.Register();class IoColorSliderSl extends IoColorSlider{static get Style(){return"\n\t\t:host {\n\t\t\tcursor: move !important;\n\t\t}\n\t\t"}static get Properties(){return{noscroll:!0}}static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// SV gradient\n\t\t\t\tvec3 finalColor = hsl2rgb(vec3(uHsl[0], uv));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uHsl[1], size.y * uHsl[2]));\n\t\t\t\tvec4 slider = paintColorSlider2D(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_onKeydown(t){t.shiftKey&&"ArrowLeft"===t.key?(t.preventDefault(),this.horizontal?this.hsl[1]=Math.max(0,this.hsl[1]-.01):this.hsl[2]=Math.max(0,this.hsl[2]-.01),this.setValueFromHsl()):t.shiftKey&&"ArrowUp"===t.key?(t.preventDefault(),this.horizontal?this.hsl[2]=Math.min(1,this.hsl[2]+.01):this.hsl[1]=Math.min(1,this.hsl[1]+.01),this.setValueFromHsl()):t.shiftKey&&"ArrowRight"===t.key?(t.preventDefault(),this.horizontal?this.hsl[1]=Math.min(1,this.hsl[1]+.01):this.hsl[2]=Math.min(1,this.hsl[2]+.01),this.setValueFromHsl()):t.shiftKey&&"ArrowDown"===t.key?(t.preventDefault(),this.horizontal?this.hsl[2]=Math.max(0,this.hsl[2]-.01):this.hsl[1]=Math.max(0,this.hsl[1]-.01),this.setValueFromHsl()):super._onKeydown(t)}_setValue(t,e){this.hsl[1]=t,this.hsl[2]=e,this.setValueFromHsl()}}IoColorSliderSl.Register();class IoColorSliderCyan extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = cmyk2rgb(vec4(uv.x, uCmyk[1], uCmyk[2], uCmyk[3]));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uCmyk[0], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.cmyk[0]=Math.min(1,this.cmyk[0]+.01),this.setValueFromCmyk()}_setDecrease(){this.cmyk[0]=Math.max(0,this.cmyk[0]-.01),this.setValueFromCmyk()}_setValue(t){this.cmyk[0]=t,this.setValueFromCmyk()}}IoColorSliderCyan.Register();class IoColorSliderMagenta extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = cmyk2rgb(vec4(uCmyk[0], uv.x, uCmyk[2], uCmyk[3]));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uCmyk[1], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.cmyk[1]=Math.min(1,this.cmyk[1]+.01),this.setValueFromCmyk()}_setDecrease(){this.cmyk[1]=Math.max(0,this.cmyk[1]-.01),this.setValueFromCmyk()}_setValue(t){this.cmyk[1]=t,this.setValueFromCmyk()}}IoColorSliderMagenta.Register();class IoColorSliderYellow extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = cmyk2rgb(vec4(uCmyk[0], uCmyk[1], uv.x, uCmyk[3]));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uCmyk[2], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.cmyk[2]=Math.min(1,this.cmyk[2]+.01),this.setValueFromCmyk()}_setDecrease(){this.cmyk[2]=Math.max(0,this.cmyk[2]-.01),this.setValueFromCmyk()}_setValue(t){this.cmyk[2]=t,this.setValueFromCmyk()}}IoColorSliderYellow.Register();class IoColorSliderKey extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Value gradient\n\t\t\t\tvec3 finalColor = cmyk2rgb(vec4(uCmyk[0], uCmyk[1], uCmyk[2], uv.x));\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uCmyk[3], size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, uRgb);\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}_setIncrease(){this.cmyk[3]=Math.min(1,this.cmyk[3]+.01),this.setValueFromCmyk()}_setDecrease(){this.cmyk[3]=Math.max(0,this.cmyk[3]-.01),this.setValueFromCmyk()}_setValue(t){this.cmyk[3]=t,this.setValueFromCmyk()}}IoColorSliderKey.Register();class IoColorSliderAlpha extends IoColorSlider{static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 size = (uHorizontal == 1) ? uSize : uSize.yx;\n\t\t\t\tvec2 uv = uHorizontal == 1 ? vUv.xy : vUv.yx;\n\t\t\t\tvec2 position = size * uv;\n\n\t\t\t\t// Alpha pattern\n\t\t\t\tvec3 alphaPattern = mix(vec3(0.5), vec3(1.0), checker(position, 6.));\n\t\t\t\tvec3 finalColor = alphaPattern;\n\n\t\t\t\t// Apha gradient\n\t\t\t\tfinalColor = mix(finalColor, vec3(1.0), uv.x);\n\n\t\t\t\t// Marker\n\t\t\t\tvec2 markerPos = translate(position, vec2(size.x * uAlpha, size.y * 0.5));\n\t\t\t\tvec4 slider = paintColorSlider(markerPos, vec3(1.0));\n\t\t\t\tfinalColor = mix(finalColor, slider.rgb, slider.a);\n\n\t\t\t\tgl_FragColor = vec4(finalColor, 1.0);\n\t\t\t}\n\t\t"}setAria(){const t=3===this.mode?4:3,e=Object.keys(this.value),o=void 0!==this.value[e[t]];this.setAttribute("aria-invalid",!o&&"true")}_setIncrease(){const t=3===this.mode?4:3,e=Object.keys(this.value);this.value[e[t]]=Math.min(1,this.value[e[t]]+.01)}_setDecrease(){const t=3===this.mode?4:3,e=Object.keys(this.value);this.value[e[t]]=Math.max(0,this.value[e[t]]-.01)}_setMin(){const t=3===this.mode?4:3,e=Object.keys(this.value);this.value[e[t]]=0}_setMax(){const t=3===this.mode?4:3,e=Object.keys(this.value);this.value[e[t]]=1}_setValue(t){const e=3===this.mode?4:3,o=Object.keys(this.value);void 0!==this.value[o[e]]&&(this.value[o[e]]=t)}}IoColorSliderAlpha.Register();class IoColorPanel extends(IoColorMixin(IoElement)){static get Style(){return"\n\t\t:host {\n\t\t\t@apply --io-panel;\n\t\t\tdisplay: flex;\n\t\t\tcursor: move;\n\t\t\talign-items: stretch;\n\t\t\tmin-width: var(--io-line-height);\n\t\t\tmin-height: var(--io-line-height);\n\t\t\tflex-direction: column;\n\t\t}\n\t\t:host:not([expanded]) {\n\t\t\tdisplay: none;\n\t\t}\n\t\t:host[horizontal] {\n\t\t\tflex-direction: row;\n\t\t}\n\t\t:host > * {\n\t\t\tborder-radius: calc(var(--io-border-radius) - var(--io-border-width));\n\t\t}\n\t\t:host > io-color-slider-sl,\n\t\t:host > io-color-slider-sv {\n\t\t\tflex: 1 1;\n\t\t}\n\t\t:host > *:not(:last-child) {\n\t\t\tmargin: 0 0 var(--io-spacing) 0;\n\t\t}\n\t\t:host[horizontal] > *:not(:last-child) {\n\t\t\tmargin: 0 var(--io-spacing) 0 0;\n\t\t}\n\t\t"}static get Properties(){return{expanded:{type:Boolean,reflect:1},horizontal:{value:!0,reflect:1}}}static get Listeners(){return{keydown:"_onKeydown"}}_onKeydown(t){"Escape"!==t.key&&"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.expanded=!1)}changed(){this.template([2===this.mode?["io-color-slider-sl",{value:this.value,mode:this.mode}]:["io-color-slider-sv",{value:this.value,mode:this.mode}],["io-color-slider-hue",{value:this.value,mode:this.mode,horizontal:!this.horizontal}],void 0!==this.alpha?["io-color-slider-alpha",{value:this.value,horizontal:!this.horizontal}]:null])}}IoColorPanel.Register();const IoColorPanelSingleton=new IoColorPanel;IoLayerSingleton.appendChild(IoColorPanelSingleton);class IoColorSwatch extends(IoColorMixin(IoGl)){static get Style(){return"\n\t\t:host {\n\t\t\tbox-sizing: border-box;\n\t\t\talign-self: flex-start;\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tmin-width: var(--io-item-height);\n\t\t\tmin-height: var(--io-item-height);\n\t\t}\n\t\t:host[aria-invalid] {\n\t\t\tborder: var(--io-border-error);\n\t\t}\n\t\t:host:focus {\n\t\t\tborder-color: var(--io-color-focus);\n\t\t\toutline-color: var(--io-color-focus);\n\t\t}\n\t\t"}static get Frag(){return"\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(void) {\n\t\t\t\tvec2 position = vUv * uSize;\n\n\t\t\t\t// Alpha pattern\n\t\t\t\tvec3 alphaPattern = mix(vec3(0.5), vec3(1.0), checker(position, 6.));\n\n\t\t\t\tfloat alpha = uAlpha;\n\t\t\t\tfloat lineWidth = cssStrokeWidth * 2.0;\n\t\t\t\tvec2 pxUv = vUv * uSize;\n\t\t\t\tif (pxUv.x < lineWidth) alpha = 1.0;\n\t\t\t\tif (pxUv.y < lineWidth) alpha = 1.0;\n\t\t\t\tif (pxUv.x > uSize.x - lineWidth) alpha = 1.0;\n\t\t\t\tif (pxUv.y > uSize.y - lineWidth) alpha = 1.0;\n\n\t\t\t\tgl_FragColor = saturate(vec4(mix(alphaPattern, uRgb.rgb, alpha), 1.0));\n\t\t\t}\n\t\t"}}IoColorSwatch.Register();class IoColorPicker extends(IoColorMixin(IoItem)){static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder-radius: var(--io-border-radius);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-inset);\n\t\t\tmin-width: var(--io-item-height);\n\t\t\tmin-height: var(--io-item-height);\n\t\t\tpadding: 0;\n\t\t}\n\t\t:host > io-color-swatch {\n\t\t\tborder: 0;\n\t\t\tflex: 1 1 auto;\n\t\t\talign-self: stretch;\n\t\t\tmin-width: 0;\n\t\t\tmin-height: 0;\n\t\t\tborder-radius: 0;\n\t\t}\n\t\t"}static get Properties(){return{value:[.5,.5,.5,.5],horizontal:!1,role:"slider",tabindex:0}}static get Listeners(){return{click:"_onClick",keydown:"_onKeydown"}}_onClick(){event.preventDefault(),this.focus(),this.toggle()}get expanded(){return IoColorPanelSingleton.expanded&&IoColorPanelSingleton.value===this.value}_onKeydown(t){const e=this.getBoundingClientRect(),o=IoColorPanelSingleton.getBoundingClientRect();"Enter"===t.key||" "===t.key?(t.preventDefault(),this.toggle(),this.expanded&&IoColorPanelSingleton.firstChild.focus()):this.expanded&&o.top>=e.bottom&&"ArrowDown"===t.key?(t.preventDefault(),IoColorPanelSingleton.firstChild.focus()):this.expanded&&o.bottom<=e.top&&"ArrowUp"===t.key?(t.preventDefault(),IoColorPanelSingleton.firstChild.focus()):(this.collapse(),super._onKeydown(t))}toggle(){this.expanded?this.collapse():this.expand()}expand(){const t=void 0!==this.alpha;IoColorPanelSingleton.value=this.value,IoColorPanelSingleton.mode=this.mode,IoColorPanelSingleton.style.width=t?"192px":"160px",IoColorPanelSingleton.style.height="128px",IoColorPanelSingleton.expanded=!0,IoLayerSingleton.setElementPosition(IoColorPanelSingleton,"bottom",this.getBoundingClientRect())}collapse(){IoColorPanelSingleton.expanded=!1}changed(){this.template([["io-color-swatch",{value:this.value,mode:this.mode}]])}}IoColorPicker.Register();class IoColorVector extends(IoColorMixin(IoElement)){static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t:host > io-number {\n\t\t\twidth: inherit;\n\t\t\tflex: 1 1;\n\t\t}\n\t\t:host > *:not(:last-child) {\n\t\t\tmargin-right: var(--io-spacing);\n\t\t}\n\t\t:host > io-color-picker {\n\t\t\twidth: calc(var(--io-line-height) + calc(2 * var(--io-spacing)));\n\t\t}\n\t\t"}static get Properties(){return{value:[0,0,0,0],conversion:1,step:.01,min:0,max:1}}_onValueSet(t){const e=t.composedPath()[0].id,o=t.detail.value,n=t.detail.oldValue;this.value[e]=o;const i={object:this.value,property:this.linked?null:e,value:o,oldValue:n};this.dispatchEvent("object-mutated",i,!1,window)}changed(){const t=[],e=Object.keys(this.value);for(let o in e){const n=e[o];void 0!==this.value[n]&&t.push(["io-number",{id:n,value:this.value[n],conversion:this.conversion,step:this.step,min:this.min,max:this.max,ladder:!0,"on-value-set":this._onValueSet}])}t.push(this.getSlotted()),this.template(t)}getSlotted(){return["io-color-picker",{id:"swatch",mode:this.mode,value:this.value}]}}IoColorVector.Register();class IoLayout extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\toverflow: hidden;\n\t\t\ttouch-action: none;\n\t\t}\n\t\t:host[orientation=horizontal] {\n\t\t\tflex-direction: row;\n\t\t}\n\t\t:host[orientation=vertical] {\n\t\t\tflex-direction: column;\n\t\t}\n\t\t"}static get Properties(){return{elements:Array,splits:{type:Array,observe:!0},editable:!0,orientation:{value:"horizontal",reflect:1}}}static get Listeners(){return{"io-layout-divider-move":"_onDividerMove","io-layout-tab-insert":"_onLayoutTabInsert"}}_onSelectedChanged(){const t=[].slice.call(this.children).filter(t=>"io-layout-divider"!==t.localName);for(let e=0;e<t.length;e++)t[e].selected&&(this.splits[e].selected=t[e].selected)}changed(){let t=[];for(let e=0;e<this.splits.length;e++){const o=this.splits[e],n=void 0!==o.size?o.size+"px":null,i={"flex-basis":n||"auto","flex-grow":n?0:1,"flex-shrink":n?0:1};o.tabs?t.push(["io-selector-tabs",{elements:this.elements,filter:o.tabs,selected:o.selected,editable:this.editable,style:i,"on-selected-changed":this._onSelectedChanged}]):o.splits?t.push(["io-layout",{elements:this.elements,splits:o.splits,orientation:o.orientation,editable:this.editable,style:i}]):t.push(["p","Malformed layout data."]),e<this.splits.length-1&&t.push(["io-layout-divider",{orientation:this.orientation||"horizontal",index:e}])}this.template([t])}_onLayoutTabInsert(t){t.stopImmediatePropagation();const e=[].slice.call(this.children).filter(t=>"io-layout-divider"!==t.localName),o=t.detail.source,n=t.detail.destination,i=e.indexOf(n),s=t.detail.tab,r="vertical"===this.orientation,a=t.detail.direction;for(let t=o.filter.length;t--;)o.filter[t]===s&&(o.filter.splice(t,1),o.selected=o.filter[o.filter.length-1],o.changed());r&&"down"===a||!r&&"right"===a?this.splits.splice(i+1,0,{tabs:[s],selected:s}):r&&"up"===a||!r&&"left"===a?this.splits.splice(i,0,{tabs:[s],selected:s}):r&&"left"===a||!r&&"up"===a?this.splits[i]={splits:[{tabs:[s],selected:s},this.splits[i]],orientation:r?"horizontal":"vertical"}:(r&&"right"===a||!r&&"down"===a)&&(this.splits[i]={splits:[this.splits[i],{tabs:[s],selected:s}],orientation:r?"horizontal":"vertical"}),this.changed()}_onDividerMove(t){t.stopImmediatePropagation();let e=t.detail.index,o=t.detail.index+1,n=this.splits[e],i=this.splits[o],s=void 0===n.size?void 0:n.size+t.detail.movement,r=void 0===i.size?void 0:i.size-t.detail.movement;if(void 0!==s&&s>=0&&(void 0===r||r>=0)&&(this.splits[e].size=Math.max(0,s)),void 0!==r&&r>=0&&(void 0===s||s>=0)&&(this.splits[o].size=Math.max(0,r)),void 0===n.size&&void 0===i.size){const t=[].slice.call(this.children).filter(t=>"io-layout-divider"!==t.localName);let n="horizontal"===this.orientation?"width":"height",i=Math.floor(this.splits.length/2);if(Math.abs(i-e)<=Math.abs(i-o))for(let e=o;e<this.splits.length;e++)this.splits[e].size=parseInt(t[e].getBoundingClientRect()[n]);else for(let o=e;o>=0;o--)this.splits[o].size=parseInt(t[o].getBoundingClientRect()[n])}this.queue("splits",this.splits,this.splits),this.queueDispatch()}}IoLayout.Register();class IoLayoutDivider extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tbackground: var(--io-background-color);\n\t\t\tcolor: var(--io-color);\n\t\t\tz-index: 1;\n\t\t\tdisplay: flex;\n\t\t\tflex: none;\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-border-outset);\n\t\t\tuser-select: none;\n\t\t\ttransition: background-color 0.4s;\n\t\t}\n\t\t:host:hover {\n\t\t\tbackground-color: var(--io-color-focus);\n\t\t}\n\t\t:host[orientation=horizontal] {\n\t\t\tcursor: col-resize;\n\t\t\twidth: var(--io-spacing);\n\t\t\tborder-top: 0;\n\t\t\tborder-bottom: 0;\n\t\t}\n\t\t:host[orientation=vertical] {\n\t\t\tcursor: row-resize;\n\t\t\theight: var(--io-spacing);\n\t\t\tborder-left: 0;\n\t\t\tborder-right: 0;\n\t\t}\n\t\t:host > .app-divider {\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\tmargin-left: -0.03em;\n\t\t\tmargin-top: -0.06em;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t}\n\t\t"}static get Properties(){return{orientation:{value:"horizontal",reflect:1},index:Number,pointermode:"relative"}}static get Listeners(){return{pointermove:"_onPointermove"}}_onPointermove(t){t.buttons&&(t.preventDefault(),this.setPointerCapture(t.pointerId),this.dispatchEvent("io-layout-divider-move",{movement:"horizontal"===this.orientation?t.movementX:t.movementY,index:this.index},!0))}changed(){this.template([["div",{class:"app-divider"},"horizontal"===this.orientation?"⋮":"⋯"]])}}IoLayoutDivider.Register();class IoCollapsable extends IoElement{static get Style(){return'\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t}\n\t\t:host > io-boolean {\n\t\t\ttext-align: left;\n\t\t\talign-self: stretch;\n\t\t\twidth: auto;\n\t\t\tborder-radius: 0;\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t}\n\t\t:host > io-boolean:before {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 1.125em;\n\t\t\tcontent: "▸"\n\t\t}\n\t\t:host > io-boolean[value]:before {\n\t\t\tcontent: "▾";\n\t\t}\n\t\t:host > io-boolean[value]:not(:focus) {\n\t\t\tborder-bottom-color: var(--io-color-border);\n\t\t}\n\t\t'}static get Properties(){return{elements:Array,label:{reflect:1},expanded:{type:Boolean,reflect:1},role:"region"}}changed(){this.template([["io-boolean",{true:this.label,false:this.label,value:this.bind("expanded")}],["io-content",{elements:this.elements,expanded:this.expanded}]])}}IoCollapsable.Register();class IoSelector extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex: 1 1;\n\t\t\tflex-direction: column;\n\t\t\talign-self: stretch;\n\t\t\tjustify-self: stretch;\n\t\t\toverflow: auto;\n\t\t}\n\t\t@keyframes io-selector-spinner {\n\t\t\tto {\n\t\t\t\ttransform: rotate(360deg);\n\t\t\t}\n\t\t}\n\t\t:host .io-loading {\n\t\t\tbackground-image: repeating-linear-gradient(135deg, var(--io-background-color-light), var(--io-background-color) 3px, var(--io-background-color) 7px, var(--io-background-color-light) 10px) !important;\n\t\t\tbackground-repeat: repeat;\n\t\t\tposition: relative;\n\t\t}\n\t\t:host .io-loading:after {\n\t\t\tcontent: '';\n\t\t\tbox-sizing: border-box;\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\twidth: 40px;\n\t\t\theight: 40px;\n\t\t\tmargin-top: -20px;\n\t\t\tmargin-left: -20px;\n\t\t\tborder-radius: 50%;\n\t\t\tborder: var(--io-border);\n\t\t\tborder-top-color: #000;\n\t\t\tanimation: io-selector-spinner .6s linear infinite;\n\t\t}\n\t\t"}static get Properties(){return{elements:{type:Array,observe:!0},selected:{type:String,reflect:1},cache:Boolean,_caches:Object,_selectedID:String,_scrollID:{type:String,notify:!0}}}static get Listeners(){return{scroll:["_onScroll",{capture:!0,passive:!0}],"content-ready":"_onIoContentReady"}}_onIoContentReady(t){t.stopImmediatePropagation(),this.scrollTo(this._scrollID,!1)}connectedCallback(){super.connectedCallback(),this.scrollTo(this._scrollID,!1)}scrollTo(t,e){t&&setTimeout(()=>{const o=this.$.content.querySelector("#"+t.toLowerCase());o&&o.scrollIntoView({behavior:e?"smooth":"auto"})},100)}_onScroll(){void 0!==this._scrollID&&(clearTimeout(this.__scrollThrottle),this.__scrollThrottle=setTimeout(()=>{delete this.__scrollThrottle;const t=[...this.$.content.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]")],e=this.$.content.scrollTop||this.$.content.children[0].scrollTop,o=e+this.$.content.getBoundingClientRect().height/2,n=this._scrollID;let i;for(let n=t.length;n--;){const s=t[n],r=t[n+1],a=s.offsetTop,l=r?r.offsetTop:a;if(a<e-5&&l<o&&n!==t.length-1)break;i=s.id}if(void 0!==i&&i!==n){this._scrollID=i;const t=this.selected,e=this._selectedID+"#"+this._scrollID;this.__properties.selected.value=e,this.dispatchEvent("selected-changed",{value:e,oldValue:t})}},100))}selectedChanged(){this.updateScroll()}elementsChanged(){this.updateScroll()}updateScroll(){const t=this._scrollID,e=this._selectedID;this._selectedID=this.selected.split("#")[0],this._scrollID=this.selected.split("#")[1],this._selectedID!==e?(this.update(),this.scrollTo(this._scrollID)):this._scrollID!==t&&this.scrollTo(this._scrollID,!0)}getSlotted(){return null}update(){const t=this._selectedID;let e=this.elements.find(e=>e[1].name===t);e||(console.warn(`Could not find element with id:${t}!`),e=["span",`Could not find element with id:${t}!`]),"object"!=typeof e[1]&&e.splice(1,0,{});const o=!0===e[1].cache,n=!1===e[1].cache;this.template([this.getSlotted(),["div",{id:"content",class:"io-content"}]]),this.$.content&&(this.$.content.textContent=""),this.$.content.classList.toggle("io-loading",!0),!n&&(this.cache||o)&&this._caches[t]?(this.$.content.appendChild(this._caches[t]),this.$.content.classList.toggle("io-loading",!1)):this.import(e[1].import).then(()=>{e[1].name===this.selected.split("#")[0]&&(this.$.content.classList.toggle("io-loading",!1),this.template([e],this.$.content),this._caches[t]=this.$.content.childNodes[0])})}}IoSelector.Register();class IoSidebar extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: nowrap;\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: auto;\n\t\t\tpadding: var(--io-spacing);\n\t\t}\n\t\t:host:not([collapsed]) {\n\t\t\t-webkit-overflow-scrolling: touch;\n\t\t\tflex-direction: column;\n\t\t}\n\t\t:host > * {\n\t\t\tflex: 0 0 auto;\n\t\t}\n\t\t:host * {\n\t\t\toverflow: visible !important;\n\t\t}\n\t\t:host io-collapsable {\n\t\t\tpadding: 0;\n\t\t}\n\t\t:host io-collapsable > io-content {\n\t\t\tpadding: 0 0 0 0.75em;\n\t\t}\n\t\t:host io-button {\n\t\t\ttext-align: left;\n\t\t\talign-self: stretch;\n\t\t}\n\t\t:host io-button,\n\t\t:host io-collapsable,\n\t\t:host io-content {\n\t\t\tbackground: none;\n\t\t\tbox-shadow: none;\n\t\t\tborder-color: transparent;\n\t\t}\n\t\t:host io-boolean:not(:focus) {\n\t\t\tborder-bottom-color: transparent\t!important;\n\t\t}\n\t\t"}static get Properties(){return{selected:String,options:{type:Array,observe:!0},collapsed:{type:Boolean,reflect:1},role:"navigation"}}_onSelect(t){this.set("selected",t)}_addOptions(t){const e=[];for(let o=0;o<t.length;o++){const n=t[o];if(n.options){const i=!!this.filterObject(n.options,t=>matches(this.selected,t)),s=IoStorageFactory({value:!1,storage:"local",key:genUUID$1(t,o)});e.push(["io-collapsable",{label:n.label,expanded:i||s,elements:[...this._addOptions(n.options)]}])}else{const t=matches(this.selected,n);e.push(["io-button",{value:n.value||n,label:n.label||n.value||n,action:this._onSelect,selected:t}])}}return e}changed(){this.collapsed?this.template([["io-option-menu",{options:this.options,value:this.bind("selected"),hamburger:!0,selectable:!0,title:"select tab",class:"io-item"}]]):this.template([...this._addOptions(this.options)])}}function genUUID$1(t,e){const o=t[e];let n="io-sidebar-collapse-state-"+e+"-"+t.length;return o.label&&(n+="-"+o.label),o.options.length&&(n+="("+o.options.length+")"),n}function matches(t,e){return void 0!==t&&("object"==typeof e&&(e=e.value),String(t).toLowerCase()===String(e).toLowerCase())}IoSidebar.Register();class IoSelectorSidebar extends IoSelector{static get Style(){return"\n\t\t:host {\n\t\t\tflex-direction: row;\n\t\t}\n\t\t:host[right] {\n\t\t\tflex-direction: row-reverse;\n\t\t}\n\t\t:host[collapsed] {\n\t\t\tflex-direction: column;\n\t\t}\n\t\t:host > io-sidebar {\n\t\t\tflex: 0 0 8em;\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-width: 0 var(--io-border-width) 0 0;\n\t\t}\n\t\t:host[right] > io-sidebar {\n\t\t\tborder-width: 0 0 0 var(--io-border-width);\n\t\t}\n\t\t:host[collapsed] > io-sidebar {\n\t\t\tflex: 0 0 auto;\n\t\t\tborder-width: 0 0 var(--io-border-width) 0;\n\t\t}\n\t\t"}static get Properties(){return{options:{type:Array,observe:!0},collapseWidth:410,collapsed:{type:Boolean,reflect:1},right:{type:Boolean,reflect:1}}}onResized(){this.collapsed=this.getBoundingClientRect().width<this.collapseWidth}collapsedChanged(){this.update()}getSlotted(){return["io-sidebar",{selected:this.bind("selected"),options:this.options,collapsed:this.collapsed}]}}IoSelectorSidebar.Register();class IoSelectorTabs extends IoSelector{static get Style(){return"\n\t\t:host > io-menu-options {\n\t\t\tflex: 0 0 auto;\n\t\t\tborder: none;\n\t\t\tborder-radius: 0;\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-width: 0 0 var(--io-border-width) 0;\n\t\t}\n\t\t"}static get Properties(){return{options:{type:Array,observe:!0},slotted:{type:Array,observe:!0}}}getSlotted(){return["io-menu-options",{role:"navigation",horizontal:!0,value:this.bind("selected"),options:this.options,slotted:this.slotted,selectable:!0}]}}IoSelectorTabs.Register();class IoNotify extends IoElement{static get Style(){return"\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tposition: fixed;\n\t\t\tbox-sizing: border-box;\n\t\t\tbackground-color: var(--io-background-color-dark);\n\t\t\tborder: var(--io-border);\n\t\t\tborder-color: var(--io-color-error);\n\t\t\twidth: 100%;\n\t\t\topacity: 1;\n\t\t\tfont-weight: bold;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tpadding: 0 var(--io-spacing);\n\t\t}\n\t\t:host > span {\n\t\t\tcursor: default;\n\t\t\tbox-sizing: border-box;\n\t\t\tline-height: var(--io-item-height);\n\t\t\tfont-size: var(--io-font-size);\n\t\t\tcolor: var(--io-color);\n\t\t\tpadding: 0 var(--io-spacing);\n\t\t}\n\t\t:host > :nth-child(n+2) {\n\t\t\tflex-shrink: 0;\n\t\t\talign-self: center;\n\t\t\twhite-space: nowrap;\n\t\t}\n\t\t@keyframes io-notification-fade {\n\t\t\tto {\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t}\n\t\t:host:not([expanded]) {\n\t\t\tanimation: io-notification-fade .6s linear forwards;\n\t\t\tpointer-events: none;\n\t\t}\n\t\t"}static get Properties(){return{expanded:{value:!0,reflect:1}}}static get Listeners(){return{}}constructor(t){super(t),this.template([["span","This app uses cookies for user interface customization."],["span","Agree"],["io-boolicon",{"on-value-set":this._onAgree}],["span","Disagree"],["io-boolicon",{"on-value-set":this._onDisgree}]])}_onAgree(){event.detail.value?IoStorageFactory.permitted=!0:IoStorageFactory.permitted=!1,this.expanded=!1}_onDisgree(){IoStorageFactory.permitted=!1,this.expanded=!1}}IoNotify.Register(),null===IoStorageFactory.permitted&&document.body.appendChild(new IoNotify);export{IoBoolean,IoBoolicon,IoButton,IoCollapsable,IoColorPanel,IoColorPicker,IoColorSlider,IoColorSliderAlpha,IoColorSliderBlue,IoColorSliderCyan,IoColorSliderGreen,IoColorSliderHs,IoColorSliderHue,IoColorSliderKey,IoColorSliderLevel,IoColorSliderMagenta,IoColorSliderRed,IoColorSliderSaturation,IoColorSliderSl,IoColorSliderSv,IoColorSliderValue,IoColorSliderYellow,IoColorVector,IoContent,IoContextMenu,IoGl,IoIcon,IoIconsetSingleton,IoInspector,IoItem,IoLadderSingleton,IoLayerSingleton,IoLayout,IoMatrix,IoMenuItem,IoMenuOptions,IoNotify,IoNumber,IoNumberSlider,IoObject,IoOptionMenu,IoProperties,IoSelector,IoSelectorSidebar,IoSelectorTabs,IoSidebar,IoSlider,IoStorageFactory,IoString,IoSwitch,IoThemeSingleton,IoVector};