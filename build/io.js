class ProtoChain extends Array{constructor(e){for(super();e&&e.constructor!==HTMLElement&&e.constructor!==Object&&e.constructor!==Array;)this.push(e),e=e.__proto__}}class ProtoFunctions extends Array{constructor(e){super();for(let t=e.length;t--;){const i=Object.getOwnPropertyNames(e[t]);for(let s=0;s<i.length;s++){if("constructor"===i[s])continue;const n=Object.getOwnPropertyDescriptor(e[t],i[s]);n.get||n.set||"function"==typeof e[t][i[s]]&&(i[s].startsWith("_")||i[s].startsWith("on"))&&this.push(i[s])}}}bind(e){for(let t=this.length;t--;)e[this[t]]=e[this[t]].bind(e)}}class Binding{constructor(e,t){Object.defineProperty(this,"source",{value:e,configurable:!0}),Object.defineProperty(this,"sourceProp",{value:t,configurable:!0}),Object.defineProperty(this,"targets",{value:[],configurable:!0}),Object.defineProperty(this,"targetProps",{value:new WeakMap,configurable:!0}),this._onTargetChanged=this._onTargetChanged.bind(this),this._onSourceChanged=this._onSourceChanged.bind(this),this.source.addEventListener(this.sourceProp+"-changed",this._onSourceChanged)}set value(e){this.source[this.sourceProp]=e}get value(){return this.source[this.sourceProp]}addTarget(e,t){const i=e.__properties;if(i&&(i[t].binding=this,i[t].value=this.source[this.sourceProp]),-1===this.targets.indexOf(e)&&this.targets.push(e),this.targetProps.has(e)){const i=this.targetProps.get(e);-1===i.indexOf(t)&&(i.push(t),e.addEventListener(t+"-changed",this._onTargetChanged))}else this.targetProps.set(e,[t]),e.addEventListener(t+"-changed",this._onTargetChanged)}removeTarget(e,t){if(this.targetProps.has(e)){const i=this.targetProps.get(e);if(t){const s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeEventListener(t+"-changed",this._onTargetChanged)}else{for(let t=i.length;t--;)e.removeEventListener(i[t]+"-changed",this._onTargetChanged);i.length=0}0===i.length&&this.targets.splice(this.targets.indexOf(e),1)}}_onTargetChanged(e){if(-1===this.targets.indexOf(e.target))return void console.error("Io: _onTargetChanged() should never fire when target is removed from binding.\n        Please file an issue at https://github.com/arodic/io/issues.");const t=this.source[this.sourceProp],i=e.detail.value;if(t!==i){if("number"==typeof i&&isNaN(i)&&"number"==typeof t&&isNaN(t))return;this.source[this.sourceProp]=i}}_onSourceChanged(e){if(e.target!=this.source)return void console.error("Io: _onSourceChanged() should always originate form source node.\n        Please file an issue at https://github.com/arodic/io/issues.");const t=e.detail.value;for(let e=this.targets.length;e--;){const i=this.targetProps.get(this.targets[e]);for(let s=i.length;s--;){const n=this.targets[e][i[s]];if(n!==t){if("number"==typeof t&&isNaN(t)&&"number"==typeof n&&isNaN(n))continue;this.targets[e][i[s]]=t}}}}dispose(){this.source.removeEventListener(this.sourceProp+"-changed",this._onSourceChanged);for(let e in this.targets)this.removeTarget(this.targets[e]),delete this.targets[e];delete this.source,delete this.sourceProp,delete this.targets,delete this.targetProps,delete this._onTargetChanged,delete this._onSourceChanged}}class Bindings{constructor(e){Object.defineProperty(this,"__node",{value:e,configurable:!0})}bind(e){return this[e]=this[e]||new Binding(this.__node,e),this[e]}unbind(e){this[e]&&this[e].dispose(),delete this[e]}dispose(){for(let e in this)this[e].dispose(),delete this[e];delete this.__node}}class Queue{constructor(e){Object.defineProperty(this,"__array",{value:new Array,configurable:!0}),Object.defineProperty(this,"__node",{value:e,configurable:!0})}queue(e,t,i){const s=this.__array.indexOf(e);-1===s?this.__array.push(e,{property:e,value:t,oldValue:i}):this.__array[s+1].value=t}dispatch(){if(!0===this._dispatchInProgress)return;this._dispatchInProgress=!0;const e=this.__node;let t=!1;for(;this.__array.length;){const i=this.__array.length-2,s=this.__array[i],n=this.__array[i+1],o={detail:n};n.value!==n.oldValue&&(t=!0,e[s+"Changed"]&&e[s+"Changed"](o),e.dispatchEvent(s+"-changed",o.detail)),this.__array.splice(i,2)}t&&e.dispatchChange(),this.__array.length=0,this._dispatchInProgress=!1}dispose(){this.__array.length=0,delete this.__node,delete this.__array}}class ProtoProperty{constructor(e,t){return t||(this.value=void 0,this.type=void 0,this.notify=!0,this.reflect=0,this.observe=!1,this.strict=!1,this.enumerable=!0,this.binding=void 0),void 0===e||null===e?e={value:e}:"function"==typeof e?e={type:e}:e instanceof Binding?e={binding:e}:e&&e.constructor===Object||(e={value:e}),void 0!==e.value&&null!==e.value||(e.binding instanceof Binding?e.value=e.binding.value:this.value=e.value),void 0===e.type&&void 0!==e.value&&null!==e.value&&(e.type=e.value.constructor),void 0!==e.type&&(this.type=e.type),void 0===e.value?"function"==typeof e.type&&(e.type===Boolean?this.value=!1:e.type===String?this.value="":e.type===Number?this.value=0:e.type===Object?this.value={}:e.type===Array?this.value=[]:this.value=new e.type):this.value=e.value,void 0!==this.value&&this.value instanceof Array&&(this.value=[...this.value]),"boolean"==typeof e.notify&&(this.notify=e.notify),"number"==typeof e.reflect&&(this.reflect=e.reflect),"boolean"==typeof e.observe&&(this.observe=e.observe),"boolean"==typeof e.strict&&(this.strict=e.strict),"boolean"==typeof e.enumerable&&(this.enumerable=e.enumerable),e.binding instanceof Binding&&(this.binding=e.binding,this.value=e.binding.value),this}}class ProtoProperties{constructor(e){for(let t=e.length;t--;){const i=e[t].constructor.Properties;for(let e in i)this[e]?Object.assign(this[e],new ProtoProperty(i[e],!0)):this[e]=new ProtoProperty(i[e]),"_"===e.charAt(0)&&(this[e].notify=!1,this[e].enumerable=!1)}}}class Property{constructor(e){this.value=e.value,this.notify=e.notify,this.reflect=e.reflect,this.observe=e.observe,this.strict=e.strict,this.enumerable=e.enumerable,this.type=e.type,this.binding=e.binding,this.type===Array&&this.value instanceof Array&&(this.value=[...this.value]),this.type===Object&&this.value&&(this.value={}),void 0===this.value&&this.type&&(this.type===Boolean?this.value=!1:this.type===String?this.value="":this.type===Number?this.value=0:this.type===Array?this.value=[]:this.type===Object?this.value={}:this.value=new this.type)}}class Properties{constructor(e,t){Object.defineProperty(this,"__node",{value:e,configurable:!0});for(let i in t){Object.defineProperty(this,i,{value:new Property(t[i]),enumerable:t[i].enumerable,configurable:!0});const s=this[i].value;void 0!==s&&null!==s&&("object"==typeof s?(e.queue(i,s,void 0),s.__isIoNode&&e.__isConnected&&s.connect(e)):this[i].reflect>=1&&e.__isIoElement&&e.setAttribute(i,s));const n=this[i].binding;n&&n.addTarget(e,i)}Object.defineProperty(this,"__keys",{value:Object.getOwnPropertyNames(this),configurable:!0})}get(e){return this[e].value}set(e,t,i){const s=this[e],n=s.value;if(t!==n){const o=this.__node,r=t instanceof Binding?t:void 0;if(r){const i=s.binding;i&&r!==i&&i.removeTarget(o,e),r.addTarget(o,e),t=r.source[r.sourceProp]}else!s.strict||t instanceof s.type?s.value=t:console.error("Properties runtime error: invalid value type!");t&&t.__isIoNode&&t.connect(o),n&&n.__isIoNode&&n.disconnect(o),s.notify&&n!==t&&(o.queue(e,t,n),o.__isConnected&&!i&&o.queueDispatch()),s.reflect>=1&&o.__isIoElement&&o.setAttribute(e,t)}}connect(){for(let e=this.__keys.length;e--;){const t=this.__keys[e];this[t].binding&&this[t].binding.addTarget(this.__node,t),this[t].value&&this[t].value.__isIoNode&&!this[t].value.__isIoElement&&this[t].value.connect(this.__node)}}disconnect(){for(let e=this.__keys.length;e--;){const t=this.__keys[e];this[t].binding&&this[t].binding.removeTarget(this.__node,t),this[t].value&&this[t].value.__isIoNode&&!this[t].value.__isIoElement&&this[t].value.disconnect(this.__node)}}dispose(){for(let e=this.__keys.length;e--;){const t=this.__keys[e];this[t].binding&&(this[t].binding.removeTarget(this.__node,t),delete this[t].binding),delete this[t]}delete this.__node,delete this.__keys}}class ProtoListeners{constructor(e){for(let t=e.length;t--;){const i=e[t].constructor.Listeners;for(let e in i)this[e]=i[e]}}}class Listeners{constructor(e,t){Object.defineProperty(this,"node",{value:e}),Object.defineProperty(this,"propListeners",{value:{}}),Object.defineProperty(this,"activeListeners",{value:{}}),Object.defineProperty(this,"__isConnected",{writable:!0});for(let e in t)this[e]=t[e]}setPropListeners(e){const t=this.propListeners,i=this.node,s={};for(let t in e)t.startsWith("on-")&&(s[t.slice(3,t.length)]=e[t]);for(let e in s){if(t[e])if(t[e]instanceof Array){const s="function"==typeof t[e][0]?t[e][0]:i[t[e][0]];i.removeEventListener(e,s,t[e][1])}else{const s="function"==typeof t[e]?t[e]:i[t[e]];i.removeEventListener(e,s)}if(t[e]=s[e],this.__isConnected)if(s[e]instanceof Array){const t="function"==typeof s[e][0]?s[e][0]:i[s[e][0]];i.addEventListener(e,t,s[e][1])}else{const t="function"==typeof s[e]?s[e]:i[s[e]];i.addEventListener(e,t)}}}connect(){this.__isConnected=!0;const e=this.node,t=this.propListeners;for(let t in this)this[t]instanceof Array?this.addEventListener(t,e[this[t][0]],this[t][1]):this.addEventListener(t,e[this[t]]);for(let i in t)if(t[i]instanceof Array){const s="function"==typeof t[i][0]?t[i][0]:e[t[i][0]];this.addEventListener(i,s,t[i][1])}else{const s="function"==typeof t[i]?t[i]:e[t[i]];this.addEventListener(i,s)}}disconnect(){this.__isConnected=!1;const e=this.node,t=this.propListeners;for(let t in this)this[t]instanceof Array?this.removeEventListener(t,e[this[t][0]],this[t][1]):this.removeEventListener(t,e[this[t]]);for(let i in t)if(t[i]instanceof Array){const s="function"==typeof t[i][0]?t[i][0]:e[t[i][0]];this.removeEventListener(i,s,t[i][1])}else{const s="function"==typeof t[i]?t[i]:e[t[i]];this.removeEventListener(i,s)}}dispose(){this.disconnect();const e=this.activeListeners;for(let t in e)for(let i=e[t].length;i--;)this.node.__isIoElement&&HTMLElement.prototype.removeEventListener.call(this.node,t,e[t][i]),e[t].splice(i,1)}addEventListener(e,t,i){const s=this.activeListeners;s[e]=s[e]||[],-1===s[e].indexOf(t)&&(this.node.__isIoElement&&HTMLElement.prototype.addEventListener.call(this.node,e,t,i),s[e].push(t))}removeEventListener(e,t,i){const s=this.activeListeners;if(void 0!==s[e]){const n=s[e].indexOf(t);-1===n&&void 0!==t||(this.node.__isIoElement&&HTMLElement.prototype.removeEventListener.call(this.node,e,t,i),s[e].splice(n,1))}}dispatchEvent(e,t={},i=!0,s=this.node){if(s instanceof HTMLElement||s===window)HTMLElement.prototype.dispatchEvent.call(s,new CustomEvent(e,{type:e,detail:t,bubbles:i,composed:!0,cancelable:!0}));else{const i=this.activeListeners;if(void 0!==i[e]){const n=i[e].slice(0);for(let e=0;e<n.length;e++)n[e].call(s,{detail:t,target:s,path:[s]})}}}}const IoNodeMixin=e=>{const t=class extends e{static get Properties(){return{lazy:Boolean}}constructor(e={}){super(e);const t=this.__proto__.constructor;t.__isRegisteredAs!==t.name&&console.error(`${t.name}: Not registered! Call "Register()" before using ${t.name} class!`),this.__protoFunctions.bind(this),Object.defineProperty(this,"__bindings",{value:new Bindings(this)}),Object.defineProperty(this,"__queue",{value:new Queue(this)}),Object.defineProperty(this,"__listeners",{value:new Listeners(this,this.__protoListeners)}),Object.defineProperty(this,"__isConnected",{enumerable:!1,writable:!0}),Object.defineProperty(this,"__connections",{enumerable:!1,value:[]}),Object.defineProperty(this,"__properties",{value:new Properties(this,this.__protoProperties)}),this.objectMutated=this.objectMutated.bind(this),this.objectMutatedThrottled=this.objectMutatedThrottled.bind(this),this.queueDispatchLazy=this.queueDispatchLazy.bind(this),this.setProperties(e)}connect(e){-1===this.__connections.indexOf(e)&&(this.__connections.push(e),this.__isConnected||this.connectedCallback())}disconnect(e){-1!==this.__connections.indexOf(e)&&this.__connections.splice(this.__connections.indexOf(e),1),0===this.__connections.length&&this.disconnectedCallback()}preventDefault(e){e.preventDefault()}stopPropagation(e){e.stopPropagation()}changed(){}applyCompose(){const e=this.compose;if(e)for(let t in e)this[t].setProperties(e[t])}dispatchChange(){this.applyCompose(),this.changed(),this.setAria&&this.setAria()}bind(e){return this.__bindings.bind(e)}unbind(e){this.__bindings.unbind(e);const t=this.__properties[e].binding;t&&t.removeTarget(this,e)}set(e,t,i){if(this[e]!==t||i){const i=this[e];this[e]=t,this.dispatchEvent("value-set",{property:e,value:t,oldValue:i},!1)}}setProperties(e){for(let t in e)void 0!==this.__properties[t]&&this.__properties.set(t,e[t],!0);this.__listeners.setPropListeners(e,this),this.__isConnected&&this.queueDispatch()}objectMutated(e){for(let t=this.__observedProps.length;t--;){const i=this.__observedProps[t],s=this.__properties[i].value;if(s===e.detail.object)return void this.throttle(this.objectMutatedThrottled,i);if(e.detail.objects&&-1!==e.detail.objects.indexOf(s))return void this.throttle(this.objectMutatedThrottled,i)}}objectMutatedThrottled(e){this.propMutated&&this.propMutated(e),this[e+"Mutated"]&&this[e+"Mutated"](),this.dispatchChange()}connectedCallback(){this.__listeners.connect(),this.__properties.connect(),this.__isConnected=!0,this.__observedProps.length&&window.addEventListener("object-mutated",this.objectMutated),this.queueDispatch()}disconnectedCallback(){this.__listeners.disconnect(),this.__properties.disconnect(),this.__isConnected=!1,this.__observedProps.length&&window.removeEventListener("object-mutated",this.objectMutated)}dispose(){this.__queue.dispose(),this.__bindings.dispose(),this.__listeners.dispose(),this.__properties.dispose()}addEventListener(e,t,i){"function"==typeof t?this.__listeners.addEventListener(e,t,i):console.warn(`Io ${this.constructor.name} "${e}" listener handler is not a function`)}removeEventListener(e,t,i){this.__listeners.removeEventListener(e,t,i)}dispatchEvent(e,t,i=!1,s){this.__listeners.dispatchEvent(e,t,i,s)}queue(e,t,i){this.__queue.queue(e,t,i)}queueDispatch(){this.lazy?(preThrottleQueue.push(this.queueDispatchLazy),this.throttle(this.queueDispatchLazy)):this.__queue.dispatch()}queueDispatchLazy(){this.__queue.dispatch()}throttle(e,t,i){if(-1!==preThrottleQueue.indexOf(e)||(preThrottleQueue.push(e),i))if(-1===throttleQueue.indexOf(e)&&throttleQueue.push(e),argQueue.has(e)&&"object"!=typeof t){const i=argQueue.get(e);-1===i.indexOf(t)&&i.push(t)}else argQueue.set(e,[t]);else e(t)}requestAnimationFrameOnce(e){requestAnimationFrameOnce(e)}filterObject(e,t,i=5,s=[],n=0){if(-1===s.indexOf(e)&&(s.push(e),!(n>i))){if(n++,t(e))return e;for(let o in e){const r=e[o]instanceof Binding?e[o].value:e[o];if(t(r))return r;if("object"==typeof r){const e=this.filterObject(r,t,i,s,n);if(e)return e}}}}filterObjects(e,t,i=5,s=[],n=0){const o=[];if(-1!==s.indexOf(e))return o;if(s.push(e),n>i)return o;n++,t(e)&&-1===o.indexOf(e)&&o.push(e);for(let r in e){const a=e[r]instanceof Binding?e[r].value:e[r];if(t(a)&&-1===o.indexOf(a)&&o.push(a),"object"==typeof a){const e=this.filterObjects(a,t,i,s,n);for(let t=0;t<e.length;t++)-1===o.indexOf(e[t])&&o.push(e[t])}}return o}import(e){const t=new URL(e,window.location).href;return new Promise(i=>{!e||IMPORTED_PATHS[t]?i(t):import(t).then(()=>{IMPORTED_PATHS[t]=!0,i(t)})})}};return t.Register=Register,t},Register=function(){const e=new ProtoChain(this.prototype);let t=this.prototype;Object.defineProperty(t,"__isIoNode",{value:!0}),Object.defineProperty(t.constructor,"__isRegisteredAs",{value:t.constructor.name}),Object.defineProperty(t,"__protochain",{value:e}),Object.defineProperty(t,"__protoFunctions",{value:new ProtoFunctions(e)}),Object.defineProperty(t,"__protoProperties",{value:new ProtoProperties(e)}),Object.defineProperty(t,"__protoListeners",{value:new ProtoListeners(e)}),Object.defineProperty(t,"__observedProps",{value:[]});for(let e in t.__protoProperties)t.__protoProperties[e].observe&&t.__observedProps.push(e);for(let e in t.__protoProperties)Object.defineProperty(t,e,{get:function(){return this.__properties.get(e)},set:function(t){this.__properties.set(e,t)},enumerable:!!t.__protoProperties[e].enumerable,configurable:!0})};IoNodeMixin.Register=Register;class IoNode extends(IoNodeMixin(Object)){}IoNode.Register();const IMPORTED_PATHS={},preThrottleQueue=new Array,throttleQueue=new Array,argQueue=new WeakMap,funcQueue=new Array,animate=function(){requestAnimationFrame(animate);for(let e=preThrottleQueue.length;e--;)preThrottleQueue.splice(preThrottleQueue.indexOf(preThrottleQueue[e]),1);for(let e=throttleQueue.length;e--;){const t=argQueue.get(throttleQueue[e]);for(let i=t.length;i--;)throttleQueue[e](t[i]),t.splice(t.indexOf(i),1);throttleQueue.splice(throttleQueue.indexOf(throttleQueue[e]),1)}for(let e=funcQueue.length;e--;){const t=funcQueue[e];funcQueue.splice(funcQueue.indexOf(t),1),t()}};function requestAnimationFrameOnce(e){-1===funcQueue.indexOf(e)&&funcQueue.push(e)}
/** @license
 * MIT License
 *
 * Copyright (c) 2019 Luke Jackson
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */requestAnimationFrame(animate);const isString=e=>"string"==typeof e,isArray=Array.isArray,isObject=e=>"object"==typeof e&&!isArray(e),clense=(e,t)=>t?isString(t[0])?[...e,t]:[...e,...t]:e,buildTree=()=>e=>e&&isObject(e[1])?{name:e[0],props:e[1],children:isArray(e[2])?e[2].reduce(clense,[]).map(buildTree()):e[2]}:buildTree()([e[0],{},e[1]]);class IoElement extends(IoNodeMixin(HTMLElement)){static get Style(){return"\n    :host[hidden] {\n      display: none;\n    }\n    :host[disabled] {\n      pointer-events: none;\n      opacity: 0.5;\n    }\n    "}static get Properties(){return{$:{type:Object,notify:!1},tabindex:{type:String,reflect:1},contenteditable:{type:Boolean,reflect:1},class:{type:String,reflect:1},role:{type:String,reflect:1},label:{type:String,reflect:1},id:{type:String,reflect:-1},hidden:{type:Boolean,reflect:1},disabled:{type:Boolean,reflect:1}}}static get Listeners(){return{"focus-to":"_onFocusTo"}}static get observedAttributes(){const e=[];for(let t in this.prototype.__protoProperties){const i=this.prototype.__protoProperties[t].reflect;-1!==i&&2!==i||e.push(t)}return e}attributeChangedCallback(e,t,i){const s=this.__properties[e].type;s===Boolean?null===i?this[e]=!1:""===i&&(this[e]=!0):s===Number||s===String?this[e]=s(i):s===Object||s===Array?this[e]=JSON.parse(i):this[e]=isNaN(Number(i))?i:Number(i)}connectedCallback(){super.connectedCallback(),"function"==typeof this.onResized&&(ro?ro.observe(this):(window.addEventListener("resize",this.onResized),setTimeout(()=>{this.onResized()})))}disconnectedCallback(){super.disconnectedCallback(),"function"==typeof this.onResized&&(ro?ro.unobserve(this):window.removeEventListener("resize",this.onResized))}template(e,t){const i=buildTree()(["root",e]).children;(t=t||this)===this&&(this.__properties.$.value={}),this.traverse(i,t)}traverse(e,t){const i=t.children;for(;i.length>e.length;){const e=i[i.length-1];t.removeChild(e)}if(i.length<e.length){const s=document.createDocumentFragment();for(let t=i.length;t<e.length;t++){const i=constructElement(e[t]);s.appendChild(i)}t.appendChild(s)}for(let s=0;s<i.length;s++)if(i[s].localName!==e[s].name){const n=i[s],o=constructElement(e[s]);t.insertBefore(o,n),t.removeChild(n)}else i[s].removeAttribute("className"),i[s].__isIoElement?i[s].setProperties(e[s].props):setNativeElementProps(i[s],e[s].props);for(let t=0;t<e.length;t++)e[t].props.id&&(this.$[e[t].props.id]=i[t]),void 0!==e[t].children&&("string"==typeof e[t].children?i[t].__isIoElement?console.log(i[t],i[t].__isIoElement,e[t]):(this.flattenTextNode(i[t]),i[t]._textNode.nodeValue=String(e[t].children)):"object"==typeof e[t].children&&this.traverse(e[t].children,i[t]))}flattenTextNode(e){if(0===e.childNodes.length&&e.appendChild(document.createTextNode("")),"#text"!==e.childNodes[0].nodeName&&(e.innerHTML="",e.appendChild(document.createTextNode(""))),e._textNode=e.childNodes[0],e.childNodes.length>1){const t=e.textContent;for(let t=e.childNodes.length;t--;)0!==t&&e.removeChild(e.childNodes[t]);e._textNode.nodeValue=t}}get textNode(){return this.flattenTextNode(this),this._textNode.nodeValue}set textNode(e){this.flattenTextNode(this),this._textNode.nodeValue=String(e)}setProperties(e){if(super.setProperties(e),e.style)for(let t in e.style)this.style[t]=e.style[t]}setAttribute(e,t){!0===t?HTMLElement.prototype.setAttribute.call(this,e,""):!1===t||""===t?this.removeAttribute(e):"string"!=typeof t&&"number"!=typeof t||this.getAttribute(e)!==String(t)&&HTMLElement.prototype.setAttribute.call(this,e,t)}setAria(){this.label?this.setAttribute("aria-label",this.label):this.removeAttribute("aria-label"),this.disabled?this.setAttribute("aria-disabled",!0):this.removeAttribute("aria-disabled")}_onFocusTo(e){const t=e.composedPath()[0],i=e.detail.dir,s=e.detail.rect;if(s.center={x:s.x+s.width/2,y:s.y+s.height/2},t!==this){let n=t,o=1/0,r=1/0;const a=this.querySelectorAll('[tabindex="0"]:not([disabled])');for(let e=a.length;e--;){if(!a[e].offsetParent)continue;if("visible"!==window.getComputedStyle(a[e]).visibility)continue;const t=a[e].getBoundingClientRect();switch(t.center={x:t.x+t.width/2,y:t.y+t.height/2},i){case"right":if(t.left>=s.right-1){const i=Math.abs(t.left-s.right),l=Math.abs(t.center.y-s.center.y);i<o||l<r/3?(n=a[e],o=i,r=l):i===o&&l<r&&(n=a[e],r=l)}break;case"left":if(t.right<=s.left+1){const i=Math.abs(t.right-s.left),l=Math.abs(t.center.y-s.center.y);i<o||l<r/3?(n=a[e],o=i,r=l):i===o&&l<r&&(n=a[e],r=l)}break;case"down":if(t.top>=s.bottom-1){const i=Math.abs(t.center.x-s.center.x),l=Math.abs(t.top-s.bottom);l<r||i<o/3?(n=a[e],o=i,r=l):l===r&&i<o&&(n=a[e],o=i)}break;case"up":if(t.bottom<=s.top+1){const i=Math.abs(t.center.x-s.center.x),l=Math.abs(t.bottom-s.top);l<r||i<o/3?(n=a[e],o=i,r=l):l===r&&i<o&&(n=a[e],o=i)}}}n!==t&&(n.focus(),e.stopPropagation())}}focusTo(e){const t=this.getBoundingClientRect();this.dispatchEvent("focus-to",{dir:e,rect:t},!0)}}const warning=document.createElement("div");let ro;warning.innerHTML='\nNo support for custom elements detected! <br />\nSorry, modern browser is required to view this page.<br />\nPlease try <a href="https://www.mozilla.org/en-US/firefox/new/">Firefox</a>,\n<a href="https://www.google.com/chrome/">Chrome</a> or\n<a href="https://www.apple.com/lae/safari/">Safari</a>',IoElement.Register=function(){IoNodeMixin.Register.call(this);const e=this.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Object.defineProperty(this,"localName",{value:e}),Object.defineProperty(this.prototype,"localName",{value:e}),Object.defineProperty(this,"__isIoElement",{value:!0}),Object.defineProperty(this.prototype,"__isIoElement",{value:!0}),void 0!==window.customElements?(window.customElements.define(e,this),_initProtoStyle(this.prototype.__protochain)):document.body.insertBefore(warning,document.body.children[0])},void 0!==window.ResizeObserver&&(ro=new ResizeObserver(e=>{for(let t of e)t.target.onResized()}));const constructElement=function(e){const t=window.customElements?window.customElements.get(e.name):null;if(t&&t.__isIoElement)return new t(e.props);const i=document.createElement(e.name);return setNativeElementProps(i,e.props),i},superCreateElement=document.createElement;document.createElement=function(){const e=arguments[0];if(e.startsWith("io-")){const t=customElements.get(e);return t?new t:superCreateElement.apply(this,arguments)}return superCreateElement.apply(this,arguments)};const setNativeElementProps=function(e,t){for(let i in t){const s=t[i];if(i.startsWith("@"))e.setAttribute(i.substr(1),s);else if("style"===i)for(let t in s)e.style.setProperty(t,s[t]);else"class"===i?e.className=s:"id"!==i&&(e[i]=s);"name"===i&&e.setAttribute("name",s)}e.__listeners||(Object.defineProperty(e,"__listeners",{value:new Listeners(e)}),e.__listeners.connect()),e.__listeners.setPropListeners(t,e)},mixinDB={},commentsRegex=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi"),keyframeRegex=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi"),mediaQueryRegex=new RegExp("((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi"),mixinRegex=new RegExp("((--[\\s\\S]*?): {([\\s\\S]*?)})","gi"),applyRegex=new RegExp("(@apply\\s.*?;)","gi"),cssRegex=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");function _initProtoStyle(e){const t=e[0].constructor.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i="io-style-"+t.replace("io-","");let s="",n=e[0].constructor.Style;if(n){const i=n.match(mixinRegex);if(i)for(let e=0;e<i.length;e++){const t=i[e].split(": {"),n=t[0],o=t[1].replace(/}/g,"").trim().replace(/^ +/gm,"");mixinDB[n]=o,s+=i[e].replace("--",".").replace(": {"," {")}for(let i=e.length;i--;){let n=e[i].constructor.Style;if(n){const e=(n=n.replace(mixinRegex,"")).match(applyRegex);if(e)for(let t=0;t<e.length;t++){const i=e[t].split("@apply ")[1].replace(";","");mixinDB[i]?n=n.replace(e[t],mixinDB[i]):console.warn("IoElement: cound not find mixin:",i)}{let e=n;const i=(e=(e=(e=e.replace(commentsRegex,"")).replace(keyframeRegex,"")).replace(mediaQueryRegex,"")).match(cssRegex);i&&i.map(e=>{(e=e.trim()).startsWith(":host")||(console.warn(t+': CSS Selector not prefixed with ":host"! This will cause style leakage!'),console.warn(e))})}s+=n.replace(new RegExp(":host","g"),t)}}}if(s){const e=document.createElement("style");e.innerHTML=s,e.setAttribute("id",i),document.head.appendChild(e)}}IoElement.Register();class Option{constructor(e){"string"==typeof e&&(e={value:e,label:e}),e||(e={value:null,label:"Menu option not initialized!"}),this.label=e.label,this.value=e.value,this.action=e.action||null,this.selectable=e.selectable||!1,this.icon=e.icon||"",this.options=e.options instanceof Options?e.options:null}}class Options extends Array{constructor(e){if(super(),e instanceof Array)for(let t=0;t<e.length;t++)e[t]instanceof Option?this.push(e[t]):this.push(new Option(e[t]))}}class Route extends IoNode{static get Properties(){return{value:"",options:Options}}constructor(e){super(e),this.value=this._getDefault().value}_getValidOption(e){return"string"==typeof e?{value:e}:"object"==typeof e?{value:e.value,options:e.options}:void 0}_getDefault(){if(this.options instanceof Array&&this.options[0])return this._getValidOption(this.options[0])}_getSelected(){const e=this.value;for(let t=0;t<this.options.length;t++){let i=this.options[t];if("string"==typeof i&&i===e)return[this._getValidOption(i)];if("object"==typeof i&&(i=this._getValidOption(i)).value===e){if(i.options&&this[e]instanceof Route){return[i,...this[e]._getSelected()]}return[i]}}}valueChanged(){const e=this._getSelected();let t="";for(let i=0;i<e.length;i++)t=t+"/"+e[i].value;console.log("value:",t)}}Route.Register();export{Binding,IoElement,IoNode,IoNodeMixin,Options,Property,ProtoChain,ProtoProperties,ProtoProperty,Route};